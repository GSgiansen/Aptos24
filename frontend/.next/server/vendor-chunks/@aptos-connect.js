"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@aptos-connect";
exports.ids = ["vendor-chunks/@aptos-connect"];
exports.modules = {

/***/ "(ssr)/../../../../node_modules/@aptos-connect/wallet-adapter-plugin/dist/index.mjs":
/*!************************************************************************************!*\
  !*** ../../../../node_modules/@aptos-connect/wallet-adapter-plugin/dist/index.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AptosConnectAccount: () => (/* binding */ AptosConnectAccount),\n/* harmony export */   AptosConnectWallet: () => (/* binding */ AptosConnectWallet),\n/* harmony export */   AptosConnectWalletPlugin: () => (/* binding */ AptosConnectWalletPlugin),\n/* harmony export */   registerAptosConnect: () => (/* binding */ registerAptosConnect)\n/* harmony export */ });\n/* harmony import */ var _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aptos-labs/wallet-standard */ \"(ssr)/../../../../node_modules/@aptos-labs/wallet-standard/dist/esm/index.mjs\");\n/* harmony import */ var _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aptos-labs/ts-sdk */ \"(ssr)/../../../../node_modules/@aptos-labs/ts-sdk/dist/esm/index.mjs\");\n/* harmony import */ var _identity_connect_crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @identity-connect/crypto */ \"(ssr)/../../../../node_modules/@identity-connect/crypto/dist/index.mjs\");\n/* harmony import */ var _identity_connect_dapp_sdk__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @identity-connect/dapp-sdk */ \"(ssr)/../../../../node_modules/@identity-connect/dapp-sdk/dist/index.mjs\");\n/* harmony import */ var aptos__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! aptos */ \"(ssr)/../../../../node_modules/aptos/dist/index.mjs\");\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\n\n// src/index.ts\n\n\n// src/AptosConnectWallet.ts\n\n\n\n\n\n// src/AptosConnectAccount.ts\n\n\nvar _address, _publicKey;\nvar AptosConnectAccount = class {\n  constructor({ address, ansName, publicKey }) {\n    // region AptosWalletAccount\n    this.chains = _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.APTOS_CHAINS;\n    this.features = [];\n    // endregion\n    // region PetraAccount\n    __privateAdd(this, _address, void 0);\n    __privateAdd(this, _publicKey, void 0);\n    __privateSet(this, _publicKey, publicKey);\n    __privateSet(this, _address, address);\n    this.label = ansName;\n  }\n  get address() {\n    return __privateGet(this, _address).toString();\n  }\n  get publicKey() {\n    return __privateGet(this, _publicKey).toUint8Array();\n  }\n  get signingScheme() {\n    if (__privateGet(this, _publicKey) instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Ed25519PublicKey) {\n      return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.SigningScheme.Ed25519;\n    }\n    if (__privateGet(this, _publicKey) instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.MultiEd25519PublicKey) {\n      return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.SigningScheme.MultiEd25519;\n    }\n    if (__privateGet(this, _publicKey) instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.AnyPublicKey) {\n      return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.SigningScheme.SingleKey;\n    }\n    if (__privateGet(this, _publicKey) instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.MultiKey) {\n      return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.SigningScheme.MultiKey;\n    }\n    throw new Error(\"Unsupported public key type\");\n  }\n  // endregion\n};\n_address = new WeakMap();\n_publicKey = new WeakMap();\n\n// src/shared.ts\nvar walletName = \"Continue with Google\";\nvar walletUrl = \"https://aptosconnect.app\";\nvar walletIcon = (\n  // eslint-disable-next-line max-len\n  \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBjbGFzcz0iaF8yMCB3XzIwIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIzLjU0IDEyLjc2MTNDMjMuNTQgMTEuOTQ1OSAyMy40NjY4IDExLjE2MTggMjMuMzMwOSAxMC40MDkxSDEyLjVWMTQuODU3NUgxOC42ODkxQzE4LjQyMjUgMTYuMjk1IDE3LjYxMjMgMTcuNTEyOSAxNi4zOTQzIDE4LjMyODRWMjEuMjEzOEgyMC4xMTA5QzIyLjI4NTUgMTkuMjExOCAyMy41NCAxNi4yNjM2IDIzLjU0IDEyLjc2MTNaIiBmaWxsPSIjNDI4NUY0Ij48L3BhdGg+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMi40OTk1IDIzLjk5OThDMTUuNjA0NSAyMy45OTk4IDE4LjIwNzcgMjIuOTcgMjAuMTEwNCAyMS4yMTM3TDE2LjM5MzggMTguMzI4MkMxNS4zNjQgMTkuMDE4MiAxNC4wNDY3IDE5LjQyNTkgMTIuNDk5NSAxOS40MjU5QzkuNTA0MjUgMTkuNDI1OSA2Ljk2OTAyIDE3LjQwMyA2LjA2NDcgMTQuNjg0OEgyLjIyMjY2VjE3LjY2NDRDNC4xMTQ5MyAyMS40MjI4IDguMDA0MDIgMjMuOTk5OCAxMi40OTk1IDIzLjk5OThaIiBmaWxsPSIjMzRBODUzIj48L3BhdGg+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02LjA2NTIzIDE0LjY4NTFDNS44MzUyMyAxMy45OTUxIDUuNzA0NTUgMTMuMjU4MSA1LjcwNDU1IDEyLjUwMDFDNS43MDQ1NSAxMS43NDIyIDUuODM1MjMgMTEuMDA1MSA2LjA2NTIzIDEwLjMxNTFWNy4zMzU1N0gyLjIyMzE4QzEuNDQ0MzIgOC44ODgwNyAxIDEwLjY0NDQgMSAxMi41MDAxQzEgMTQuMzU1OCAxLjQ0NDMyIDE2LjExMjIgMi4yMjMxOCAxNy42NjQ3TDYuMDY1MjMgMTQuNjg1MVoiIGZpbGw9IiNGQkJDMDUiPjwvcGF0aD48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEyLjQ5OTUgNS41NzM4NkMxNC4xODc5IDUuNTczODYgMTUuNzAzOCA2LjE1NDA5IDE2Ljg5NTYgNy4yOTM2NEwyMC4xOTQgMy45OTUyM0MxOC4yMDI0IDIuMTM5NTUgMTUuNTk5MiAxIDEyLjQ5OTUgMUM4LjAwNDAyIDEgNC4xMTQ5MyAzLjU3NzA1IDIuMjIyNjYgNy4zMzU0NUw2LjA2NDcgMTAuMzE1QzYuOTY5MDIgNy41OTY4MiA5LjUwNDI1IDUuNTczODYgMTIuNDk5NSA1LjU3Mzg2WiIgZmlsbD0iI0VBNDMzNSI+PC9wYXRoPjwvc3ZnPg==\"\n);\n\n// src/AptosConnectWallet.ts\nfunction customAccountToStandardAccount({ address, name, publicKey }) {\n  return new _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AccountInfo({\n    address,\n    ansName: name,\n    publicKey\n  });\n}\nvar _AptosConnectWallet = class _AptosConnectWallet {\n  constructor({ network = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Network.MAINNET, ...clientConfig }) {\n    // endregion\n    // region AptosWallet\n    this.name = walletName;\n    this.version = \"1.0.0\";\n    this.icon = walletIcon;\n    this.url = walletUrl;\n    this.chains = _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.APTOS_CHAINS;\n    this.client = new _identity_connect_dapp_sdk__WEBPACK_IMPORTED_MODULE_3__.ACDappClient(clientConfig);\n    if (!_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.NetworkToNodeAPI[network]) {\n      throw new Error(\"Network not supported\");\n    }\n    const aptosConfig = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.AptosConfig({ network });\n    this.aptosClient = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Aptos(aptosConfig);\n  }\n  static get connectedAccount() {\n    const serialized = localStorage.getItem(_AptosConnectWallet.connectedAccountStorageKey);\n    if (!serialized) {\n      return void 0;\n    }\n    try {\n      const { address, publicKey } = JSON.parse(serialized);\n      return serialized ? new _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AccountInfo({\n        address: _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.AccountAddress.from(address),\n        publicKey: (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_2__.deserializePublicKeyB64)(publicKey)\n      }) : void 0;\n    } catch (err) {\n      console.warn(\"Failed to parse state, resetting it\");\n      this.connectedAccount = void 0;\n      return void 0;\n    }\n  }\n  static set connectedAccount(value) {\n    if (value !== void 0) {\n      const serialized = {\n        address: value.address.toString(),\n        publicKey: (0,_identity_connect_crypto__WEBPACK_IMPORTED_MODULE_2__.serializePublicKeyB64)(value.publicKey)\n      };\n      localStorage.setItem(_AptosConnectWallet.connectedAccountStorageKey, JSON.stringify(serialized));\n    } else {\n      localStorage.removeItem(_AptosConnectWallet.connectedAccountStorageKey);\n    }\n  }\n  // eslint-disable-next-line class-methods-use-this\n  get accounts() {\n    const { connectedAccount } = _AptosConnectWallet;\n    return connectedAccount ? [new AptosConnectAccount(connectedAccount)] : [];\n  }\n  get features() {\n    return {\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosConnectNamespace]: {\n        connect: this.connect.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosDisconnectNamespace]: {\n        disconnect: this.disconnect.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosGetAccountNamespace]: {\n        account: this.getAccount.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosGetNetworkNamespace]: {\n        network: this.getNetwork.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosOnAccountChangeNamespace]: {\n        onAccountChange: this.onAccountChange.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosOnNetworkChangeNamespace]: {\n        onNetworkChange: this.onNetworkChange.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosSignAndSubmitTransactionNamespace]: {\n        signAndSubmitTransaction: this.signAndSubmitTransaction.bind(this),\n        version: \"1.1.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosSignMessageNamespace]: {\n        signMessage: this.signMessage.bind(this),\n        version: \"1.0.0\"\n      },\n      [_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosSignTransactionNamespace]: {\n        signTransaction: this.signTransaction.bind(this),\n        version: \"1.0.0\"\n      }\n    };\n  }\n  async connect() {\n    const { connectedAccount } = _AptosConnectWallet;\n    if (connectedAccount !== void 0) {\n      return { args: connectedAccount, status: _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.UserResponseStatus.APPROVED };\n    }\n    const response = await this.client.connect();\n    if (response.status === \"dismissed\") {\n      return { status: _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.UserResponseStatus.REJECTED };\n    }\n    const newConnectedAccount = customAccountToStandardAccount(response.args.account);\n    _AptosConnectWallet.connectedAccount = newConnectedAccount;\n    return {\n      args: newConnectedAccount,\n      status: _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.UserResponseStatus.APPROVED\n    };\n  }\n  async disconnect() {\n    const { connectedAccount } = _AptosConnectWallet;\n    if (connectedAccount) {\n      await this.client.disconnect(connectedAccount.address);\n      _AptosConnectWallet.connectedAccount = void 0;\n    }\n  }\n  // eslint-disable-next-line class-methods-use-this\n  async getAccount() {\n    const { connectedAccount } = _AptosConnectWallet;\n    if (!connectedAccount) {\n      throw new _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletError(_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletErrorCode.Unauthorized);\n    }\n    return customAccountToStandardAccount(connectedAccount);\n  }\n  async getNetwork() {\n    const { network } = this.aptosClient.config;\n    const chainId = await this.aptosClient.getChainId();\n    const url = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.NetworkToNodeAPI[network];\n    return {\n      chainId,\n      name: network,\n      url\n    };\n  }\n  async signMessage(input) {\n    const { connectedAccount } = _AptosConnectWallet;\n    if (!connectedAccount) {\n      throw new _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletError(_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletErrorCode.Unauthorized);\n    }\n    const { chainId } = await this.getNetwork();\n    const { message, nonce } = input;\n    const encoder = new TextEncoder();\n    const messageBytes = encoder.encode(message);\n    const nonceBytes = encoder.encode(nonce);\n    const response = await this.client.signMessage({\n      chainId,\n      message: messageBytes,\n      nonce: nonceBytes,\n      signerAddress: connectedAccount.address\n    });\n    if (response.status === \"dismissed\") {\n      return { status: _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.UserResponseStatus.REJECTED };\n    }\n    const { fullMessage, signature } = response.args;\n    const extraResponseArgs = {\n      address: connectedAccount.address.toString(),\n      application: \"\",\n      chainId,\n      message,\n      nonce,\n      prefix: \"APTOS\"\n    };\n    return {\n      args: {\n        fullMessage,\n        signature,\n        ...extraResponseArgs\n      },\n      status: _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.UserResponseStatus.APPROVED\n    };\n  }\n  async signTransaction(transaction, _asFeePayer) {\n    const { connectedAccount } = _AptosConnectWallet;\n    if (!connectedAccount) {\n      throw new _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletError(_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletErrorCode.Unauthorized);\n    }\n    const feePayer = transaction.feePayerAddress ? { address: transaction.feePayerAddress } : void 0;\n    const secondarySigners = transaction.secondarySignerAddresses?.map((address) => ({ address }));\n    const response = await this.client.signTransaction({\n      feePayer,\n      secondarySigners,\n      signerAddress: connectedAccount.address,\n      transaction: transaction.rawTransaction\n    });\n    if (response.status === \"dismissed\") {\n      return { status: _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.UserResponseStatus.REJECTED };\n    }\n    return {\n      args: response.args.authenticator,\n      status: _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.UserResponseStatus.APPROVED\n    };\n  }\n  async signAndSubmitTransaction(args) {\n    const { gasUnitPrice, maxGasAmount, payload } = args;\n    const { connectedAccount } = _AptosConnectWallet;\n    if (!connectedAccount) {\n      throw new _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletError(_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletErrorCode.Unauthorized);\n    }\n    const response = await this.client.signAndSubmitTransaction({\n      gasUnitPrice,\n      maxGasAmount,\n      network: this.aptosClient.config.network,\n      payload,\n      signerAddress: connectedAccount.address\n    });\n    if (response.status === \"dismissed\") {\n      return { status: _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.UserResponseStatus.REJECTED };\n    }\n    const txnResponse = await this.aptosClient.getTransactionByHash({\n      transactionHash: response.args.txnHash\n    });\n    return {\n      args: txnResponse,\n      status: _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.UserResponseStatus.APPROVED\n    };\n  }\n  // eslint-disable-next-line class-methods-use-this\n  async onAccountChange(_callback) {\n  }\n  // eslint-disable-next-line class-methods-use-this\n  async onNetworkChange(_callback) {\n  }\n  // endregion\n};\n// region connectedAccount\n_AptosConnectWallet.connectedAccountStorageKey = \"@aptos-connect/connectedAccount\";\nvar AptosConnectWallet = _AptosConnectWallet;\n\n// src/AptosConnectWalletPlugin.ts\n\n\n\n\n\n// src/conversion.ts\n\n\nfunction convertV1toV2(src, dst) {\n  const serializedBytes = aptos__WEBPACK_IMPORTED_MODULE_4__.BCS.bcsToBytes(src);\n  const deserializerV2 = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Deserializer(serializedBytes);\n  return dst.deserialize(deserializerV2);\n}\nfunction convertPayloadInputFromV1ToV2(inputV1) {\n  if (\"multisig_address\" in inputV1) {\n    throw new Error(\"Multisig payload not supported\");\n  }\n  if (\"code\" in inputV1) {\n    throw new Error(\"Script payload not supported\");\n  }\n  if (\"function\" in inputV1) {\n    return {\n      function: inputV1.function,\n      functionArguments: inputV1.arguments,\n      typeArguments: inputV1.type_arguments\n    };\n  }\n  throw new Error(\"Unsupported payload type\");\n}\n\n// src/AptosConnectWalletPlugin.ts\nfunction customAccountToStandardAccount2({ address, name, publicKey }) {\n  if (publicKey instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.MultiEd25519PublicKey || publicKey instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.MultiKey) {\n    throw new Error(\"Unsupported public key type\");\n  }\n  return {\n    address: address.toString(),\n    ansName: name,\n    publicKey: publicKey.toString()\n  };\n}\nfunction accountAuthenticatorToTransactionAuthenticator(accountAuthenticator) {\n  if (accountAuthenticator instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.AccountAuthenticatorEd25519) {\n    return new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.TransactionAuthenticatorEd25519(accountAuthenticator.public_key, accountAuthenticator.signature);\n  }\n  if (accountAuthenticator instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.AccountAuthenticatorSingleKey) {\n    if (accountAuthenticator.isEd25519()) {\n      return new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.TransactionAuthenticatorEd25519(\n        accountAuthenticator.public_key.publicKey,\n        accountAuthenticator.signature.signature\n      );\n    }\n    return new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.TransactionAuthenticatorSingleSender(accountAuthenticator);\n  }\n  throw new Error(\"Cannot convert account authenticator to a compatible transaction authenticator\");\n}\nfunction unwrapUserResponse(response) {\n  if (response.status === \"dismissed\") {\n    throw new _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletError(0, \"Rejected\");\n  }\n  return response.args;\n}\nvar _AptosConnectWalletPlugin = class _AptosConnectWalletPlugin {\n  constructor({ network = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Network.MAINNET, ...clientConfig }) {\n    // Hack to make this always available\n    this.providerName = \"open\";\n    this.version = \"v2\";\n    this.name = walletName;\n    this.url = walletUrl;\n    this.icon = walletIcon;\n    this.client = new _identity_connect_dapp_sdk__WEBPACK_IMPORTED_MODULE_3__.ACDappClient(clientConfig);\n    if (!_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.NetworkToNodeAPI[network]) {\n      throw new Error(\"Network not supported\");\n    }\n    const aptosConfig = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.AptosConfig({ network });\n    this.aptosClient = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Aptos(aptosConfig);\n  }\n  static get connectedAccount() {\n    const value = localStorage.getItem(_AptosConnectWalletPlugin.connectedAccountStorageKey);\n    return value ? JSON.parse(value) : void 0;\n  }\n  static set connectedAccount(value) {\n    if (value !== void 0) {\n      localStorage.setItem(_AptosConnectWalletPlugin.connectedAccountStorageKey, JSON.stringify(value));\n    } else {\n      localStorage.removeItem(_AptosConnectWalletPlugin.connectedAccountStorageKey);\n    }\n  }\n  // endregion\n  async connect() {\n    const { connectedAccount } = _AptosConnectWalletPlugin;\n    if (connectedAccount !== void 0) {\n      return connectedAccount;\n    }\n    const response = await this.client.connect();\n    if (response.status === \"dismissed\") {\n      throw new _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletError(_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletErrorCode.Unauthorized);\n    }\n    const newConnectedAccount = customAccountToStandardAccount2(response.args.account);\n    _AptosConnectWalletPlugin.connectedAccount = newConnectedAccount;\n    return newConnectedAccount;\n  }\n  async account() {\n    const [firstAccount] = await this.client.getConnectedAccounts();\n    if (firstAccount === void 0) {\n      throw new _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletError(_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletErrorCode.Unauthorized);\n    }\n    return customAccountToStandardAccount2(firstAccount);\n  }\n  async disconnect() {\n    const { connectedAccount } = _AptosConnectWalletPlugin;\n    if (connectedAccount) {\n      await this.client.disconnect(connectedAccount.address);\n      _AptosConnectWalletPlugin.connectedAccount = void 0;\n    }\n  }\n  async signAndSubmitTransaction(payloadV1InputOrGenerateTxnInput, optionsV1) {\n    const { connectedAccount } = _AptosConnectWalletPlugin;\n    if (!connectedAccount) {\n      throw new _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletError(_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletErrorCode.Unauthorized);\n    }\n    let payload;\n    let options;\n    if (\"data\" in payloadV1InputOrGenerateTxnInput) {\n      const { data: payloadV2Input, options: optionsV2 } = payloadV1InputOrGenerateTxnInput;\n      payload = payloadV2Input;\n      options = {\n        expirationTimestamp: optionsV2?.expireTimestamp,\n        gasUnitPrice: optionsV2?.gasUnitPrice,\n        maxGasAmount: optionsV2?.maxGasAmount,\n        network: this.aptosClient.config.network\n      };\n    } else {\n      payload = convertPayloadInputFromV1ToV2(payloadV1InputOrGenerateTxnInput);\n      options = {\n        expirationTimestamp: optionsV1?.expirationTimestamp,\n        gasUnitPrice: optionsV1?.gasUnitPrice ?? optionsV1?.gas_unit_price,\n        maxGasAmount: optionsV1?.maxGasAmount ?? optionsV1?.max_gas_amount,\n        network: this.aptosClient.config.network\n      };\n    }\n    const response = await this.client.signAndSubmitTransaction({\n      signerAddress: _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.AccountAddress.from(connectedAccount.address),\n      ...options,\n      payload\n    });\n    const { txnHash } = unwrapUserResponse(response);\n    return { hash: txnHash };\n  }\n  async signAndSubmitBCSTransaction(payloadV1, options) {\n    const { connectedAccount } = _AptosConnectWalletPlugin;\n    if (!connectedAccount) {\n      throw new _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletError(_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletErrorCode.Unauthorized);\n    }\n    const payload = convertV1toV2(payloadV1, _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.TransactionPayload);\n    const response = await this.client.signAndSubmitTransaction({\n      expirationTimestamp: options?.expirationTimestamp,\n      gasUnitPrice: options?.gasUnitPrice ?? options?.gas_unit_price,\n      maxGasAmount: options?.maxGasAmount ?? options?.max_gas_amount,\n      network: this.aptosClient.config.network,\n      payload,\n      signerAddress: _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.AccountAddress.from(connectedAccount.address)\n    });\n    const { txnHash } = unwrapUserResponse(response);\n    return { hash: txnHash };\n  }\n  async signMessage(args) {\n    const { connectedAccount } = _AptosConnectWalletPlugin;\n    if (!connectedAccount) {\n      throw new _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletError(_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletErrorCode.Unauthorized);\n    }\n    const chainId = await this.aptosClient.getChainId();\n    const { message, nonce } = args;\n    const encoder = new TextEncoder();\n    const messageBytes = encoder.encode(message);\n    const nonceBytes = encoder.encode(nonce);\n    const response = await this.client.signMessage({\n      chainId,\n      message: messageBytes,\n      nonce: nonceBytes,\n      signerAddress: _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.AccountAddress.from(connectedAccount.address)\n    });\n    const { fullMessage, signature } = unwrapUserResponse(response);\n    const extraResponseArgs = {\n      address: connectedAccount.address.toString(),\n      application: this.client.dappInfo.domain,\n      chainId,\n      message,\n      nonce,\n      prefix: \"APTOS\"\n    };\n    return {\n      fullMessage,\n      signature: signature.toString(),\n      ...extraResponseArgs\n    };\n  }\n  async signTransaction(transactionOrPayload, optionsOrAsFeePayer) {\n    const { connectedAccount } = _AptosConnectWalletPlugin;\n    if (!connectedAccount) {\n      throw new _aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletError(_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.AptosWalletErrorCode.Unauthorized);\n    }\n    if (\"rawTransaction\" in transactionOrPayload) {\n      const transaction = transactionOrPayload;\n      const feePayer = transaction.feePayerAddress ? { address: transaction.feePayerAddress } : void 0;\n      const secondarySigners = transaction.secondarySignerAddresses?.map((address) => ({ address }));\n      const response2 = await this.client.signTransaction({\n        feePayer,\n        secondarySigners,\n        signerAddress: _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.AccountAddress.from(connectedAccount.address),\n        transaction: transaction.rawTransaction\n      });\n      const { authenticator: authenticator2 } = unwrapUserResponse(response2);\n      return authenticator2;\n    }\n    if (!(transactionOrPayload instanceof aptos__WEBPACK_IMPORTED_MODULE_4__.TxnBuilderTypes.TransactionPayload)) {\n      throw new Error(\"Not supported\");\n    }\n    const payload = convertV1toV2(transactionOrPayload, _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.TransactionPayload);\n    const options = optionsOrAsFeePayer;\n    const sender = options?.sender ? {\n      address: _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.AccountAddress.from(options.sender)\n    } : void 0;\n    const response = await this.client.signTransaction({\n      expirationSecondsFromNow: options?.expirationSecondsFromNow,\n      expirationTimestamp: options?.expirationTimestamp,\n      gasUnitPrice: options?.gasUnitPrice ?? options?.gas_unit_price,\n      maxGasAmount: options?.maxGasAmount ?? options?.max_gas_amount,\n      network: this.aptosClient.config.network,\n      payload,\n      sender,\n      sequenceNumber: options?.sequenceNumber,\n      signerAddress: _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.AccountAddress.from(connectedAccount.address)\n    });\n    const { authenticator, rawTransaction } = unwrapUserResponse(response);\n    if (rawTransaction === void 0) {\n      throw new Error(\"The wallet did not return a raw transaction\");\n    }\n    const txnAuthenticator = accountAuthenticatorToTransactionAuthenticator(authenticator);\n    const signedTransaction = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.SignedTransaction(rawTransaction, txnAuthenticator);\n    return signedTransaction.bcsToBytes();\n  }\n  // eslint-disable-next-line class-methods-use-this\n  async onNetworkChange(_callback) {\n  }\n  // eslint-disable-next-line class-methods-use-this\n  async onAccountChange(_callback) {\n  }\n  async network() {\n    const { network } = this.aptosClient.config;\n    const chainId = await this.aptosClient.getChainId();\n    const url = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.NetworkToNodeAPI[network];\n    return {\n      chainId: chainId.toString(),\n      name: network,\n      url\n    };\n  }\n};\n// region connectedAccount\n_AptosConnectWalletPlugin.connectedAccountStorageKey = \"AptosConnectWalletPlugin.connectedAccount\";\nvar AptosConnectWalletPlugin = _AptosConnectWalletPlugin;\n\n// src/index.ts\nfunction registerAptosConnect(config = {}) {\n  const walletPlugin = new AptosConnectWallet(config);\n  (0,_aptos_labs_wallet_standard__WEBPACK_IMPORTED_MODULE_0__.registerWallet)(walletPlugin);\n}\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcHRvcy1jb25uZWN0L3dhbGxldC1hZGFwdGVyLXBsdWdpbi9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDNkQ7O0FBRTdEO0FBTzRCO0FBZ0JTO0FBQ3FEO0FBQ2hDOztBQUUxRDtBQU80QjtBQUMrQjtBQUMzRDtBQUNBO0FBQ0EsZ0JBQWdCLDZCQUE2QjtBQUM3QztBQUNBLGtCQUFrQixxRUFBWTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxnRUFBZ0I7QUFDbEUsYUFBYSw2REFBYTtBQUMxQjtBQUNBLGtEQUFrRCxxRUFBcUI7QUFDdkUsYUFBYSw2REFBYTtBQUMxQjtBQUNBLGtEQUFrRCw0REFBWTtBQUM5RCxhQUFhLDZEQUFhO0FBQzFCO0FBQ0Esa0RBQWtELHdEQUFRO0FBQzFELGFBQWEsNkRBQWE7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0Qjs7QUFFQTtBQUNBLDBDQUEwQywwQkFBMEI7QUFDcEUsYUFBYSxvRUFBWTtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGdCQUFnQixVQUFVLHVEQUFPLDJCQUEyQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IscUVBQWE7QUFDL0Isc0JBQXNCLG9FQUFZO0FBQ2xDLFNBQVMsZ0VBQWdCO0FBQ3pCO0FBQ0E7QUFDQSw0QkFBNEIsMkRBQVcsR0FBRyxTQUFTO0FBQ25ELDJCQUEy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Q0E7QUFDQSxlQUFlLDhEQUFlO0FBQzlCLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsOERBQWU7QUFDcEMsS0FBSztBQUNMLFlBQVksZ0NBQWdDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGlFQUFpQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFVBQVU7QUFDdEI7QUFDQSxnQkFBZ0IsZ0VBQWlCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EseUNBQXlDO0FBQ3pDO0FBQ0EsRUFBRSwyRUFBYztBQUNoQjtBQU1FO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwdG9zLWNvbm5lY3Qvd2FsbGV0LWFkYXB0ZXItcGx1Z2luL2Rpc3QvaW5kZXgubWpzPzc3ZTgiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fYWNjZXNzQ2hlY2sgPSAob2JqLCBtZW1iZXIsIG1zZykgPT4ge1xuICBpZiAoIW1lbWJlci5oYXMob2JqKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoXCJDYW5ub3QgXCIgKyBtc2cpO1xufTtcbnZhciBfX3ByaXZhdGVHZXQgPSAob2JqLCBtZW1iZXIsIGdldHRlcikgPT4ge1xuICBfX2FjY2Vzc0NoZWNrKG9iaiwgbWVtYmVyLCBcInJlYWQgZnJvbSBwcml2YXRlIGZpZWxkXCIpO1xuICByZXR1cm4gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IG1lbWJlci5nZXQob2JqKTtcbn07XG52YXIgX19wcml2YXRlQWRkID0gKG9iaiwgbWVtYmVyLCB2YWx1ZSkgPT4ge1xuICBpZiAobWVtYmVyLmhhcyhvYmopKVxuICAgIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBhZGQgdGhlIHNhbWUgcHJpdmF0ZSBtZW1iZXIgbW9yZSB0aGFuIG9uY2VcIik7XG4gIG1lbWJlciBpbnN0YW5jZW9mIFdlYWtTZXQgPyBtZW1iZXIuYWRkKG9iaikgOiBtZW1iZXIuc2V0KG9iaiwgdmFsdWUpO1xufTtcbnZhciBfX3ByaXZhdGVTZXQgPSAob2JqLCBtZW1iZXIsIHZhbHVlLCBzZXR0ZXIpID0+IHtcbiAgX19hY2Nlc3NDaGVjayhvYmosIG1lbWJlciwgXCJ3cml0ZSB0byBwcml2YXRlIGZpZWxkXCIpO1xuICBzZXR0ZXIgPyBzZXR0ZXIuY2FsbChvYmosIHZhbHVlKSA6IG1lbWJlci5zZXQob2JqLCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG5cbi8vIHNyYy9pbmRleC50c1xuaW1wb3J0IHsgcmVnaXN0ZXJXYWxsZXQgfSBmcm9tIFwiQGFwdG9zLWxhYnMvd2FsbGV0LXN0YW5kYXJkXCI7XG5cbi8vIHNyYy9BcHRvc0Nvbm5lY3RXYWxsZXQudHNcbmltcG9ydCB7XG4gIEFjY291bnRBZGRyZXNzIGFzIEFjY291bnRBZGRyZXNzMixcbiAgQXB0b3MsXG4gIEFwdG9zQ29uZmlnLFxuICBOZXR3b3JrLFxuICBOZXR3b3JrVG9Ob2RlQVBJXG59IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7XG4gIEFjY291bnRJbmZvIGFzIEFjY291bnRJbmZvMixcbiAgQVBUT1NfQ0hBSU5TIGFzIEFQVE9TX0NIQUlOUzIsXG4gIEFwdG9zQ29ubmVjdE5hbWVzcGFjZSxcbiAgQXB0b3NEaXNjb25uZWN0TmFtZXNwYWNlLFxuICBBcHRvc0dldEFjY291bnROYW1lc3BhY2UsXG4gIEFwdG9zR2V0TmV0d29ya05hbWVzcGFjZSxcbiAgQXB0b3NPbkFjY291bnRDaGFuZ2VOYW1lc3BhY2UsXG4gIEFwdG9zT25OZXR3b3JrQ2hhbmdlTmFtZXNwYWNlLFxuICBBcHRvc1NpZ25BbmRTdWJtaXRUcmFuc2FjdGlvbk5hbWVzcGFjZSxcbiAgQXB0b3NTaWduTWVzc2FnZU5hbWVzcGFjZSxcbiAgQXB0b3NTaWduVHJhbnNhY3Rpb25OYW1lc3BhY2UsXG4gIEFwdG9zV2FsbGV0RXJyb3IsXG4gIEFwdG9zV2FsbGV0RXJyb3JDb2RlLFxuICBVc2VyUmVzcG9uc2VTdGF0dXNcbn0gZnJvbSBcIkBhcHRvcy1sYWJzL3dhbGxldC1zdGFuZGFyZFwiO1xuaW1wb3J0IHsgZGVzZXJpYWxpemVQdWJsaWNLZXlCNjQsIHNlcmlhbGl6ZVB1YmxpY0tleUI2NCB9IGZyb20gXCJAaWRlbnRpdHktY29ubmVjdC9jcnlwdG9cIjtcbmltcG9ydCB7IEFDRGFwcENsaWVudCB9IGZyb20gXCJAaWRlbnRpdHktY29ubmVjdC9kYXBwLXNka1wiO1xuXG4vLyBzcmMvQXB0b3NDb25uZWN0QWNjb3VudC50c1xuaW1wb3J0IHtcbiAgQW55UHVibGljS2V5LFxuICBFZDI1NTE5UHVibGljS2V5LFxuICBNdWx0aUVkMjU1MTlQdWJsaWNLZXksXG4gIE11bHRpS2V5LFxuICBTaWduaW5nU2NoZW1lXG59IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmltcG9ydCB7IEFQVE9TX0NIQUlOUyB9IGZyb20gXCJAYXB0b3MtbGFicy93YWxsZXQtc3RhbmRhcmRcIjtcbnZhciBfYWRkcmVzcywgX3B1YmxpY0tleTtcbnZhciBBcHRvc0Nvbm5lY3RBY2NvdW50ID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcih7IGFkZHJlc3MsIGFuc05hbWUsIHB1YmxpY0tleSB9KSB7XG4gICAgLy8gcmVnaW9uIEFwdG9zV2FsbGV0QWNjb3VudFxuICAgIHRoaXMuY2hhaW5zID0gQVBUT1NfQ0hBSU5TO1xuICAgIHRoaXMuZmVhdHVyZXMgPSBbXTtcbiAgICAvLyBlbmRyZWdpb25cbiAgICAvLyByZWdpb24gUGV0cmFBY2NvdW50XG4gICAgX19wcml2YXRlQWRkKHRoaXMsIF9hZGRyZXNzLCB2b2lkIDApO1xuICAgIF9fcHJpdmF0ZUFkZCh0aGlzLCBfcHVibGljS2V5LCB2b2lkIDApO1xuICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfcHVibGljS2V5LCBwdWJsaWNLZXkpO1xuICAgIF9fcHJpdmF0ZVNldCh0aGlzLCBfYWRkcmVzcywgYWRkcmVzcyk7XG4gICAgdGhpcy5sYWJlbCA9IGFuc05hbWU7XG4gIH1cbiAgZ2V0IGFkZHJlc3MoKSB7XG4gICAgcmV0dXJuIF9fcHJpdmF0ZUdldCh0aGlzLCBfYWRkcmVzcykudG9TdHJpbmcoKTtcbiAgfVxuICBnZXQgcHVibGljS2V5KCkge1xuICAgIHJldHVybiBfX3ByaXZhdGVHZXQodGhpcywgX3B1YmxpY0tleSkudG9VaW50OEFycmF5KCk7XG4gIH1cbiAgZ2V0IHNpZ25pbmdTY2hlbWUoKSB7XG4gICAgaWYgKF9fcHJpdmF0ZUdldCh0aGlzLCBfcHVibGljS2V5KSBpbnN0YW5jZW9mIEVkMjU1MTlQdWJsaWNLZXkpIHtcbiAgICAgIHJldHVybiBTaWduaW5nU2NoZW1lLkVkMjU1MTk7XG4gICAgfVxuICAgIGlmIChfX3ByaXZhdGVHZXQodGhpcywgX3B1YmxpY0tleSkgaW5zdGFuY2VvZiBNdWx0aUVkMjU1MTlQdWJsaWNLZXkpIHtcbiAgICAgIHJldHVybiBTaWduaW5nU2NoZW1lLk11bHRpRWQyNTUxOTtcbiAgICB9XG4gICAgaWYgKF9fcHJpdmF0ZUdldCh0aGlzLCBfcHVibGljS2V5KSBpbnN0YW5jZW9mIEFueVB1YmxpY0tleSkge1xuICAgICAgcmV0dXJuIFNpZ25pbmdTY2hlbWUuU2luZ2xlS2V5O1xuICAgIH1cbiAgICBpZiAoX19wcml2YXRlR2V0KHRoaXMsIF9wdWJsaWNLZXkpIGluc3RhbmNlb2YgTXVsdGlLZXkpIHtcbiAgICAgIHJldHVybiBTaWduaW5nU2NoZW1lLk11bHRpS2V5O1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBwdWJsaWMga2V5IHR5cGVcIik7XG4gIH1cbiAgLy8gZW5kcmVnaW9uXG59O1xuX2FkZHJlc3MgPSBuZXcgV2Vha01hcCgpO1xuX3B1YmxpY0tleSA9IG5ldyBXZWFrTWFwKCk7XG5cbi8vIHNyYy9zaGFyZWQudHNcbnZhciB3YWxsZXROYW1lID0gXCJDb250aW51ZSB3aXRoIEdvb2dsZVwiO1xudmFyIHdhbGxldFVybCA9IFwiaHR0cHM6Ly9hcHRvc2Nvbm5lY3QuYXBwXCI7XG52YXIgd2FsbGV0SWNvbiA9IChcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbiAgXCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlNalFpSUdobGFXZG9kRDBpTWpRaUlIWnBaWGRDYjNnOUlqQWdNQ0F5TkNBeU5DSWdabWxzYkQwaWJtOXVaU0lnZUcxc2JuTTlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5Mekl3TURBdmMzWm5JaUJqYkdGemN6MGlhRjh5TUNCM1h6SXdJajQ4Y0dGMGFDQm1hV3hzTFhKMWJHVTlJbVYyWlc1dlpHUWlJR05zYVhBdGNuVnNaVDBpWlhabGJtOWtaQ0lnWkQwaVRUSXpMalUwSURFeUxqYzJNVE5ETWpNdU5UUWdNVEV1T1RRMU9TQXlNeTQwTmpZNElERXhMakUyTVRnZ01qTXVNek13T1NBeE1DNDBNRGt4U0RFeUxqVldNVFF1T0RVM05VZ3hPQzQyT0RreFF6RTRMalF5TWpVZ01UWXVNamsxSURFM0xqWXhNak1nTVRjdU5URXlPU0F4Tmk0ek9UUXpJREU0TGpNeU9EUldNakV1TWpFek9FZ3lNQzR4TVRBNVF6SXlMakk0TlRVZ01Ua3VNakV4T0NBeU15NDFOQ0F4Tmk0eU5qTTJJREl6TGpVMElERXlMamMyTVROYUlpQm1hV3hzUFNJak5ESTROVVkwSWo0OEwzQmhkR2crUEhCaGRHZ2dabWxzYkMxeWRXeGxQU0psZG1WdWIyUmtJaUJqYkdsd0xYSjFiR1U5SW1WMlpXNXZaR1FpSUdROUlrMHhNaTQwT1RrMUlESXpMams1T1RoRE1UVXVOakEwTlNBeU15NDVPVGs0SURFNExqSXdOemNnTWpJdU9UY2dNakF1TVRFd05DQXlNUzR5TVRNM1RERTJMak01TXpnZ01UZ3VNekk0TWtNeE5TNHpOalFnTVRrdU1ERTRNaUF4TkM0d05EWTNJREU1TGpReU5Ua2dNVEl1TkRrNU5TQXhPUzQwTWpVNVF6a3VOVEEwTWpVZ01Ua3VOREkxT1NBMkxqazJPVEF5SURFM0xqUXdNeUEyTGpBMk5EY2dNVFF1TmpnME9FZ3lMakl5TWpZMlZqRTNMalkyTkRSRE5DNHhNVFE1TXlBeU1TNDBNakk0SURndU1EQTBNRElnTWpNdU9UazVPQ0F4TWk0ME9UazFJREl6TGprNU9UaGFJaUJtYVd4c1BTSWpNelJCT0RVeklqNDhMM0JoZEdnK1BIQmhkR2dnWm1sc2JDMXlkV3hsUFNKbGRtVnViMlJrSWlCamJHbHdMWEoxYkdVOUltVjJaVzV2WkdRaUlHUTlJazAyTGpBMk5USXpJREUwTGpZNE5URkROUzQ0TXpVeU15QXhNeTQ1T1RVeElEVXVOekEwTlRVZ01UTXVNalU0TVNBMUxqY3dORFUxSURFeUxqVXdNREZETlM0M01EUTFOU0F4TVM0M05ESXlJRFV1T0RNMU1qTWdNVEV1TURBMU1TQTJMakEyTlRJeklERXdMak14TlRGV055NHpNelUxTjBneUxqSXlNekU0UXpFdU5EUTBNeklnT0M0NE9EZ3dOeUF4SURFd0xqWTBORFFnTVNBeE1pNDFNREF4UXpFZ01UUXVNelUxT0NBeExqUTBORE15SURFMkxqRXhNaklnTWk0eU1qTXhPQ0F4Tnk0Mk5qUTNURFl1TURZMU1qTWdNVFF1TmpnMU1Wb2lJR1pwYkd3OUlpTkdRa0pETURVaVBqd3ZjR0YwYUQ0OGNHRjBhQ0JtYVd4c0xYSjFiR1U5SW1WMlpXNXZaR1FpSUdOc2FYQXRjblZzWlQwaVpYWmxibTlrWkNJZ1pEMGlUVEV5TGpRNU9UVWdOUzQxTnpNNE5rTXhOQzR4T0RjNUlEVXVOVGN6T0RZZ01UVXVOekF6T0NBMkxqRTFOREE1SURFMkxqZzVOVFlnTnk0eU9UTTJORXd5TUM0eE9UUWdNeTQ1T1RVeU0wTXhPQzR5TURJMElESXVNVE01TlRVZ01UVXVOVGs1TWlBeElERXlMalE1T1RVZ01VTTRMakF3TkRBeUlERWdOQzR4TVRRNU15QXpMalUzTnpBMUlESXVNakl5TmpZZ055NHpNelUwTlV3MkxqQTJORGNnTVRBdU16RTFRell1T1RZNU1ESWdOeTQxT1RZNE1pQTVMalV3TkRJMUlEVXVOVGN6T0RZZ01USXVORGs1TlNBMUxqVTNNemcyV2lJZ1ptbHNiRDBpSTBWQk5ETXpOU0krUEM5d1lYUm9Qand2YzNablBnPT1cIlxuKTtcblxuLy8gc3JjL0FwdG9zQ29ubmVjdFdhbGxldC50c1xuZnVuY3Rpb24gY3VzdG9tQWNjb3VudFRvU3RhbmRhcmRBY2NvdW50KHsgYWRkcmVzcywgbmFtZSwgcHVibGljS2V5IH0pIHtcbiAgcmV0dXJuIG5ldyBBY2NvdW50SW5mbzIoe1xuICAgIGFkZHJlc3MsXG4gICAgYW5zTmFtZTogbmFtZSxcbiAgICBwdWJsaWNLZXlcbiAgfSk7XG59XG52YXIgX0FwdG9zQ29ubmVjdFdhbGxldCA9IGNsYXNzIF9BcHRvc0Nvbm5lY3RXYWxsZXQge1xuICBjb25zdHJ1Y3Rvcih7IG5ldHdvcmsgPSBOZXR3b3JrLk1BSU5ORVQsIC4uLmNsaWVudENvbmZpZyB9KSB7XG4gICAgLy8gZW5kcmVnaW9uXG4gICAgLy8gcmVnaW9uIEFwdG9zV2FsbGV0XG4gICAgdGhpcy5uYW1lID0gd2FsbGV0TmFtZTtcbiAgICB0aGlzLnZlcnNpb24gPSBcIjEuMC4wXCI7XG4gICAgdGhpcy5pY29uID0gd2FsbGV0SWNvbjtcbiAgICB0aGlzLnVybCA9IHdhbGxldFVybDtcbiAgICB0aGlzLmNoYWlucyA9IEFQVE9TX0NIQUlOUzI7XG4gICAgdGhpcy5jbGllbnQgPSBuZXcgQUNEYXBwQ2xpZW50KGNsaWVudENvbmZpZyk7XG4gICAgaWYgKCFOZXR3b3JrVG9Ob2RlQVBJW25ldHdvcmtdKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOZXR3b3JrIG5vdCBzdXBwb3J0ZWRcIik7XG4gICAgfVxuICAgIGNvbnN0IGFwdG9zQ29uZmlnID0gbmV3IEFwdG9zQ29uZmlnKHsgbmV0d29yayB9KTtcbiAgICB0aGlzLmFwdG9zQ2xpZW50ID0gbmV3IEFwdG9zKGFwdG9zQ29uZmlnKTtcbiAgfVxuICBzdGF0aWMgZ2V0IGNvbm5lY3RlZEFjY291bnQoKSB7XG4gICAgY29uc3Qgc2VyaWFsaXplZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKF9BcHRvc0Nvbm5lY3RXYWxsZXQuY29ubmVjdGVkQWNjb3VudFN0b3JhZ2VLZXkpO1xuICAgIGlmICghc2VyaWFsaXplZCkge1xuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgYWRkcmVzcywgcHVibGljS2V5IH0gPSBKU09OLnBhcnNlKHNlcmlhbGl6ZWQpO1xuICAgICAgcmV0dXJuIHNlcmlhbGl6ZWQgPyBuZXcgQWNjb3VudEluZm8yKHtcbiAgICAgICAgYWRkcmVzczogQWNjb3VudEFkZHJlc3MyLmZyb20oYWRkcmVzcyksXG4gICAgICAgIHB1YmxpY0tleTogZGVzZXJpYWxpemVQdWJsaWNLZXlCNjQocHVibGljS2V5KVxuICAgICAgfSkgOiB2b2lkIDA7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gcGFyc2Ugc3RhdGUsIHJlc2V0dGluZyBpdFwiKTtcbiAgICAgIHRoaXMuY29ubmVjdGVkQWNjb3VudCA9IHZvaWQgMDtcbiAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICB9XG4gIHN0YXRpYyBzZXQgY29ubmVjdGVkQWNjb3VudCh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICBjb25zdCBzZXJpYWxpemVkID0ge1xuICAgICAgICBhZGRyZXNzOiB2YWx1ZS5hZGRyZXNzLnRvU3RyaW5nKCksXG4gICAgICAgIHB1YmxpY0tleTogc2VyaWFsaXplUHVibGljS2V5QjY0KHZhbHVlLnB1YmxpY0tleSlcbiAgICAgIH07XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShfQXB0b3NDb25uZWN0V2FsbGV0LmNvbm5lY3RlZEFjY291bnRTdG9yYWdlS2V5LCBKU09OLnN0cmluZ2lmeShzZXJpYWxpemVkKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKF9BcHRvc0Nvbm5lY3RXYWxsZXQuY29ubmVjdGVkQWNjb3VudFN0b3JhZ2VLZXkpO1xuICAgIH1cbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpc1xuICBnZXQgYWNjb3VudHMoKSB7XG4gICAgY29uc3QgeyBjb25uZWN0ZWRBY2NvdW50IH0gPSBfQXB0b3NDb25uZWN0V2FsbGV0O1xuICAgIHJldHVybiBjb25uZWN0ZWRBY2NvdW50ID8gW25ldyBBcHRvc0Nvbm5lY3RBY2NvdW50KGNvbm5lY3RlZEFjY291bnQpXSA6IFtdO1xuICB9XG4gIGdldCBmZWF0dXJlcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgW0FwdG9zQ29ubmVjdE5hbWVzcGFjZV06IHtcbiAgICAgICAgY29ubmVjdDogdGhpcy5jb25uZWN0LmJpbmQodGhpcyksXG4gICAgICAgIHZlcnNpb246IFwiMS4wLjBcIlxuICAgICAgfSxcbiAgICAgIFtBcHRvc0Rpc2Nvbm5lY3ROYW1lc3BhY2VdOiB7XG4gICAgICAgIGRpc2Nvbm5lY3Q6IHRoaXMuZGlzY29ubmVjdC5iaW5kKHRoaXMpLFxuICAgICAgICB2ZXJzaW9uOiBcIjEuMC4wXCJcbiAgICAgIH0sXG4gICAgICBbQXB0b3NHZXRBY2NvdW50TmFtZXNwYWNlXToge1xuICAgICAgICBhY2NvdW50OiB0aGlzLmdldEFjY291bnQuYmluZCh0aGlzKSxcbiAgICAgICAgdmVyc2lvbjogXCIxLjAuMFwiXG4gICAgICB9LFxuICAgICAgW0FwdG9zR2V0TmV0d29ya05hbWVzcGFjZV06IHtcbiAgICAgICAgbmV0d29yazogdGhpcy5nZXROZXR3b3JrLmJpbmQodGhpcyksXG4gICAgICAgIHZlcnNpb246IFwiMS4wLjBcIlxuICAgICAgfSxcbiAgICAgIFtBcHRvc09uQWNjb3VudENoYW5nZU5hbWVzcGFjZV06IHtcbiAgICAgICAgb25BY2NvdW50Q2hhbmdlOiB0aGlzLm9uQWNjb3VudENoYW5nZS5iaW5kKHRoaXMpLFxuICAgICAgICB2ZXJzaW9uOiBcIjEuMC4wXCJcbiAgICAgIH0sXG4gICAgICBbQXB0b3NPbk5ldHdvcmtDaGFuZ2VOYW1lc3BhY2VdOiB7XG4gICAgICAgIG9uTmV0d29ya0NoYW5nZTogdGhpcy5vbk5ldHdvcmtDaGFuZ2UuYmluZCh0aGlzKSxcbiAgICAgICAgdmVyc2lvbjogXCIxLjAuMFwiXG4gICAgICB9LFxuICAgICAgW0FwdG9zU2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uTmFtZXNwYWNlXToge1xuICAgICAgICBzaWduQW5kU3VibWl0VHJhbnNhY3Rpb246IHRoaXMuc2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uLmJpbmQodGhpcyksXG4gICAgICAgIHZlcnNpb246IFwiMS4xLjBcIlxuICAgICAgfSxcbiAgICAgIFtBcHRvc1NpZ25NZXNzYWdlTmFtZXNwYWNlXToge1xuICAgICAgICBzaWduTWVzc2FnZTogdGhpcy5zaWduTWVzc2FnZS5iaW5kKHRoaXMpLFxuICAgICAgICB2ZXJzaW9uOiBcIjEuMC4wXCJcbiAgICAgIH0sXG4gICAgICBbQXB0b3NTaWduVHJhbnNhY3Rpb25OYW1lc3BhY2VdOiB7XG4gICAgICAgIHNpZ25UcmFuc2FjdGlvbjogdGhpcy5zaWduVHJhbnNhY3Rpb24uYmluZCh0aGlzKSxcbiAgICAgICAgdmVyc2lvbjogXCIxLjAuMFwiXG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBhc3luYyBjb25uZWN0KCkge1xuICAgIGNvbnN0IHsgY29ubmVjdGVkQWNjb3VudCB9ID0gX0FwdG9zQ29ubmVjdFdhbGxldDtcbiAgICBpZiAoY29ubmVjdGVkQWNjb3VudCAhPT0gdm9pZCAwKSB7XG4gICAgICByZXR1cm4geyBhcmdzOiBjb25uZWN0ZWRBY2NvdW50LCBzdGF0dXM6IFVzZXJSZXNwb25zZVN0YXR1cy5BUFBST1ZFRCB9O1xuICAgIH1cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2xpZW50LmNvbm5lY3QoKTtcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSBcImRpc21pc3NlZFwiKSB7XG4gICAgICByZXR1cm4geyBzdGF0dXM6IFVzZXJSZXNwb25zZVN0YXR1cy5SRUpFQ1RFRCB9O1xuICAgIH1cbiAgICBjb25zdCBuZXdDb25uZWN0ZWRBY2NvdW50ID0gY3VzdG9tQWNjb3VudFRvU3RhbmRhcmRBY2NvdW50KHJlc3BvbnNlLmFyZ3MuYWNjb3VudCk7XG4gICAgX0FwdG9zQ29ubmVjdFdhbGxldC5jb25uZWN0ZWRBY2NvdW50ID0gbmV3Q29ubmVjdGVkQWNjb3VudDtcbiAgICByZXR1cm4ge1xuICAgICAgYXJnczogbmV3Q29ubmVjdGVkQWNjb3VudCxcbiAgICAgIHN0YXR1czogVXNlclJlc3BvbnNlU3RhdHVzLkFQUFJPVkVEXG4gICAgfTtcbiAgfVxuICBhc3luYyBkaXNjb25uZWN0KCkge1xuICAgIGNvbnN0IHsgY29ubmVjdGVkQWNjb3VudCB9ID0gX0FwdG9zQ29ubmVjdFdhbGxldDtcbiAgICBpZiAoY29ubmVjdGVkQWNjb3VudCkge1xuICAgICAgYXdhaXQgdGhpcy5jbGllbnQuZGlzY29ubmVjdChjb25uZWN0ZWRBY2NvdW50LmFkZHJlc3MpO1xuICAgICAgX0FwdG9zQ29ubmVjdFdhbGxldC5jb25uZWN0ZWRBY2NvdW50ID0gdm9pZCAwO1xuICAgIH1cbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpc1xuICBhc3luYyBnZXRBY2NvdW50KCkge1xuICAgIGNvbnN0IHsgY29ubmVjdGVkQWNjb3VudCB9ID0gX0FwdG9zQ29ubmVjdFdhbGxldDtcbiAgICBpZiAoIWNvbm5lY3RlZEFjY291bnQpIHtcbiAgICAgIHRocm93IG5ldyBBcHRvc1dhbGxldEVycm9yKEFwdG9zV2FsbGV0RXJyb3JDb2RlLlVuYXV0aG9yaXplZCk7XG4gICAgfVxuICAgIHJldHVybiBjdXN0b21BY2NvdW50VG9TdGFuZGFyZEFjY291bnQoY29ubmVjdGVkQWNjb3VudCk7XG4gIH1cbiAgYXN5bmMgZ2V0TmV0d29yaygpIHtcbiAgICBjb25zdCB7IG5ldHdvcmsgfSA9IHRoaXMuYXB0b3NDbGllbnQuY29uZmlnO1xuICAgIGNvbnN0IGNoYWluSWQgPSBhd2FpdCB0aGlzLmFwdG9zQ2xpZW50LmdldENoYWluSWQoKTtcbiAgICBjb25zdCB1cmwgPSBOZXR3b3JrVG9Ob2RlQVBJW25ldHdvcmtdO1xuICAgIHJldHVybiB7XG4gICAgICBjaGFpbklkLFxuICAgICAgbmFtZTogbmV0d29yayxcbiAgICAgIHVybFxuICAgIH07XG4gIH1cbiAgYXN5bmMgc2lnbk1lc3NhZ2UoaW5wdXQpIHtcbiAgICBjb25zdCB7IGNvbm5lY3RlZEFjY291bnQgfSA9IF9BcHRvc0Nvbm5lY3RXYWxsZXQ7XG4gICAgaWYgKCFjb25uZWN0ZWRBY2NvdW50KSB7XG4gICAgICB0aHJvdyBuZXcgQXB0b3NXYWxsZXRFcnJvcihBcHRvc1dhbGxldEVycm9yQ29kZS5VbmF1dGhvcml6ZWQpO1xuICAgIH1cbiAgICBjb25zdCB7IGNoYWluSWQgfSA9IGF3YWl0IHRoaXMuZ2V0TmV0d29yaygpO1xuICAgIGNvbnN0IHsgbWVzc2FnZSwgbm9uY2UgfSA9IGlucHV0O1xuICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbiAgICBjb25zdCBtZXNzYWdlQnl0ZXMgPSBlbmNvZGVyLmVuY29kZShtZXNzYWdlKTtcbiAgICBjb25zdCBub25jZUJ5dGVzID0gZW5jb2Rlci5lbmNvZGUobm9uY2UpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jbGllbnQuc2lnbk1lc3NhZ2Uoe1xuICAgICAgY2hhaW5JZCxcbiAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VCeXRlcyxcbiAgICAgIG5vbmNlOiBub25jZUJ5dGVzLFxuICAgICAgc2lnbmVyQWRkcmVzczogY29ubmVjdGVkQWNjb3VudC5hZGRyZXNzXG4gICAgfSk7XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gXCJkaXNtaXNzZWRcIikge1xuICAgICAgcmV0dXJuIHsgc3RhdHVzOiBVc2VyUmVzcG9uc2VTdGF0dXMuUkVKRUNURUQgfTtcbiAgICB9XG4gICAgY29uc3QgeyBmdWxsTWVzc2FnZSwgc2lnbmF0dXJlIH0gPSByZXNwb25zZS5hcmdzO1xuICAgIGNvbnN0IGV4dHJhUmVzcG9uc2VBcmdzID0ge1xuICAgICAgYWRkcmVzczogY29ubmVjdGVkQWNjb3VudC5hZGRyZXNzLnRvU3RyaW5nKCksXG4gICAgICBhcHBsaWNhdGlvbjogXCJcIixcbiAgICAgIGNoYWluSWQsXG4gICAgICBtZXNzYWdlLFxuICAgICAgbm9uY2UsXG4gICAgICBwcmVmaXg6IFwiQVBUT1NcIlxuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgZnVsbE1lc3NhZ2UsXG4gICAgICAgIHNpZ25hdHVyZSxcbiAgICAgICAgLi4uZXh0cmFSZXNwb25zZUFyZ3NcbiAgICAgIH0sXG4gICAgICBzdGF0dXM6IFVzZXJSZXNwb25zZVN0YXR1cy5BUFBST1ZFRFxuICAgIH07XG4gIH1cbiAgYXN5bmMgc2lnblRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uLCBfYXNGZWVQYXllcikge1xuICAgIGNvbnN0IHsgY29ubmVjdGVkQWNjb3VudCB9ID0gX0FwdG9zQ29ubmVjdFdhbGxldDtcbiAgICBpZiAoIWNvbm5lY3RlZEFjY291bnQpIHtcbiAgICAgIHRocm93IG5ldyBBcHRvc1dhbGxldEVycm9yKEFwdG9zV2FsbGV0RXJyb3JDb2RlLlVuYXV0aG9yaXplZCk7XG4gICAgfVxuICAgIGNvbnN0IGZlZVBheWVyID0gdHJhbnNhY3Rpb24uZmVlUGF5ZXJBZGRyZXNzID8geyBhZGRyZXNzOiB0cmFuc2FjdGlvbi5mZWVQYXllckFkZHJlc3MgfSA6IHZvaWQgMDtcbiAgICBjb25zdCBzZWNvbmRhcnlTaWduZXJzID0gdHJhbnNhY3Rpb24uc2Vjb25kYXJ5U2lnbmVyQWRkcmVzc2VzPy5tYXAoKGFkZHJlc3MpID0+ICh7IGFkZHJlc3MgfSkpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jbGllbnQuc2lnblRyYW5zYWN0aW9uKHtcbiAgICAgIGZlZVBheWVyLFxuICAgICAgc2Vjb25kYXJ5U2lnbmVycyxcbiAgICAgIHNpZ25lckFkZHJlc3M6IGNvbm5lY3RlZEFjY291bnQuYWRkcmVzcyxcbiAgICAgIHRyYW5zYWN0aW9uOiB0cmFuc2FjdGlvbi5yYXdUcmFuc2FjdGlvblxuICAgIH0pO1xuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IFwiZGlzbWlzc2VkXCIpIHtcbiAgICAgIHJldHVybiB7IHN0YXR1czogVXNlclJlc3BvbnNlU3RhdHVzLlJFSkVDVEVEIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBhcmdzOiByZXNwb25zZS5hcmdzLmF1dGhlbnRpY2F0b3IsXG4gICAgICBzdGF0dXM6IFVzZXJSZXNwb25zZVN0YXR1cy5BUFBST1ZFRFxuICAgIH07XG4gIH1cbiAgYXN5bmMgc2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uKGFyZ3MpIHtcbiAgICBjb25zdCB7IGdhc1VuaXRQcmljZSwgbWF4R2FzQW1vdW50LCBwYXlsb2FkIH0gPSBhcmdzO1xuICAgIGNvbnN0IHsgY29ubmVjdGVkQWNjb3VudCB9ID0gX0FwdG9zQ29ubmVjdFdhbGxldDtcbiAgICBpZiAoIWNvbm5lY3RlZEFjY291bnQpIHtcbiAgICAgIHRocm93IG5ldyBBcHRvc1dhbGxldEVycm9yKEFwdG9zV2FsbGV0RXJyb3JDb2RlLlVuYXV0aG9yaXplZCk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jbGllbnQuc2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uKHtcbiAgICAgIGdhc1VuaXRQcmljZSxcbiAgICAgIG1heEdhc0Ftb3VudCxcbiAgICAgIG5ldHdvcms6IHRoaXMuYXB0b3NDbGllbnQuY29uZmlnLm5ldHdvcmssXG4gICAgICBwYXlsb2FkLFxuICAgICAgc2lnbmVyQWRkcmVzczogY29ubmVjdGVkQWNjb3VudC5hZGRyZXNzXG4gICAgfSk7XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gXCJkaXNtaXNzZWRcIikge1xuICAgICAgcmV0dXJuIHsgc3RhdHVzOiBVc2VyUmVzcG9uc2VTdGF0dXMuUkVKRUNURUQgfTtcbiAgICB9XG4gICAgY29uc3QgdHhuUmVzcG9uc2UgPSBhd2FpdCB0aGlzLmFwdG9zQ2xpZW50LmdldFRyYW5zYWN0aW9uQnlIYXNoKHtcbiAgICAgIHRyYW5zYWN0aW9uSGFzaDogcmVzcG9uc2UuYXJncy50eG5IYXNoXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFyZ3M6IHR4blJlc3BvbnNlLFxuICAgICAgc3RhdHVzOiBVc2VyUmVzcG9uc2VTdGF0dXMuQVBQUk9WRURcbiAgICB9O1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzXG4gIGFzeW5jIG9uQWNjb3VudENoYW5nZShfY2FsbGJhY2spIHtcbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpc1xuICBhc3luYyBvbk5ldHdvcmtDaGFuZ2UoX2NhbGxiYWNrKSB7XG4gIH1cbiAgLy8gZW5kcmVnaW9uXG59O1xuLy8gcmVnaW9uIGNvbm5lY3RlZEFjY291bnRcbl9BcHRvc0Nvbm5lY3RXYWxsZXQuY29ubmVjdGVkQWNjb3VudFN0b3JhZ2VLZXkgPSBcIkBhcHRvcy1jb25uZWN0L2Nvbm5lY3RlZEFjY291bnRcIjtcbnZhciBBcHRvc0Nvbm5lY3RXYWxsZXQgPSBfQXB0b3NDb25uZWN0V2FsbGV0O1xuXG4vLyBzcmMvQXB0b3NDb25uZWN0V2FsbGV0UGx1Z2luLnRzXG5pbXBvcnQge1xuICBBY2NvdW50QWRkcmVzcyBhcyBBY2NvdW50QWRkcmVzczMsXG4gIEFjY291bnRBdXRoZW50aWNhdG9yRWQyNTUxOSxcbiAgQWNjb3VudEF1dGhlbnRpY2F0b3JTaW5nbGVLZXksXG4gIEFwdG9zIGFzIEFwdG9zMixcbiAgQXB0b3NDb25maWcgYXMgQXB0b3NDb25maWcyLFxuICBNdWx0aUVkMjU1MTlQdWJsaWNLZXkgYXMgTXVsdGlFZDI1NTE5UHVibGljS2V5MixcbiAgTXVsdGlLZXkgYXMgTXVsdGlLZXkyLFxuICBOZXR3b3JrIGFzIE5ldHdvcmsyLFxuICBOZXR3b3JrVG9Ob2RlQVBJIGFzIE5ldHdvcmtUb05vZGVBUEkyLFxuICBTaWduZWRUcmFuc2FjdGlvbixcbiAgVHJhbnNhY3Rpb25BdXRoZW50aWNhdG9yRWQyNTUxOSxcbiAgVHJhbnNhY3Rpb25BdXRoZW50aWNhdG9yU2luZ2xlU2VuZGVyLFxuICBUcmFuc2FjdGlvblBheWxvYWRcbn0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgQXB0b3NXYWxsZXRFcnJvciBhcyBBcHRvc1dhbGxldEVycm9yMiwgQXB0b3NXYWxsZXRFcnJvckNvZGUgYXMgQXB0b3NXYWxsZXRFcnJvckNvZGUyIH0gZnJvbSBcIkBhcHRvcy1sYWJzL3dhbGxldC1zdGFuZGFyZFwiO1xuaW1wb3J0IHsgQUNEYXBwQ2xpZW50IGFzIEFDRGFwcENsaWVudDIgfSBmcm9tIFwiQGlkZW50aXR5LWNvbm5lY3QvZGFwcC1zZGtcIjtcbmltcG9ydCB7IFR4bkJ1aWxkZXJUeXBlcyB9IGZyb20gXCJhcHRvc1wiO1xuXG4vLyBzcmMvY29udmVyc2lvbi50c1xuaW1wb3J0IHsgRGVzZXJpYWxpemVyIH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuaW1wb3J0IHsgQkNTIH0gZnJvbSBcImFwdG9zXCI7XG5mdW5jdGlvbiBjb252ZXJ0VjF0b1YyKHNyYywgZHN0KSB7XG4gIGNvbnN0IHNlcmlhbGl6ZWRCeXRlcyA9IEJDUy5iY3NUb0J5dGVzKHNyYyk7XG4gIGNvbnN0IGRlc2VyaWFsaXplclYyID0gbmV3IERlc2VyaWFsaXplcihzZXJpYWxpemVkQnl0ZXMpO1xuICByZXR1cm4gZHN0LmRlc2VyaWFsaXplKGRlc2VyaWFsaXplclYyKTtcbn1cbmZ1bmN0aW9uIGNvbnZlcnRQYXlsb2FkSW5wdXRGcm9tVjFUb1YyKGlucHV0VjEpIHtcbiAgaWYgKFwibXVsdGlzaWdfYWRkcmVzc1wiIGluIGlucHV0VjEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdWx0aXNpZyBwYXlsb2FkIG5vdCBzdXBwb3J0ZWRcIik7XG4gIH1cbiAgaWYgKFwiY29kZVwiIGluIGlucHV0VjEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTY3JpcHQgcGF5bG9hZCBub3Qgc3VwcG9ydGVkXCIpO1xuICB9XG4gIGlmIChcImZ1bmN0aW9uXCIgaW4gaW5wdXRWMSkge1xuICAgIHJldHVybiB7XG4gICAgICBmdW5jdGlvbjogaW5wdXRWMS5mdW5jdGlvbixcbiAgICAgIGZ1bmN0aW9uQXJndW1lbnRzOiBpbnB1dFYxLmFyZ3VtZW50cyxcbiAgICAgIHR5cGVBcmd1bWVudHM6IGlucHV0VjEudHlwZV9hcmd1bWVudHNcbiAgICB9O1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIHBheWxvYWQgdHlwZVwiKTtcbn1cblxuLy8gc3JjL0FwdG9zQ29ubmVjdFdhbGxldFBsdWdpbi50c1xuZnVuY3Rpb24gY3VzdG9tQWNjb3VudFRvU3RhbmRhcmRBY2NvdW50Mih7IGFkZHJlc3MsIG5hbWUsIHB1YmxpY0tleSB9KSB7XG4gIGlmIChwdWJsaWNLZXkgaW5zdGFuY2VvZiBNdWx0aUVkMjU1MTlQdWJsaWNLZXkyIHx8IHB1YmxpY0tleSBpbnN0YW5jZW9mIE11bHRpS2V5Mikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIHB1YmxpYyBrZXkgdHlwZVwiKTtcbiAgfVxuICByZXR1cm4ge1xuICAgIGFkZHJlc3M6IGFkZHJlc3MudG9TdHJpbmcoKSxcbiAgICBhbnNOYW1lOiBuYW1lLFxuICAgIHB1YmxpY0tleTogcHVibGljS2V5LnRvU3RyaW5nKClcbiAgfTtcbn1cbmZ1bmN0aW9uIGFjY291bnRBdXRoZW50aWNhdG9yVG9UcmFuc2FjdGlvbkF1dGhlbnRpY2F0b3IoYWNjb3VudEF1dGhlbnRpY2F0b3IpIHtcbiAgaWYgKGFjY291bnRBdXRoZW50aWNhdG9yIGluc3RhbmNlb2YgQWNjb3VudEF1dGhlbnRpY2F0b3JFZDI1NTE5KSB7XG4gICAgcmV0dXJuIG5ldyBUcmFuc2FjdGlvbkF1dGhlbnRpY2F0b3JFZDI1NTE5KGFjY291bnRBdXRoZW50aWNhdG9yLnB1YmxpY19rZXksIGFjY291bnRBdXRoZW50aWNhdG9yLnNpZ25hdHVyZSk7XG4gIH1cbiAgaWYgKGFjY291bnRBdXRoZW50aWNhdG9yIGluc3RhbmNlb2YgQWNjb3VudEF1dGhlbnRpY2F0b3JTaW5nbGVLZXkpIHtcbiAgICBpZiAoYWNjb3VudEF1dGhlbnRpY2F0b3IuaXNFZDI1NTE5KCkpIHtcbiAgICAgIHJldHVybiBuZXcgVHJhbnNhY3Rpb25BdXRoZW50aWNhdG9yRWQyNTUxOShcbiAgICAgICAgYWNjb3VudEF1dGhlbnRpY2F0b3IucHVibGljX2tleS5wdWJsaWNLZXksXG4gICAgICAgIGFjY291bnRBdXRoZW50aWNhdG9yLnNpZ25hdHVyZS5zaWduYXR1cmVcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgVHJhbnNhY3Rpb25BdXRoZW50aWNhdG9yU2luZ2xlU2VuZGVyKGFjY291bnRBdXRoZW50aWNhdG9yKTtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgY29udmVydCBhY2NvdW50IGF1dGhlbnRpY2F0b3IgdG8gYSBjb21wYXRpYmxlIHRyYW5zYWN0aW9uIGF1dGhlbnRpY2F0b3JcIik7XG59XG5mdW5jdGlvbiB1bndyYXBVc2VyUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gXCJkaXNtaXNzZWRcIikge1xuICAgIHRocm93IG5ldyBBcHRvc1dhbGxldEVycm9yMigwLCBcIlJlamVjdGVkXCIpO1xuICB9XG4gIHJldHVybiByZXNwb25zZS5hcmdzO1xufVxudmFyIF9BcHRvc0Nvbm5lY3RXYWxsZXRQbHVnaW4gPSBjbGFzcyBfQXB0b3NDb25uZWN0V2FsbGV0UGx1Z2luIHtcbiAgY29uc3RydWN0b3IoeyBuZXR3b3JrID0gTmV0d29yazIuTUFJTk5FVCwgLi4uY2xpZW50Q29uZmlnIH0pIHtcbiAgICAvLyBIYWNrIHRvIG1ha2UgdGhpcyBhbHdheXMgYXZhaWxhYmxlXG4gICAgdGhpcy5wcm92aWRlck5hbWUgPSBcIm9wZW5cIjtcbiAgICB0aGlzLnZlcnNpb24gPSBcInYyXCI7XG4gICAgdGhpcy5uYW1lID0gd2FsbGV0TmFtZTtcbiAgICB0aGlzLnVybCA9IHdhbGxldFVybDtcbiAgICB0aGlzLmljb24gPSB3YWxsZXRJY29uO1xuICAgIHRoaXMuY2xpZW50ID0gbmV3IEFDRGFwcENsaWVudDIoY2xpZW50Q29uZmlnKTtcbiAgICBpZiAoIU5ldHdvcmtUb05vZGVBUEkyW25ldHdvcmtdKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOZXR3b3JrIG5vdCBzdXBwb3J0ZWRcIik7XG4gICAgfVxuICAgIGNvbnN0IGFwdG9zQ29uZmlnID0gbmV3IEFwdG9zQ29uZmlnMih7IG5ldHdvcmsgfSk7XG4gICAgdGhpcy5hcHRvc0NsaWVudCA9IG5ldyBBcHRvczIoYXB0b3NDb25maWcpO1xuICB9XG4gIHN0YXRpYyBnZXQgY29ubmVjdGVkQWNjb3VudCgpIHtcbiAgICBjb25zdCB2YWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKF9BcHRvc0Nvbm5lY3RXYWxsZXRQbHVnaW4uY29ubmVjdGVkQWNjb3VudFN0b3JhZ2VLZXkpO1xuICAgIHJldHVybiB2YWx1ZSA/IEpTT04ucGFyc2UodmFsdWUpIDogdm9pZCAwO1xuICB9XG4gIHN0YXRpYyBzZXQgY29ubmVjdGVkQWNjb3VudCh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShfQXB0b3NDb25uZWN0V2FsbGV0UGx1Z2luLmNvbm5lY3RlZEFjY291bnRTdG9yYWdlS2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShfQXB0b3NDb25uZWN0V2FsbGV0UGx1Z2luLmNvbm5lY3RlZEFjY291bnRTdG9yYWdlS2V5KTtcbiAgICB9XG4gIH1cbiAgLy8gZW5kcmVnaW9uXG4gIGFzeW5jIGNvbm5lY3QoKSB7XG4gICAgY29uc3QgeyBjb25uZWN0ZWRBY2NvdW50IH0gPSBfQXB0b3NDb25uZWN0V2FsbGV0UGx1Z2luO1xuICAgIGlmIChjb25uZWN0ZWRBY2NvdW50ICE9PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiBjb25uZWN0ZWRBY2NvdW50O1xuICAgIH1cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2xpZW50LmNvbm5lY3QoKTtcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSBcImRpc21pc3NlZFwiKSB7XG4gICAgICB0aHJvdyBuZXcgQXB0b3NXYWxsZXRFcnJvcjIoQXB0b3NXYWxsZXRFcnJvckNvZGUyLlVuYXV0aG9yaXplZCk7XG4gICAgfVxuICAgIGNvbnN0IG5ld0Nvbm5lY3RlZEFjY291bnQgPSBjdXN0b21BY2NvdW50VG9TdGFuZGFyZEFjY291bnQyKHJlc3BvbnNlLmFyZ3MuYWNjb3VudCk7XG4gICAgX0FwdG9zQ29ubmVjdFdhbGxldFBsdWdpbi5jb25uZWN0ZWRBY2NvdW50ID0gbmV3Q29ubmVjdGVkQWNjb3VudDtcbiAgICByZXR1cm4gbmV3Q29ubmVjdGVkQWNjb3VudDtcbiAgfVxuICBhc3luYyBhY2NvdW50KCkge1xuICAgIGNvbnN0IFtmaXJzdEFjY291bnRdID0gYXdhaXQgdGhpcy5jbGllbnQuZ2V0Q29ubmVjdGVkQWNjb3VudHMoKTtcbiAgICBpZiAoZmlyc3RBY2NvdW50ID09PSB2b2lkIDApIHtcbiAgICAgIHRocm93IG5ldyBBcHRvc1dhbGxldEVycm9yMihBcHRvc1dhbGxldEVycm9yQ29kZTIuVW5hdXRob3JpemVkKTtcbiAgICB9XG4gICAgcmV0dXJuIGN1c3RvbUFjY291bnRUb1N0YW5kYXJkQWNjb3VudDIoZmlyc3RBY2NvdW50KTtcbiAgfVxuICBhc3luYyBkaXNjb25uZWN0KCkge1xuICAgIGNvbnN0IHsgY29ubmVjdGVkQWNjb3VudCB9ID0gX0FwdG9zQ29ubmVjdFdhbGxldFBsdWdpbjtcbiAgICBpZiAoY29ubmVjdGVkQWNjb3VudCkge1xuICAgICAgYXdhaXQgdGhpcy5jbGllbnQuZGlzY29ubmVjdChjb25uZWN0ZWRBY2NvdW50LmFkZHJlc3MpO1xuICAgICAgX0FwdG9zQ29ubmVjdFdhbGxldFBsdWdpbi5jb25uZWN0ZWRBY2NvdW50ID0gdm9pZCAwO1xuICAgIH1cbiAgfVxuICBhc3luYyBzaWduQW5kU3VibWl0VHJhbnNhY3Rpb24ocGF5bG9hZFYxSW5wdXRPckdlbmVyYXRlVHhuSW5wdXQsIG9wdGlvbnNWMSkge1xuICAgIGNvbnN0IHsgY29ubmVjdGVkQWNjb3VudCB9ID0gX0FwdG9zQ29ubmVjdFdhbGxldFBsdWdpbjtcbiAgICBpZiAoIWNvbm5lY3RlZEFjY291bnQpIHtcbiAgICAgIHRocm93IG5ldyBBcHRvc1dhbGxldEVycm9yMihBcHRvc1dhbGxldEVycm9yQ29kZTIuVW5hdXRob3JpemVkKTtcbiAgICB9XG4gICAgbGV0IHBheWxvYWQ7XG4gICAgbGV0IG9wdGlvbnM7XG4gICAgaWYgKFwiZGF0YVwiIGluIHBheWxvYWRWMUlucHV0T3JHZW5lcmF0ZVR4bklucHV0KSB7XG4gICAgICBjb25zdCB7IGRhdGE6IHBheWxvYWRWMklucHV0LCBvcHRpb25zOiBvcHRpb25zVjIgfSA9IHBheWxvYWRWMUlucHV0T3JHZW5lcmF0ZVR4bklucHV0O1xuICAgICAgcGF5bG9hZCA9IHBheWxvYWRWMklucHV0O1xuICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgZXhwaXJhdGlvblRpbWVzdGFtcDogb3B0aW9uc1YyPy5leHBpcmVUaW1lc3RhbXAsXG4gICAgICAgIGdhc1VuaXRQcmljZTogb3B0aW9uc1YyPy5nYXNVbml0UHJpY2UsXG4gICAgICAgIG1heEdhc0Ftb3VudDogb3B0aW9uc1YyPy5tYXhHYXNBbW91bnQsXG4gICAgICAgIG5ldHdvcms6IHRoaXMuYXB0b3NDbGllbnQuY29uZmlnLm5ldHdvcmtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHBheWxvYWQgPSBjb252ZXJ0UGF5bG9hZElucHV0RnJvbVYxVG9WMihwYXlsb2FkVjFJbnB1dE9yR2VuZXJhdGVUeG5JbnB1dCk7XG4gICAgICBvcHRpb25zID0ge1xuICAgICAgICBleHBpcmF0aW9uVGltZXN0YW1wOiBvcHRpb25zVjE/LmV4cGlyYXRpb25UaW1lc3RhbXAsXG4gICAgICAgIGdhc1VuaXRQcmljZTogb3B0aW9uc1YxPy5nYXNVbml0UHJpY2UgPz8gb3B0aW9uc1YxPy5nYXNfdW5pdF9wcmljZSxcbiAgICAgICAgbWF4R2FzQW1vdW50OiBvcHRpb25zVjE/Lm1heEdhc0Ftb3VudCA/PyBvcHRpb25zVjE/Lm1heF9nYXNfYW1vdW50LFxuICAgICAgICBuZXR3b3JrOiB0aGlzLmFwdG9zQ2xpZW50LmNvbmZpZy5uZXR3b3JrXG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2xpZW50LnNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvbih7XG4gICAgICBzaWduZXJBZGRyZXNzOiBBY2NvdW50QWRkcmVzczMuZnJvbShjb25uZWN0ZWRBY2NvdW50LmFkZHJlc3MpLFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIHBheWxvYWRcbiAgICB9KTtcbiAgICBjb25zdCB7IHR4bkhhc2ggfSA9IHVud3JhcFVzZXJSZXNwb25zZShyZXNwb25zZSk7XG4gICAgcmV0dXJuIHsgaGFzaDogdHhuSGFzaCB9O1xuICB9XG4gIGFzeW5jIHNpZ25BbmRTdWJtaXRCQ1NUcmFuc2FjdGlvbihwYXlsb2FkVjEsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGNvbm5lY3RlZEFjY291bnQgfSA9IF9BcHRvc0Nvbm5lY3RXYWxsZXRQbHVnaW47XG4gICAgaWYgKCFjb25uZWN0ZWRBY2NvdW50KSB7XG4gICAgICB0aHJvdyBuZXcgQXB0b3NXYWxsZXRFcnJvcjIoQXB0b3NXYWxsZXRFcnJvckNvZGUyLlVuYXV0aG9yaXplZCk7XG4gICAgfVxuICAgIGNvbnN0IHBheWxvYWQgPSBjb252ZXJ0VjF0b1YyKHBheWxvYWRWMSwgVHJhbnNhY3Rpb25QYXlsb2FkKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2xpZW50LnNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvbih7XG4gICAgICBleHBpcmF0aW9uVGltZXN0YW1wOiBvcHRpb25zPy5leHBpcmF0aW9uVGltZXN0YW1wLFxuICAgICAgZ2FzVW5pdFByaWNlOiBvcHRpb25zPy5nYXNVbml0UHJpY2UgPz8gb3B0aW9ucz8uZ2FzX3VuaXRfcHJpY2UsXG4gICAgICBtYXhHYXNBbW91bnQ6IG9wdGlvbnM/Lm1heEdhc0Ftb3VudCA/PyBvcHRpb25zPy5tYXhfZ2FzX2Ftb3VudCxcbiAgICAgIG5ldHdvcms6IHRoaXMuYXB0b3NDbGllbnQuY29uZmlnLm5ldHdvcmssXG4gICAgICBwYXlsb2FkLFxuICAgICAgc2lnbmVyQWRkcmVzczogQWNjb3VudEFkZHJlc3MzLmZyb20oY29ubmVjdGVkQWNjb3VudC5hZGRyZXNzKVxuICAgIH0pO1xuICAgIGNvbnN0IHsgdHhuSGFzaCB9ID0gdW53cmFwVXNlclJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICByZXR1cm4geyBoYXNoOiB0eG5IYXNoIH07XG4gIH1cbiAgYXN5bmMgc2lnbk1lc3NhZ2UoYXJncykge1xuICAgIGNvbnN0IHsgY29ubmVjdGVkQWNjb3VudCB9ID0gX0FwdG9zQ29ubmVjdFdhbGxldFBsdWdpbjtcbiAgICBpZiAoIWNvbm5lY3RlZEFjY291bnQpIHtcbiAgICAgIHRocm93IG5ldyBBcHRvc1dhbGxldEVycm9yMihBcHRvc1dhbGxldEVycm9yQ29kZTIuVW5hdXRob3JpemVkKTtcbiAgICB9XG4gICAgY29uc3QgY2hhaW5JZCA9IGF3YWl0IHRoaXMuYXB0b3NDbGllbnQuZ2V0Q2hhaW5JZCgpO1xuICAgIGNvbnN0IHsgbWVzc2FnZSwgbm9uY2UgfSA9IGFyZ3M7XG4gICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgIGNvbnN0IG1lc3NhZ2VCeXRlcyA9IGVuY29kZXIuZW5jb2RlKG1lc3NhZ2UpO1xuICAgIGNvbnN0IG5vbmNlQnl0ZXMgPSBlbmNvZGVyLmVuY29kZShub25jZSk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNsaWVudC5zaWduTWVzc2FnZSh7XG4gICAgICBjaGFpbklkLFxuICAgICAgbWVzc2FnZTogbWVzc2FnZUJ5dGVzLFxuICAgICAgbm9uY2U6IG5vbmNlQnl0ZXMsXG4gICAgICBzaWduZXJBZGRyZXNzOiBBY2NvdW50QWRkcmVzczMuZnJvbShjb25uZWN0ZWRBY2NvdW50LmFkZHJlc3MpXG4gICAgfSk7XG4gICAgY29uc3QgeyBmdWxsTWVzc2FnZSwgc2lnbmF0dXJlIH0gPSB1bndyYXBVc2VyUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgIGNvbnN0IGV4dHJhUmVzcG9uc2VBcmdzID0ge1xuICAgICAgYWRkcmVzczogY29ubmVjdGVkQWNjb3VudC5hZGRyZXNzLnRvU3RyaW5nKCksXG4gICAgICBhcHBsaWNhdGlvbjogdGhpcy5jbGllbnQuZGFwcEluZm8uZG9tYWluLFxuICAgICAgY2hhaW5JZCxcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBub25jZSxcbiAgICAgIHByZWZpeDogXCJBUFRPU1wiXG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgZnVsbE1lc3NhZ2UsXG4gICAgICBzaWduYXR1cmU6IHNpZ25hdHVyZS50b1N0cmluZygpLFxuICAgICAgLi4uZXh0cmFSZXNwb25zZUFyZ3NcbiAgICB9O1xuICB9XG4gIGFzeW5jIHNpZ25UcmFuc2FjdGlvbih0cmFuc2FjdGlvbk9yUGF5bG9hZCwgb3B0aW9uc09yQXNGZWVQYXllcikge1xuICAgIGNvbnN0IHsgY29ubmVjdGVkQWNjb3VudCB9ID0gX0FwdG9zQ29ubmVjdFdhbGxldFBsdWdpbjtcbiAgICBpZiAoIWNvbm5lY3RlZEFjY291bnQpIHtcbiAgICAgIHRocm93IG5ldyBBcHRvc1dhbGxldEVycm9yMihBcHRvc1dhbGxldEVycm9yQ29kZTIuVW5hdXRob3JpemVkKTtcbiAgICB9XG4gICAgaWYgKFwicmF3VHJhbnNhY3Rpb25cIiBpbiB0cmFuc2FjdGlvbk9yUGF5bG9hZCkge1xuICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSB0cmFuc2FjdGlvbk9yUGF5bG9hZDtcbiAgICAgIGNvbnN0IGZlZVBheWVyID0gdHJhbnNhY3Rpb24uZmVlUGF5ZXJBZGRyZXNzID8geyBhZGRyZXNzOiB0cmFuc2FjdGlvbi5mZWVQYXllckFkZHJlc3MgfSA6IHZvaWQgMDtcbiAgICAgIGNvbnN0IHNlY29uZGFyeVNpZ25lcnMgPSB0cmFuc2FjdGlvbi5zZWNvbmRhcnlTaWduZXJBZGRyZXNzZXM/Lm1hcCgoYWRkcmVzcykgPT4gKHsgYWRkcmVzcyB9KSk7XG4gICAgICBjb25zdCByZXNwb25zZTIgPSBhd2FpdCB0aGlzLmNsaWVudC5zaWduVHJhbnNhY3Rpb24oe1xuICAgICAgICBmZWVQYXllcixcbiAgICAgICAgc2Vjb25kYXJ5U2lnbmVycyxcbiAgICAgICAgc2lnbmVyQWRkcmVzczogQWNjb3VudEFkZHJlc3MzLmZyb20oY29ubmVjdGVkQWNjb3VudC5hZGRyZXNzKSxcbiAgICAgICAgdHJhbnNhY3Rpb246IHRyYW5zYWN0aW9uLnJhd1RyYW5zYWN0aW9uXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHsgYXV0aGVudGljYXRvcjogYXV0aGVudGljYXRvcjIgfSA9IHVud3JhcFVzZXJSZXNwb25zZShyZXNwb25zZTIpO1xuICAgICAgcmV0dXJuIGF1dGhlbnRpY2F0b3IyO1xuICAgIH1cbiAgICBpZiAoISh0cmFuc2FjdGlvbk9yUGF5bG9hZCBpbnN0YW5jZW9mIFR4bkJ1aWxkZXJUeXBlcy5UcmFuc2FjdGlvblBheWxvYWQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3Qgc3VwcG9ydGVkXCIpO1xuICAgIH1cbiAgICBjb25zdCBwYXlsb2FkID0gY29udmVydFYxdG9WMih0cmFuc2FjdGlvbk9yUGF5bG9hZCwgVHJhbnNhY3Rpb25QYXlsb2FkKTtcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uc09yQXNGZWVQYXllcjtcbiAgICBjb25zdCBzZW5kZXIgPSBvcHRpb25zPy5zZW5kZXIgPyB7XG4gICAgICBhZGRyZXNzOiBBY2NvdW50QWRkcmVzczMuZnJvbShvcHRpb25zLnNlbmRlcilcbiAgICB9IDogdm9pZCAwO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jbGllbnQuc2lnblRyYW5zYWN0aW9uKHtcbiAgICAgIGV4cGlyYXRpb25TZWNvbmRzRnJvbU5vdzogb3B0aW9ucz8uZXhwaXJhdGlvblNlY29uZHNGcm9tTm93LFxuICAgICAgZXhwaXJhdGlvblRpbWVzdGFtcDogb3B0aW9ucz8uZXhwaXJhdGlvblRpbWVzdGFtcCxcbiAgICAgIGdhc1VuaXRQcmljZTogb3B0aW9ucz8uZ2FzVW5pdFByaWNlID8/IG9wdGlvbnM/Lmdhc191bml0X3ByaWNlLFxuICAgICAgbWF4R2FzQW1vdW50OiBvcHRpb25zPy5tYXhHYXNBbW91bnQgPz8gb3B0aW9ucz8ubWF4X2dhc19hbW91bnQsXG4gICAgICBuZXR3b3JrOiB0aGlzLmFwdG9zQ2xpZW50LmNvbmZpZy5uZXR3b3JrLFxuICAgICAgcGF5bG9hZCxcbiAgICAgIHNlbmRlcixcbiAgICAgIHNlcXVlbmNlTnVtYmVyOiBvcHRpb25zPy5zZXF1ZW5jZU51bWJlcixcbiAgICAgIHNpZ25lckFkZHJlc3M6IEFjY291bnRBZGRyZXNzMy5mcm9tKGNvbm5lY3RlZEFjY291bnQuYWRkcmVzcylcbiAgICB9KTtcbiAgICBjb25zdCB7IGF1dGhlbnRpY2F0b3IsIHJhd1RyYW5zYWN0aW9uIH0gPSB1bndyYXBVc2VyUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgIGlmIChyYXdUcmFuc2FjdGlvbiA9PT0gdm9pZCAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgd2FsbGV0IGRpZCBub3QgcmV0dXJuIGEgcmF3IHRyYW5zYWN0aW9uXCIpO1xuICAgIH1cbiAgICBjb25zdCB0eG5BdXRoZW50aWNhdG9yID0gYWNjb3VudEF1dGhlbnRpY2F0b3JUb1RyYW5zYWN0aW9uQXV0aGVudGljYXRvcihhdXRoZW50aWNhdG9yKTtcbiAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbiA9IG5ldyBTaWduZWRUcmFuc2FjdGlvbihyYXdUcmFuc2FjdGlvbiwgdHhuQXV0aGVudGljYXRvcik7XG4gICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uLmJjc1RvQnl0ZXMoKTtcbiAgfVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2xhc3MtbWV0aG9kcy11c2UtdGhpc1xuICBhc3luYyBvbk5ldHdvcmtDaGFuZ2UoX2NhbGxiYWNrKSB7XG4gIH1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcbiAgYXN5bmMgb25BY2NvdW50Q2hhbmdlKF9jYWxsYmFjaykge1xuICB9XG4gIGFzeW5jIG5ldHdvcmsoKSB7XG4gICAgY29uc3QgeyBuZXR3b3JrIH0gPSB0aGlzLmFwdG9zQ2xpZW50LmNvbmZpZztcbiAgICBjb25zdCBjaGFpbklkID0gYXdhaXQgdGhpcy5hcHRvc0NsaWVudC5nZXRDaGFpbklkKCk7XG4gICAgY29uc3QgdXJsID0gTmV0d29ya1RvTm9kZUFQSTJbbmV0d29ya107XG4gICAgcmV0dXJuIHtcbiAgICAgIGNoYWluSWQ6IGNoYWluSWQudG9TdHJpbmcoKSxcbiAgICAgIG5hbWU6IG5ldHdvcmssXG4gICAgICB1cmxcbiAgICB9O1xuICB9XG59O1xuLy8gcmVnaW9uIGNvbm5lY3RlZEFjY291bnRcbl9BcHRvc0Nvbm5lY3RXYWxsZXRQbHVnaW4uY29ubmVjdGVkQWNjb3VudFN0b3JhZ2VLZXkgPSBcIkFwdG9zQ29ubmVjdFdhbGxldFBsdWdpbi5jb25uZWN0ZWRBY2NvdW50XCI7XG52YXIgQXB0b3NDb25uZWN0V2FsbGV0UGx1Z2luID0gX0FwdG9zQ29ubmVjdFdhbGxldFBsdWdpbjtcblxuLy8gc3JjL2luZGV4LnRzXG5mdW5jdGlvbiByZWdpc3RlckFwdG9zQ29ubmVjdChjb25maWcgPSB7fSkge1xuICBjb25zdCB3YWxsZXRQbHVnaW4gPSBuZXcgQXB0b3NDb25uZWN0V2FsbGV0KGNvbmZpZyk7XG4gIHJlZ2lzdGVyV2FsbGV0KHdhbGxldFBsdWdpbik7XG59XG5leHBvcnQge1xuICBBcHRvc0Nvbm5lY3RBY2NvdW50LFxuICBBcHRvc0Nvbm5lY3RXYWxsZXQsXG4gIEFwdG9zQ29ubmVjdFdhbGxldFBsdWdpbixcbiAgcmVnaXN0ZXJBcHRvc0Nvbm5lY3Rcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../../../../node_modules/@aptos-connect/wallet-adapter-plugin/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/../../../../node_modules/@aptos-connect/wallet-api/dist/index.mjs":
/*!*************************************************************************!*\
  !*** ../../../../node_modules/@aptos-connect/wallet-api/dist/index.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AptosWalletErrorResponseMessage: () => (/* binding */ AptosWalletErrorResponseMessage),\n/* harmony export */   AptosWalletRequestMessage: () => (/* binding */ AptosWalletRequestMessage),\n/* harmony export */   AptosWalletSuccessResponseMessage: () => (/* binding */ AptosWalletSuccessResponseMessage),\n/* harmony export */   ConnectRequest: () => (/* binding */ ConnectRequest),\n/* harmony export */   ConnectResponse: () => (/* binding */ ConnectResponse),\n/* harmony export */   DisconnectRequest: () => (/* binding */ DisconnectRequest),\n/* harmony export */   DisconnectResponse: () => (/* binding */ DisconnectResponse),\n/* harmony export */   EntryFunctionArgumentVariant: () => (/* binding */ EntryFunctionArgumentVariant),\n/* harmony export */   GetConnectedAccountsRequest: () => (/* binding */ GetConnectedAccountsRequest),\n/* harmony export */   GetConnectedAccountsResponse: () => (/* binding */ GetConnectedAccountsResponse),\n/* harmony export */   IsConnectedRequest: () => (/* binding */ IsConnectedRequest),\n/* harmony export */   IsConnectedResponse: () => (/* binding */ IsConnectedResponse),\n/* harmony export */   PromptApprovalResponseMessage: () => (/* binding */ PromptApprovalResponseMessage),\n/* harmony export */   PromptOpenerPingRequestMessage: () => (/* binding */ PromptOpenerPingRequestMessage),\n/* harmony export */   PromptOpenerPingResponseMessage: () => (/* binding */ PromptOpenerPingResponseMessage),\n/* harmony export */   PromptUnauthorizedErrorMessage: () => (/* binding */ PromptUnauthorizedErrorMessage),\n/* harmony export */   SignAndSubmitTransactionRequest: () => (/* binding */ SignAndSubmitTransactionRequest),\n/* harmony export */   SignAndSubmitTransactionResponse: () => (/* binding */ SignAndSubmitTransactionResponse),\n/* harmony export */   SignMessageRequest: () => (/* binding */ SignMessageRequest),\n/* harmony export */   SignMessageResponse: () => (/* binding */ SignMessageResponse),\n/* harmony export */   SignTransactionRequest: () => (/* binding */ SignTransactionRequest),\n/* harmony export */   SignTransactionResponse: () => (/* binding */ SignTransactionResponse),\n/* harmony export */   TransactionPayloadInputVariant: () => (/* binding */ TransactionPayloadInputVariant),\n/* harmony export */   base64ToBytes: () => (/* binding */ base64ToBytes),\n/* harmony export */   bytesToBase64: () => (/* binding */ bytesToBase64),\n/* harmony export */   chainIdToNetwork: () => (/* binding */ chainIdToNetwork),\n/* harmony export */   deserializeAccountAuthenticatorInput: () => (/* binding */ deserializeAccountAuthenticatorInput),\n/* harmony export */   deserializeAccountInfo: () => (/* binding */ deserializeAccountInfo),\n/* harmony export */   deserializeAccountInput: () => (/* binding */ deserializeAccountInput),\n/* harmony export */   deserializeDappInfo: () => (/* binding */ deserializeDappInfo),\n/* harmony export */   deserializeEntryFunctionArgument: () => (/* binding */ deserializeEntryFunctionArgument),\n/* harmony export */   deserializePublicKey: () => (/* binding */ deserializePublicKey),\n/* harmony export */   deserializeSignature: () => (/* binding */ deserializeSignature),\n/* harmony export */   deserializeTransactionPayloadInput: () => (/* binding */ deserializeTransactionPayloadInput),\n/* harmony export */   deserializeWalletRequest: () => (/* binding */ deserializeWalletRequest),\n/* harmony export */   deserializeWalletRequestWithArgs: () => (/* binding */ deserializeWalletRequestWithArgs),\n/* harmony export */   deserializeWalletResponse: () => (/* binding */ deserializeWalletResponse),\n/* harmony export */   isAptosWalletResponseMessage: () => (/* binding */ isAptosWalletResponseMessage),\n/* harmony export */   isSupportedNetwork: () => (/* binding */ isSupportedNetwork),\n/* harmony export */   isTypedMessage: () => (/* binding */ isTypedMessage),\n/* harmony export */   makeUserApproval: () => (/* binding */ makeUserApproval),\n/* harmony export */   makeUserResponseDeserializeFn: () => (/* binding */ makeUserResponseDeserializeFn),\n/* harmony export */   makeUserResponseSerializeFn: () => (/* binding */ makeUserResponseSerializeFn),\n/* harmony export */   serializeAccountAuthenticatorInput: () => (/* binding */ serializeAccountAuthenticatorInput),\n/* harmony export */   serializeAccountInfo: () => (/* binding */ serializeAccountInfo),\n/* harmony export */   serializeAccountInput: () => (/* binding */ serializeAccountInput),\n/* harmony export */   serializeDappInfo: () => (/* binding */ serializeDappInfo),\n/* harmony export */   serializeEntryFunctionArgument: () => (/* binding */ serializeEntryFunctionArgument),\n/* harmony export */   serializePublicKey: () => (/* binding */ serializePublicKey),\n/* harmony export */   serializeSignature: () => (/* binding */ serializeSignature),\n/* harmony export */   serializeTransactionPayloadInput: () => (/* binding */ serializeTransactionPayloadInput),\n/* harmony export */   serializeWalletRequest: () => (/* binding */ serializeWalletRequest),\n/* harmony export */   serializeWalletRequestWithArgs: () => (/* binding */ serializeWalletRequestWithArgs),\n/* harmony export */   serializeWalletResponse: () => (/* binding */ serializeWalletResponse),\n/* harmony export */   urlDecodeWalletRequest: () => (/* binding */ urlDecodeWalletRequest),\n/* harmony export */   urlEncodeWalletRequest: () => (/* binding */ urlEncodeWalletRequest)\n/* harmony export */ });\n/* harmony import */ var _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aptos-labs/ts-sdk */ \"(ssr)/../../../../node_modules/@aptos-labs/ts-sdk/dist/esm/index.mjs\");\n// src/base64.ts\nfunction base64ToBytes(base64) {\n  const binaryString = atob(base64);\n  return Uint8Array.from(binaryString, (m) => m.charCodeAt(0));\n}\nfunction bytesToBase64(bytes) {\n  const binaryString = String.fromCharCode(...bytes);\n  return btoa(binaryString);\n}\n\n// src/helpers.ts\n\nfunction chainIdToNetwork(chainId) {\n  switch (chainId) {\n    case _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.NetworkToChainId.mainnet:\n      return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Network.MAINNET;\n    case _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.NetworkToChainId.testnet:\n      return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Network.TESTNET;\n    default:\n      return _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Network.DEVNET;\n  }\n}\nfunction isSupportedNetwork(network) {\n  return [_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Network.MAINNET, _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Network.TESTNET, _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Network.DEVNET].includes(network);\n}\n\n// src/WalletRequest.ts\n\n\n// src/shared/AccountAuthenticatorInput.ts\n\nfunction serializeAccountAuthenticatorInput(serializer, value) {\n  serializer.serialize(value.address);\n  serializer.serialize(value.authenticator);\n}\nfunction deserializeAccountAuthenticatorInput(deserializer) {\n  const address = deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress);\n  const authenticator = deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAuthenticator);\n  return { address, authenticator };\n}\n\n// src/shared/AccountInfo.ts\n\n\n// src/shared/PublicKey.ts\n\nfunction serializePublicKey(serializer, value) {\n  if (value instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Ed25519PublicKey) {\n    serializer.serializeU32AsUleb128(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.Ed25519);\n  } else if (value instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.MultiEd25519PublicKey) {\n    serializer.serializeU32AsUleb128(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.MultiEd25519);\n  } else if (value instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AnyPublicKey) {\n    serializer.serializeU32AsUleb128(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.SingleKey);\n  } else if (value instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.MultiKey) {\n    serializer.serializeU32AsUleb128(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.MultiKey);\n  } else {\n    throw new Error(\"Unexpected public key type\");\n  }\n  serializer.serialize(value);\n}\nfunction deserializePublicKey(deserializer) {\n  const signingScheme = deserializer.deserializeUleb128AsU32();\n  switch (signingScheme) {\n    case _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.Ed25519:\n      return deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Ed25519PublicKey);\n    case _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.MultiEd25519:\n      return deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.MultiEd25519PublicKey);\n    case _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.SingleKey:\n      return deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AnyPublicKey);\n    case _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.MultiKey:\n      return deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.MultiKey);\n    default:\n      throw new Error(`Unknown signing scheme: ${signingScheme}`);\n  }\n}\n\n// src/shared/AccountInfo.ts\nfunction serializeAccountInfo(serializer, value) {\n  serializer.serialize(value.address);\n  serializePublicKey(serializer, value.publicKey);\n  serializer.serializeStr(value.name ?? \"\");\n}\nfunction deserializeAccountInfo(deserializer) {\n  const address = deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress);\n  const publicKey = deserializePublicKey(deserializer);\n  const name = deserializer.deserializeStr();\n  return {\n    address,\n    publicKey,\n    ...name.length > 0 ? { name } : void 0\n  };\n}\n\n// src/shared/AccountInput.ts\n\nfunction serializeAccountInput(serializer, value) {\n  serializer.serialize(value.address);\n  serializer.serializeBool(value.publicKey !== void 0);\n  if (value.publicKey) {\n    serializePublicKey(serializer, value.publicKey);\n  }\n}\nfunction deserializeAccountInput(deserializer) {\n  const address = deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress);\n  const hasPublicKey = deserializer.deserializeBool();\n  const publicKey = hasPublicKey ? deserializePublicKey(deserializer) : void 0;\n  return { address, publicKey };\n}\n\n// src/shared/DappInfo.ts\nfunction serializeDappInfo(serializer, value) {\n  serializer.serializeStr(value.domain);\n  serializer.serializeStr(value.name);\n  serializer.serializeBool(value.imageURI !== void 0);\n  if (value.imageURI !== void 0) {\n    serializer.serializeStr(value.imageURI);\n  }\n}\nfunction deserializeDappInfo(deserializer) {\n  const domain = deserializer.deserializeStr();\n  const name = deserializer.deserializeStr();\n  const hasImageUri = deserializer.deserializeBool();\n  const imageURI = hasImageUri ? deserializer.deserializeStr() : void 0;\n  return { domain, imageURI, name };\n}\n\n// src/shared/EntryFunctionArgument.ts\n\nvar EntryFunctionArgumentVariant = /* @__PURE__ */ ((EntryFunctionArgumentVariant2) => {\n  EntryFunctionArgumentVariant2[EntryFunctionArgumentVariant2[\"Undefined\"] = 0] = \"Undefined\";\n  EntryFunctionArgumentVariant2[EntryFunctionArgumentVariant2[\"Array\"] = 1] = \"Array\";\n  EntryFunctionArgumentVariant2[EntryFunctionArgumentVariant2[\"String\"] = 2] = \"String\";\n  EntryFunctionArgumentVariant2[EntryFunctionArgumentVariant2[\"Uint8Array\"] = 3] = \"Uint8Array\";\n  EntryFunctionArgumentVariant2[EntryFunctionArgumentVariant2[\"AccountAddress\"] = 4] = \"AccountAddress\";\n  EntryFunctionArgumentVariant2[EntryFunctionArgumentVariant2[\"FixedBytes\"] = 5] = \"FixedBytes\";\n  return EntryFunctionArgumentVariant2;\n})(EntryFunctionArgumentVariant || {});\nfunction serializeEntryFunctionArgument(serializer, argument) {\n  if (argument === void 0 || argument === null) {\n    serializer.serializeU32AsUleb128(0 /* Undefined */);\n    return;\n  }\n  if (Array.isArray(argument)) {\n    serializer.serializeU32AsUleb128(1 /* Array */);\n    serializer.serializeU32AsUleb128(argument.length);\n    for (const subArgument of argument) {\n      serializeEntryFunctionArgument(serializer, subArgument);\n    }\n    return;\n  }\n  if (typeof argument === \"string\" || typeof argument === \"number\" || typeof argument === \"boolean\" || typeof argument === \"bigint\") {\n    serializer.serializeU32AsUleb128(2 /* String */);\n    serializer.serializeStr(argument.toString());\n    return;\n  }\n  if (argument instanceof Uint8Array) {\n    serializer.serializeU32AsUleb128(3 /* Uint8Array */);\n    serializer.serializeBytes(argument);\n    return;\n  }\n  if (argument instanceof ArrayBuffer) {\n    serializer.serializeU32AsUleb128(3 /* Uint8Array */);\n    serializer.serializeBytes(new Uint8Array(argument));\n    return;\n  }\n  if (\"values\" in argument) {\n    serializer.serializeU32AsUleb128(1 /* Array */);\n    serializer.serializeU32AsUleb128(argument.values.length);\n    for (const subArgument of argument.values) {\n      serializeEntryFunctionArgument(serializer, subArgument);\n    }\n    return;\n  }\n  if (\"data\" in argument) {\n    serializer.serializeU32AsUleb128(4 /* AccountAddress */);\n    serializer.serialize(argument);\n    return;\n  }\n  if (argument.value === void 0) {\n    serializer.serializeU32AsUleb128(0 /* Undefined */);\n    serializer.serialize(argument);\n    return;\n  }\n  if (argument.value instanceof Uint8Array) {\n    serializer.serializeU32AsUleb128(5 /* FixedBytes */);\n    serializer.serializeBytes(argument.value);\n    return;\n  }\n  serializer.serializeU32AsUleb128(2 /* String */);\n  serializer.serializeStr(argument.value.toString());\n}\nfunction deserializeEntryFunctionArgument(deserializer) {\n  const variant = deserializer.deserializeUleb128AsU32();\n  switch (variant) {\n    case 0 /* Undefined */: {\n      return void 0;\n    }\n    case 1 /* Array */: {\n      const length = deserializer.deserializeUleb128AsU32();\n      const args = [];\n      for (let i = 0; i < length; i += 1) {\n        const argument = deserializeEntryFunctionArgument(deserializer);\n        args.push(argument);\n      }\n      return args;\n    }\n    case 3 /* Uint8Array */: {\n      return deserializer.deserializeBytes();\n    }\n    case 4 /* AccountAddress */: {\n      return deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress);\n    }\n    case 2 /* String */: {\n      return deserializer.deserializeStr();\n    }\n    case 5 /* FixedBytes */: {\n      const bytes = deserializer.deserializeBytes();\n      return new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.FixedBytes(bytes);\n    }\n    default: {\n      throw new Error(\"Unexpected variant\");\n    }\n  }\n}\n\n// src/shared/Signature.ts\n\nfunction serializeSignature(serializer, value) {\n  if (value instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Ed25519Signature) {\n    serializer.serializeU32AsUleb128(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.Ed25519);\n  } else if (value instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.MultiEd25519Signature) {\n    serializer.serializeU32AsUleb128(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.MultiEd25519);\n  } else if (value instanceof _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AnySignature) {\n    serializer.serializeU32AsUleb128(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.SingleKey);\n  } else {\n    throw new Error(\"Unexpected signature type\");\n  }\n  serializer.serialize(value);\n}\nfunction deserializeSignature(deserializer) {\n  const signingScheme = deserializer.deserializeUleb128AsU32();\n  switch (signingScheme) {\n    case _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.Ed25519:\n      return deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Ed25519Signature);\n    case _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.MultiEd25519:\n      return deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.MultiEd25519Signature);\n    case _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.SigningScheme.SingleKey:\n      return deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AnySignature);\n    default:\n      throw new Error(`Unknown signing scheme: ${signingScheme}`);\n  }\n}\n\n// src/shared/TransactionPayloadInput.ts\n\nvar TransactionPayloadInputVariant = /* @__PURE__ */ ((TransactionPayloadInputVariant2) => {\n  TransactionPayloadInputVariant2[TransactionPayloadInputVariant2[\"EntryFunction\"] = 0] = \"EntryFunction\";\n  TransactionPayloadInputVariant2[TransactionPayloadInputVariant2[\"Script\"] = 1] = \"Script\";\n  TransactionPayloadInputVariant2[TransactionPayloadInputVariant2[\"Multisig\"] = 2] = \"Multisig\";\n  return TransactionPayloadInputVariant2;\n})(TransactionPayloadInputVariant || {});\nfunction serializeTypeArguments(serializer, typeArguments) {\n  serializer.serializeU32AsUleb128(typeArguments.length);\n  for (const typeArgument of typeArguments) {\n    const typeTag = typeof typeArgument === \"string\" ? (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.parseTypeTag)(typeArgument, { allowGenerics: true }) : typeArgument;\n    serializer.serialize(typeTag);\n  }\n}\nfunction deserializeTypeArguments(deserializer) {\n  const typeArguments = [];\n  const typeArgumentsLength = deserializer.deserializeUleb128AsU32();\n  for (let i = 0; i < typeArgumentsLength; i += 1) {\n    const typeTag = deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.TypeTag);\n    typeArguments.push(typeTag);\n  }\n  return typeArguments;\n}\nfunction serializeEntryFunctionArguments(serializer, functionArguments) {\n  serializer.serializeU32AsUleb128(functionArguments.length);\n  for (const functionArgument of functionArguments) {\n    serializeEntryFunctionArgument(serializer, functionArgument);\n  }\n}\nfunction deserializeEntryFunctionArguments(deserializer) {\n  const functionArgumentsLength = deserializer.deserializeUleb128AsU32();\n  const functionArguments = [];\n  for (let i = 0; i < functionArgumentsLength; i += 1) {\n    const functionArgument = deserializeEntryFunctionArgument(deserializer);\n    functionArguments.push(functionArgument);\n  }\n  return functionArguments;\n}\nfunction serializeTransactionPayloadInput(serializer, value) {\n  if (\"multisigAddress\" in value) {\n    serializer.serializeU32AsUleb128(2 /* Multisig */);\n    serializer.serializeStr(value.function);\n    serializeEntryFunctionArguments(serializer, value.functionArguments);\n    serializeTypeArguments(serializer, value.typeArguments ?? []);\n    const multisigAddress = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress.from(value.multisigAddress);\n    serializer.serialize(multisigAddress);\n  } else if (\"function\" in value) {\n    serializer.serializeU32AsUleb128(0 /* EntryFunction */);\n    serializer.serializeStr(value.function);\n    serializeEntryFunctionArguments(serializer, value.functionArguments);\n    serializeTypeArguments(serializer, value.typeArguments ?? []);\n  } else {\n    serializer.serializeU32AsUleb128(1 /* Script */);\n    const bytecode = _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Hex.fromHexInput(value.bytecode);\n    serializer.serializeBytes(bytecode.toUint8Array());\n    serializer.serializeU32AsUleb128(value.functionArguments.length);\n    for (const argument of value.functionArguments) {\n      argument.serializeForScriptFunction(serializer);\n    }\n    serializeTypeArguments(serializer, value.typeArguments ?? []);\n  }\n}\nfunction deserializeTransactionPayloadInput(deserializer) {\n  const variant = deserializer.deserializeUleb128AsU32();\n  switch (variant) {\n    case 2 /* Multisig */: {\n      const functionId = deserializer.deserializeStr();\n      const functionArguments = deserializeEntryFunctionArguments(deserializer);\n      const typeArguments = deserializeTypeArguments(deserializer);\n      const multisigAddress = deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress);\n      return {\n        function: functionId,\n        functionArguments,\n        multisigAddress,\n        typeArguments\n      };\n    }\n    case 0 /* EntryFunction */: {\n      const functionId = deserializer.deserializeStr();\n      const functionArguments = deserializeEntryFunctionArguments(deserializer);\n      const typeArguments = deserializeTypeArguments(deserializer);\n      return {\n        function: functionId,\n        functionArguments,\n        typeArguments\n      };\n    }\n    case 1 /* Script */: {\n      const bytecode = deserializer.deserializeBytes();\n      const functionArgumentsLength = deserializer.deserializeUleb128AsU32();\n      const functionArguments = [];\n      for (let i = 0; i < functionArgumentsLength; i += 1) {\n        const argument = (0,_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.deserializeFromScriptArgument)(deserializer);\n        functionArguments.push(argument);\n      }\n      const typeArguments = deserializeTypeArguments(deserializer);\n      return {\n        bytecode,\n        functionArguments,\n        typeArguments\n      };\n    }\n    default: {\n      throw new Error(\"Unexpected variant\");\n    }\n  }\n}\n\n// src/WalletRequest.ts\nfunction serializeWalletRequest({\n  dappInfo,\n  name,\n  version\n}) {\n  const serializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Serializer();\n  serializeDappInfo(serializer, dappInfo);\n  const data = serializer.toUint8Array();\n  return { data, name, version };\n}\nfunction deserializeWalletRequest({\n  data,\n  name,\n  version\n}) {\n  const deserializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Deserializer(data);\n  const dappInfo = deserializeDappInfo(deserializer);\n  return { dappInfo, name, version };\n}\nfunction serializeWalletRequestWithArgs({ args, dappInfo, name, version }, serializeArgsFn) {\n  const serializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Serializer();\n  serializeDappInfo(serializer, dappInfo);\n  serializeArgsFn(serializer, args);\n  const data = serializer.toUint8Array();\n  return { data, name, version };\n}\nfunction deserializeWalletRequestWithArgs({ data, name, version }, deserializeArgsFn) {\n  const deserializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Deserializer(data);\n  const dappInfo = deserializeDappInfo(deserializer);\n  const args = deserializeArgsFn(deserializer);\n  return { args, dappInfo, name, version };\n}\n\n// src/features/connect/request.ts\nvar ConnectRequest;\n((ConnectRequest2) => {\n  ConnectRequest2.name = \"connect\";\n  ConnectRequest2.supportedVersions = [1, 2];\n  ConnectRequest2.currentVersion = 2;\n  function serializeArgs(serializer, value) {\n    serializer.serializeOptionStr(value.dappId);\n    serializer.serializeOptionStr(value.dappEd25519PublicKeyB64);\n  }\n  ConnectRequest2.serializeArgs = serializeArgs;\n  function deserializeArgs(deserializer, version) {\n    if (version === 1) {\n      return {};\n    }\n    const dappId = deserializer.deserializeOptionStr();\n    const dappEd25519PublicKeyB64 = deserializer.deserializeOptionStr();\n    return { dappEd25519PublicKeyB64, dappId };\n  }\n  ConnectRequest2.deserializeArgs = deserializeArgs;\n  function serialize(dappInfo, args = {}) {\n    return serializeWalletRequestWithArgs({ args, dappInfo, name: ConnectRequest2.name, version: ConnectRequest2.currentVersion }, serializeArgs);\n  }\n  ConnectRequest2.serialize = serialize;\n  function deserialize(request) {\n    return deserializeWalletRequestWithArgs(request, (d) => deserializeArgs(d, request.version));\n  }\n  ConnectRequest2.deserialize = deserialize;\n  function isSerialized(request) {\n    return request.name === ConnectRequest2.name && ConnectRequest2.supportedVersions.includes(request.version);\n  }\n  ConnectRequest2.isSerialized = isSerialized;\n})(ConnectRequest || (ConnectRequest = {}));\n\n// src/UserResponse.ts\nfunction makeUserApproval(args) {\n  return { args, status: \"approved\" };\n}\nfunction makeUserResponseSerializeFn(serializeArgs) {\n  return (serializer, value) => {\n    serializer.serializeBool(value.status === \"approved\");\n    if (value.status === \"approved\") {\n      serializeArgs(serializer, value.args);\n    }\n  };\n}\nfunction makeUserResponseDeserializeFn(deserializeArgs) {\n  return (deserializer) => {\n    const isApproved = deserializer.deserializeBool();\n    return isApproved ? { args: deserializeArgs(deserializer), status: \"approved\" } : { status: \"dismissed\" };\n  };\n}\n\n// src/WalletResponse.ts\n\nfunction serializeWalletResponse(args, serializeFn) {\n  const serializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Serializer();\n  serializeFn(serializer, args);\n  const data = serializer.toUint8Array();\n  return { data };\n}\nfunction deserializeWalletResponse({ data }, deserializeFn) {\n  const deserializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Deserializer(data);\n  const args = deserializeFn(deserializer);\n  return { args };\n}\n\n// src/features/connect/response.ts\nvar ConnectResponse;\n((ConnectResponse2) => {\n  ConnectResponse2.supportedVersions = [1, 2];\n  ConnectResponse2.currentVersion = 2;\n  function serializeApprovalArgsV1(serializer, value) {\n    serializeAccountInfo(serializer, value.account);\n  }\n  function serializeApprovalArgs(serializer, value) {\n    serializeAccountInfo(serializer, value.account);\n    serializer.serializeOptionStr(value.pairing !== void 0 ? JSON.stringify(value.pairing) : void 0);\n  }\n  function deserializeApprovalArgs(deserializer) {\n    const account = deserializeAccountInfo(deserializer);\n    const serializedPairing = deserializer.deserializeOptionStr();\n    const pairing = serializedPairing !== void 0 ? JSON.parse(serializedPairing) : void 0;\n    return { account, pairing };\n  }\n  const serializeArgsV1 = makeUserResponseSerializeFn(serializeApprovalArgsV1);\n  const serializeArgs = makeUserResponseSerializeFn(serializeApprovalArgs);\n  const deserializeArgs = makeUserResponseDeserializeFn(deserializeApprovalArgs);\n  function serialize(args, version = ConnectResponse2.currentVersion) {\n    return serializeWalletResponse(args, version === 1 ? serializeArgsV1 : serializeArgs);\n  }\n  ConnectResponse2.serialize = serialize;\n  function deserialize(serializedResponse) {\n    return deserializeWalletResponse(serializedResponse, deserializeArgs);\n  }\n  ConnectResponse2.deserialize = deserialize;\n})(ConnectResponse || (ConnectResponse = {}));\n\n// src/features/disconnect/request.ts\nvar DisconnectRequest;\n((DisconnectRequest2) => {\n  DisconnectRequest2.name = \"disconnect\";\n  DisconnectRequest2.currentVersion = 1;\n  function serialize(dappInfo) {\n    return serializeWalletRequest({ dappInfo, name: DisconnectRequest2.name, version: DisconnectRequest2.currentVersion });\n  }\n  DisconnectRequest2.serialize = serialize;\n  function deserialize(request) {\n    return deserializeWalletRequest(request);\n  }\n  DisconnectRequest2.deserialize = deserialize;\n  function isSerialized(request) {\n    return request.name === DisconnectRequest2.name && request.version === DisconnectRequest2.currentVersion;\n  }\n  DisconnectRequest2.isSerialized = isSerialized;\n})(DisconnectRequest || (DisconnectRequest = {}));\n\n// src/features/disconnect/response.ts\nvar DisconnectResponse;\n((DisconnectResponse2) => {\n  function serialize(args) {\n    return serializeWalletResponse(args, () => {\n    });\n  }\n  DisconnectResponse2.serialize = serialize;\n  function deserialize(serializedResponse) {\n    return deserializeWalletResponse(serializedResponse, () => ({}));\n  }\n  DisconnectResponse2.deserialize = deserialize;\n})(DisconnectResponse || (DisconnectResponse = {}));\n\n// src/features/getConnectedAccounts/request.ts\nvar GetConnectedAccountsRequest;\n((GetConnectedAccountsRequest2) => {\n  GetConnectedAccountsRequest2.name = \"getConnectedAccounts\";\n  GetConnectedAccountsRequest2.currentVersion = 1;\n  function serialize(dappInfo) {\n    return serializeWalletRequest({ dappInfo, name: GetConnectedAccountsRequest2.name, version: GetConnectedAccountsRequest2.currentVersion });\n  }\n  GetConnectedAccountsRequest2.serialize = serialize;\n  function deserialize(request) {\n    return deserializeWalletRequest(request);\n  }\n  GetConnectedAccountsRequest2.deserialize = deserialize;\n  function isSerialized(request) {\n    return request.name === GetConnectedAccountsRequest2.name && request.version === GetConnectedAccountsRequest2.currentVersion;\n  }\n  GetConnectedAccountsRequest2.isSerialized = isSerialized;\n})(GetConnectedAccountsRequest || (GetConnectedAccountsRequest = {}));\n\n// src/features/getConnectedAccounts/response.ts\nvar GetConnectedAccountsResponse;\n((GetConnectedAccountsResponse2) => {\n  function serializeArgs(serializer, args) {\n    serializer.serializeU32AsUleb128(args.length);\n    for (const account of args) {\n      serializeAccountInfo(serializer, account);\n    }\n  }\n  function deserializeArgs(deserializer) {\n    const length = deserializer.deserializeUleb128AsU32();\n    const accounts = [];\n    for (let i = 0; i < length; i += 1) {\n      accounts.push(deserializeAccountInfo(deserializer));\n    }\n    return accounts;\n  }\n  function serialize(args) {\n    return serializeWalletResponse(args, serializeArgs);\n  }\n  GetConnectedAccountsResponse2.serialize = serialize;\n  function deserialize(serializedResponse) {\n    return deserializeWalletResponse(serializedResponse, deserializeArgs);\n  }\n  GetConnectedAccountsResponse2.deserialize = deserialize;\n})(GetConnectedAccountsResponse || (GetConnectedAccountsResponse = {}));\n\n// src/features/isConnected/request.ts\nvar IsConnectedRequest;\n((IsConnectedRequest2) => {\n  IsConnectedRequest2.name = \"isConnected\";\n  IsConnectedRequest2.currentVersion = 1;\n  function serialize(dappInfo) {\n    return serializeWalletRequest({ dappInfo, name: IsConnectedRequest2.name, version: IsConnectedRequest2.currentVersion });\n  }\n  IsConnectedRequest2.serialize = serialize;\n  function deserialize(request) {\n    return deserializeWalletRequest(request);\n  }\n  IsConnectedRequest2.deserialize = deserialize;\n  function isSerialized(request) {\n    return request.name === IsConnectedRequest2.name && request.version === IsConnectedRequest2.currentVersion;\n  }\n  IsConnectedRequest2.isSerialized = isSerialized;\n})(IsConnectedRequest || (IsConnectedRequest = {}));\n\n// src/features/isConnected/response.ts\nvar IsConnectedResponse;\n((IsConnectedResponse2) => {\n  function serializeArgs(serializer, value) {\n    serializer.serializeBool(value);\n  }\n  function deserializeArgs(deserializer) {\n    return deserializer.deserializeBool();\n  }\n  function serialize(args) {\n    return serializeWalletResponse(args, serializeArgs);\n  }\n  IsConnectedResponse2.serialize = serialize;\n  function deserialize(serializedResponse) {\n    return deserializeWalletResponse(serializedResponse, deserializeArgs);\n  }\n  IsConnectedResponse2.deserialize = deserialize;\n})(IsConnectedResponse || (IsConnectedResponse = {}));\n\n// src/features/signAndSubmitTransaction/request.ts\n\nvar SignAndSubmitTransactionRequest;\n((SignAndSubmitTransactionRequest2) => {\n  SignAndSubmitTransactionRequest2.name = \"signAndSubmitTransaction\";\n  SignAndSubmitTransactionRequest2.supportedVersions = [1, 2, 3];\n  SignAndSubmitTransactionRequest2.currentVersion = 3;\n  function serializeArgs(serializer, value) {\n    if (value.network !== void 0 && !isSupportedNetwork(value.network)) {\n      throw new Error(`Unsupported network '${value.network}'`);\n    }\n    serializer.serializeBool(value.signerAddress !== void 0);\n    if (value.signerAddress !== void 0) {\n      serializer.serialize(value.signerAddress);\n    }\n    serializer.serializeOptionStr(value.network);\n    if (\"bcsToBytes\" in value.payload) {\n      serializer.serializeBool(true);\n      serializer.serialize(value.payload);\n    } else {\n      serializer.serializeBool(false);\n      serializeTransactionPayloadInput(serializer, value.payload);\n    }\n    serializer.serializeU64(value.expirationTimestamp ?? 0);\n    serializer.serializeU32AsUleb128(value.gasUnitPrice ?? 0);\n    serializer.serializeU32AsUleb128(value.maxGasAmount ?? 0);\n    serializer.serializeU32AsUleb128(value.feePayer ? 1 : 0);\n    if (value.feePayer) {\n      serializeAccountAuthenticatorInput(serializer, value.feePayer);\n    }\n  }\n  SignAndSubmitTransactionRequest2.serializeArgs = serializeArgs;\n  function deserializeArgs(deserializer, version) {\n    const hasSignerAddress = version >= 3 && deserializer.deserializeBool();\n    const signerAddress = hasSignerAddress ? deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress) : void 0;\n    const network = version === 1 ? deserializer.deserializeStr() : deserializer.deserializeOptionStr();\n    if (network !== void 0 && !isSupportedNetwork(network)) {\n      throw new Error(`Unsupported network '${network}'`);\n    }\n    const isPayloadBcsSerializable = version === 1 || deserializer.deserializeBool();\n    const payload = isPayloadBcsSerializable ? deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.TransactionPayload) : deserializeTransactionPayloadInput(deserializer);\n    const expirationTimestamp = Number(deserializer.deserializeU64());\n    const gasUnitPrice = deserializer.deserializeUleb128AsU32();\n    const maxGasAmount = deserializer.deserializeUleb128AsU32();\n    const hasFeePayer = deserializer.deserializeUleb128AsU32();\n    const feePayer = hasFeePayer ? deserializeAccountAuthenticatorInput(deserializer) : void 0;\n    return {\n      expirationTimestamp: expirationTimestamp > 0 ? expirationTimestamp : void 0,\n      feePayer,\n      gasUnitPrice: gasUnitPrice > 0 ? gasUnitPrice : void 0,\n      maxGasAmount: maxGasAmount > 0 ? maxGasAmount : void 0,\n      network,\n      payload,\n      signerAddress\n    };\n  }\n  SignAndSubmitTransactionRequest2.deserializeArgs = deserializeArgs;\n  function serialize(dappInfo, args) {\n    const request = { args, dappInfo, name: SignAndSubmitTransactionRequest2.name, version: SignAndSubmitTransactionRequest2.currentVersion };\n    return serializeWalletRequestWithArgs(request, serializeArgs);\n  }\n  SignAndSubmitTransactionRequest2.serialize = serialize;\n  function deserialize(serializedRequest) {\n    return deserializeWalletRequestWithArgs(\n      serializedRequest,\n      (deserializer) => deserializeArgs(deserializer, serializedRequest.version)\n    );\n  }\n  SignAndSubmitTransactionRequest2.deserialize = deserialize;\n  function isSerialized(request) {\n    return request.name === SignAndSubmitTransactionRequest2.name && SignAndSubmitTransactionRequest2.supportedVersions.includes(request.version);\n  }\n  SignAndSubmitTransactionRequest2.isSerialized = isSerialized;\n})(SignAndSubmitTransactionRequest || (SignAndSubmitTransactionRequest = {}));\n\n// src/features/signAndSubmitTransaction/response.ts\nvar SignAndSubmitTransactionResponse;\n((SignAndSubmitTransactionResponse2) => {\n  function serializeApprovalArgs(serializer, value) {\n    serializer.serializeStr(value.txnHash);\n  }\n  function deserializeApprovalArgs(deserializer) {\n    const txnHash = deserializer.deserializeStr();\n    return { txnHash };\n  }\n  const serializeArgs = makeUserResponseSerializeFn(serializeApprovalArgs);\n  const deserializeArgs = makeUserResponseDeserializeFn(deserializeApprovalArgs);\n  function serialize(args) {\n    return serializeWalletResponse(args, serializeArgs);\n  }\n  SignAndSubmitTransactionResponse2.serialize = serialize;\n  function deserialize(serializedResponse) {\n    return deserializeWalletResponse(serializedResponse, deserializeArgs);\n  }\n  SignAndSubmitTransactionResponse2.deserialize = deserialize;\n})(SignAndSubmitTransactionResponse || (SignAndSubmitTransactionResponse = {}));\n\n// src/features/signMessage/request.ts\n\nvar SignMessageRequest;\n((SignMessageRequest2) => {\n  SignMessageRequest2.name = \"signMessage\";\n  SignMessageRequest2.supportedVersions = [1, 2];\n  SignMessageRequest2.currentVersion = 2;\n  function serializeArgs(serializer, value) {\n    serializer.serializeBool(value.signerAddress !== void 0);\n    if (value.signerAddress !== void 0) {\n      serializer.serialize(value.signerAddress);\n    }\n    serializer.serializeU8(value.chainId);\n    serializer.serializeBytes(value.nonce);\n    serializer.serializeBytes(value.message);\n  }\n  function deserializeArgs(deserializer, version) {\n    const hasSignerAddress = version >= 2 && deserializer.deserializeBool();\n    const signerAddress = hasSignerAddress ? deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress) : void 0;\n    const chainId = deserializer.deserializeU8();\n    const nonce = deserializer.deserializeBytes();\n    const message = deserializer.deserializeBytes();\n    return { chainId, message, nonce, signerAddress };\n  }\n  function serialize(dappInfo, args) {\n    const request = { args, dappInfo, name: SignMessageRequest2.name, version: SignMessageRequest2.currentVersion };\n    return serializeWalletRequestWithArgs(request, serializeArgs);\n  }\n  SignMessageRequest2.serialize = serialize;\n  function deserialize(serializedRequest) {\n    return deserializeWalletRequestWithArgs(serializedRequest, (d) => deserializeArgs(d, serializedRequest.version));\n  }\n  SignMessageRequest2.deserialize = deserialize;\n  function isSerialized(request) {\n    return request.name === SignMessageRequest2.name && request.version === SignMessageRequest2.currentVersion;\n  }\n  SignMessageRequest2.isSerialized = isSerialized;\n})(SignMessageRequest || (SignMessageRequest = {}));\n\n// src/features/signMessage/response.ts\nvar SignMessageResponse;\n((SignMessageResponse2) => {\n  function serializeApprovalArgs(serializer, value) {\n    serializer.serializeStr(value.fullMessage);\n    serializeSignature(serializer, value.signature);\n  }\n  function deserializeApprovalArgs(deserializer) {\n    const fullMessage = deserializer.deserializeStr();\n    const signature = deserializeSignature(deserializer);\n    return { fullMessage, signature };\n  }\n  const serializeArgs = makeUserResponseSerializeFn(serializeApprovalArgs);\n  const deserializeArgs = makeUserResponseDeserializeFn(deserializeApprovalArgs);\n  function serialize(args) {\n    return serializeWalletResponse(args, serializeArgs);\n  }\n  SignMessageResponse2.serialize = serialize;\n  function deserialize(serializedResponse) {\n    return deserializeWalletResponse(serializedResponse, deserializeArgs);\n  }\n  SignMessageResponse2.deserialize = deserialize;\n})(SignMessageResponse || (SignMessageResponse = {}));\n\n// src/features/signTransaction/request.ts\n\nvar SignTransactionRequest;\n((SignTransactionRequest2) => {\n  SignTransactionRequest2.name = \"signTransaction\";\n  SignTransactionRequest2.supportedVersions = [1, 2, 3];\n  SignTransactionRequest2.currentVersion = 3;\n  function normalizeArgs(args) {\n    const { feePayer, secondarySigners, senderPublicKey, signerAddress, transaction } = args;\n    const sender = {\n      address: transaction.sender,\n      publicKey: senderPublicKey\n    };\n    const network = chainIdToNetwork(args.transaction.chain_id.chainId);\n    return {\n      expirationTimestamp: Number(transaction.expiration_timestamp_secs),\n      feePayer,\n      gasUnitPrice: Number(transaction.gas_unit_price),\n      maxGasAmount: Number(transaction.max_gas_amount),\n      network,\n      payload: transaction.payload,\n      secondarySigners,\n      sender,\n      signerAddress\n    };\n  }\n  SignTransactionRequest2.normalizeArgs = normalizeArgs;\n  function serializeArgs(serializer, value) {\n    if (value.network !== void 0 && !isSupportedNetwork(value.network)) {\n      throw new Error(`Unsupported network '${value.network}'`);\n    }\n    serializer.serializeBool(value.signerAddress !== void 0);\n    if (value.signerAddress !== void 0) {\n      serializer.serialize(value.signerAddress);\n    }\n    serializer.serializeOptionStr(value.network);\n    serializer.serializeBool(value.sender !== void 0);\n    if (value.sender !== void 0) {\n      serializeAccountInput(serializer, value.sender);\n    }\n    serializer.serialize(value.payload);\n    serializer.serializeU32AsUleb128(value.expirationSecondsFromNow ?? 0);\n    serializer.serializeU64(value.expirationTimestamp ?? 0);\n    serializer.serializeU32AsUleb128(value.gasUnitPrice ?? 0);\n    serializer.serializeU32AsUleb128(value.maxGasAmount ?? 0);\n    serializer.serializeBool(value.feePayer !== void 0);\n    if (value.feePayer !== void 0) {\n      serializeAccountInput(serializer, value.feePayer);\n    }\n    const secondarySigners = value.secondarySigners ?? [];\n    serializer.serializeU32AsUleb128(secondarySigners.length);\n    for (const signer of secondarySigners) {\n      serializeAccountInput(serializer, signer);\n    }\n  }\n  function deserializeArgs(deserializer, version) {\n    const hasSignerAddress = version >= 3 && deserializer.deserializeBool();\n    const signerAddress = hasSignerAddress ? deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAddress) : void 0;\n    const network = version === 1 ? deserializer.deserializeStr() : deserializer.deserializeOptionStr();\n    if (network !== void 0 && !isSupportedNetwork(network)) {\n      throw new Error(`Unsupported network '${network}'`);\n    }\n    const hasSender = deserializer.deserializeBool();\n    const sender = hasSender ? deserializeAccountInput(deserializer) : void 0;\n    const payload = deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.TransactionPayload);\n    const expirationSecondsFromNow = deserializer.deserializeUleb128AsU32();\n    const expirationTimestamp = Number(deserializer.deserializeU64());\n    const gasUnitPrice = deserializer.deserializeUleb128AsU32();\n    const maxGasAmount = deserializer.deserializeUleb128AsU32();\n    const hasFeePayer = deserializer.deserializeBool();\n    const feePayer = hasFeePayer ? deserializeAccountInput(deserializer) : void 0;\n    const secondarySignersLength = deserializer.deserializeUleb128AsU32();\n    const secondarySigners = [];\n    for (let i = 0; i < secondarySignersLength; i += 1) {\n      secondarySigners.push(deserializeAccountInput(deserializer));\n    }\n    return {\n      expirationSecondsFromNow: expirationSecondsFromNow > 0 ? expirationSecondsFromNow : void 0,\n      expirationTimestamp: expirationTimestamp > 0 ? expirationTimestamp : void 0,\n      feePayer,\n      gasUnitPrice: gasUnitPrice > 0 ? gasUnitPrice : void 0,\n      maxGasAmount: maxGasAmount > 0 ? maxGasAmount : void 0,\n      network,\n      payload,\n      secondarySigners,\n      sender,\n      signerAddress\n    };\n  }\n  function serialize(dappInfo, args) {\n    const request = { args, dappInfo, name: SignTransactionRequest2.name, version: SignTransactionRequest2.currentVersion };\n    return serializeWalletRequestWithArgs(request, serializeArgs);\n  }\n  SignTransactionRequest2.serialize = serialize;\n  function deserialize(serializedRequest) {\n    return deserializeWalletRequestWithArgs(\n      serializedRequest,\n      (deserializer) => deserializeArgs(deserializer, serializedRequest.version)\n    );\n  }\n  SignTransactionRequest2.deserialize = deserialize;\n  function isSerialized(request) {\n    return request.name === SignTransactionRequest2.name && SignTransactionRequest2.supportedVersions.includes(request.version);\n  }\n  SignTransactionRequest2.isSerialized = isSerialized;\n})(SignTransactionRequest || (SignTransactionRequest = {}));\n\n// src/features/signTransaction/response.ts\n\nvar SignTransactionResponse;\n((SignTransactionResponse2) => {\n  function serializeApprovalArgs(serializer, value) {\n    serializer.serialize(value.authenticator);\n    serializer.serializeBool(value.rawTransaction !== void 0);\n    if (value.rawTransaction !== void 0) {\n      serializer.serialize(value.rawTransaction);\n    }\n  }\n  function deserializeApprovalArgs(deserializer) {\n    const authenticator = deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.AccountAuthenticator);\n    const hasRawTransaction = deserializer.deserializeBool();\n    const rawTransaction = hasRawTransaction ? deserializer.deserialize(_aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.RawTransaction) : void 0;\n    return {\n      authenticator,\n      rawTransaction\n    };\n  }\n  const serializeArgs = makeUserResponseSerializeFn(serializeApprovalArgs);\n  const deserializeArgs = makeUserResponseDeserializeFn(deserializeApprovalArgs);\n  function serialize(args) {\n    return serializeWalletResponse(args, serializeArgs);\n  }\n  SignTransactionResponse2.serialize = serialize;\n  function deserialize(serializedResponse) {\n    return deserializeWalletResponse(serializedResponse, deserializeArgs);\n  }\n  SignTransactionResponse2.deserialize = deserialize;\n})(SignTransactionResponse || (SignTransactionResponse = {}));\n\n// src/messages/common.ts\nfunction isTypedMessage(messageCls, message) {\n  return message?.__messageType === messageCls.TYPE;\n}\n\n// src/messages/background.ts\nvar _AptosWalletRequestMessage = class _AptosWalletRequestMessage {\n  constructor(nonce, serializedValue) {\n    this.nonce = nonce;\n    this.serializedValue = serializedValue;\n    this.__messageType = _AptosWalletRequestMessage.TYPE;\n  }\n};\n_AptosWalletRequestMessage.TYPE = \"AptosWalletRequest\";\nvar AptosWalletRequestMessage = _AptosWalletRequestMessage;\nvar _AptosWalletSuccessResponseMessage = class _AptosWalletSuccessResponseMessage {\n  constructor(serializedValue, nonce) {\n    this.serializedValue = serializedValue;\n    this.nonce = nonce;\n    this.__messageType = _AptosWalletSuccessResponseMessage.TYPE;\n  }\n};\n_AptosWalletSuccessResponseMessage.TYPE = \"AptosWalletSuccessResponseMessage\";\nvar AptosWalletSuccessResponseMessage = _AptosWalletSuccessResponseMessage;\nvar _AptosWalletErrorResponseMessage = class _AptosWalletErrorResponseMessage {\n  constructor(error, nonce) {\n    this.error = error;\n    this.nonce = nonce;\n    this.__messageType = _AptosWalletErrorResponseMessage.TYPE;\n  }\n};\n_AptosWalletErrorResponseMessage.TYPE = \"AptosWalletErrorResponseMessage\";\nvar AptosWalletErrorResponseMessage = _AptosWalletErrorResponseMessage;\nfunction isAptosWalletResponseMessage(message) {\n  return isTypedMessage(AptosWalletSuccessResponseMessage, message) || isTypedMessage(AptosWalletErrorResponseMessage, message);\n}\n\n// src/messages/prompt.ts\n\nvar _PromptOpenerPingRequestMessage = class _PromptOpenerPingRequestMessage {\n  constructor() {\n    this.__messageType = _PromptOpenerPingRequestMessage.TYPE;\n  }\n};\n_PromptOpenerPingRequestMessage.TYPE = \"PromptOpenerPingRequest\";\nvar PromptOpenerPingRequestMessage = _PromptOpenerPingRequestMessage;\nvar _PromptOpenerPingResponseMessage = class _PromptOpenerPingResponseMessage {\n  constructor() {\n    this.__messageType = _PromptOpenerPingResponseMessage.TYPE;\n  }\n};\n_PromptOpenerPingResponseMessage.TYPE = \"PromptOpenerPingResponse\";\nvar PromptOpenerPingResponseMessage = _PromptOpenerPingResponseMessage;\nvar _PromptApprovalResponseMessage = class _PromptApprovalResponseMessage {\n  constructor(serializedValue) {\n    this.serializedValue = serializedValue;\n    this.__messageType = _PromptApprovalResponseMessage.TYPE;\n  }\n};\n_PromptApprovalResponseMessage.TYPE = \"PromptApprovalResponse\";\nvar PromptApprovalResponseMessage = _PromptApprovalResponseMessage;\nvar _PromptUnauthorizedErrorMessage = class _PromptUnauthorizedErrorMessage {\n  constructor() {\n    this.__messageType = _PromptUnauthorizedErrorMessage.TYPE;\n  }\n};\n_PromptUnauthorizedErrorMessage.TYPE = \"PromptUnauthorizedError\";\nvar PromptUnauthorizedErrorMessage = _PromptUnauthorizedErrorMessage;\nfunction urlEncodeWalletRequest(request) {\n  const serializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Serializer();\n  serializer.serializeStr(request.name);\n  serializer.serializeBytes(request.data);\n  serializer.serializeStr(request.version.toString());\n  return bytesToBase64(serializer.toUint8Array());\n}\nfunction urlDecodeWalletRequest(encodedRequest) {\n  const deserializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_0__.Deserializer(base64ToBytes(encodedRequest));\n  const name = deserializer.deserializeStr();\n  const data = deserializer.deserializeBytes();\n  let version;\n  try {\n    version = Number(deserializer.deserializeStr());\n  } catch {\n    version = 1;\n  }\n  return { data, name, version };\n}\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcHRvcy1jb25uZWN0L3dhbGxldC1hcGkvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQytEO0FBQy9EO0FBQ0E7QUFDQSxTQUFTLGdFQUFnQjtBQUN6QixhQUFhLHVEQUFPO0FBQ3BCLFNBQVMsZ0VBQWdCO0FBQ3pCLGFBQWEsdURBQU87QUFDcEI7QUFDQSxhQUFhLHVEQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBLFVBQVUsdURBQU8sVUFBVSx1REFBTyxVQUFVLHVEQUFPO0FBQ25EOztBQUVBO0FBQzhGOztBQUU5RjtBQUMwRTtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLDhEQUFjO0FBQ3pELGlEQUFpRCxvRUFBb0I7QUFDckUsV0FBVztBQUNYOztBQUVBO0FBQ3VFOztBQUV2RTtBQU80QjtBQUM1QjtBQUNBLHVCQUF1QixnRUFBZ0I7QUFDdkMscUNBQXFDLDZEQUFhO0FBQ2xELElBQUksMEJBQTBCLHFFQUFxQjtBQUNuRCxxQ0FBcUMsNkRBQWE7QUFDbEQsSUFBSSwwQkFBMEIsNERBQVk7QUFDMUMscUNBQXFDLDZEQUFhO0FBQ2xELElBQUksMEJBQTBCLHdEQUFRO0FBQ3RDLHFDQUFxQyw2REFBYTtBQUNsRCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDZEQUFhO0FBQ3RCLHNDQUFzQyxnRUFBZ0I7QUFDdEQsU0FBUyw2REFBYTtBQUN0QixzQ0FBc0MscUVBQXFCO0FBQzNELFNBQVMsNkRBQWE7QUFDdEIsc0NBQXNDLDREQUFZO0FBQ2xELFNBQVMsNkRBQWE7QUFDdEIsc0NBQXNDLHdEQUFRO0FBQzlDO0FBQ0EsaURBQWlELGNB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNnRztBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsMERBQVk7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDREQUFjO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQTBERTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcHRvcy1jb25uZWN0L3dhbGxldC1hcGkvZGlzdC9pbmRleC5tanM/Y2ZkZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvYmFzZTY0LnRzXG5mdW5jdGlvbiBiYXNlNjRUb0J5dGVzKGJhc2U2NCkge1xuICBjb25zdCBiaW5hcnlTdHJpbmcgPSBhdG9iKGJhc2U2NCk7XG4gIHJldHVybiBVaW50OEFycmF5LmZyb20oYmluYXJ5U3RyaW5nLCAobSkgPT4gbS5jaGFyQ29kZUF0KDApKTtcbn1cbmZ1bmN0aW9uIGJ5dGVzVG9CYXNlNjQoYnl0ZXMpIHtcbiAgY29uc3QgYmluYXJ5U3RyaW5nID0gU3RyaW5nLmZyb21DaGFyQ29kZSguLi5ieXRlcyk7XG4gIHJldHVybiBidG9hKGJpbmFyeVN0cmluZyk7XG59XG5cbi8vIHNyYy9oZWxwZXJzLnRzXG5pbXBvcnQgeyBOZXR3b3JrLCBOZXR3b3JrVG9DaGFpbklkIH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuZnVuY3Rpb24gY2hhaW5JZFRvTmV0d29yayhjaGFpbklkKSB7XG4gIHN3aXRjaCAoY2hhaW5JZCkge1xuICAgIGNhc2UgTmV0d29ya1RvQ2hhaW5JZC5tYWlubmV0OlxuICAgICAgcmV0dXJuIE5ldHdvcmsuTUFJTk5FVDtcbiAgICBjYXNlIE5ldHdvcmtUb0NoYWluSWQudGVzdG5ldDpcbiAgICAgIHJldHVybiBOZXR3b3JrLlRFU1RORVQ7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBOZXR3b3JrLkRFVk5FVDtcbiAgfVxufVxuZnVuY3Rpb24gaXNTdXBwb3J0ZWROZXR3b3JrKG5ldHdvcmspIHtcbiAgcmV0dXJuIFtOZXR3b3JrLk1BSU5ORVQsIE5ldHdvcmsuVEVTVE5FVCwgTmV0d29yay5ERVZORVRdLmluY2x1ZGVzKG5ldHdvcmspO1xufVxuXG4vLyBzcmMvV2FsbGV0UmVxdWVzdC50c1xuaW1wb3J0IHsgRGVzZXJpYWxpemVyIGFzIERlc2VyaWFsaXplcjksIFNlcmlhbGl6ZXIgYXMgU2VyaWFsaXplcjkgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5cbi8vIHNyYy9zaGFyZWQvQWNjb3VudEF1dGhlbnRpY2F0b3JJbnB1dC50c1xuaW1wb3J0IHsgQWNjb3VudEFkZHJlc3MsIEFjY291bnRBdXRoZW50aWNhdG9yIH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuZnVuY3Rpb24gc2VyaWFsaXplQWNjb3VudEF1dGhlbnRpY2F0b3JJbnB1dChzZXJpYWxpemVyLCB2YWx1ZSkge1xuICBzZXJpYWxpemVyLnNlcmlhbGl6ZSh2YWx1ZS5hZGRyZXNzKTtcbiAgc2VyaWFsaXplci5zZXJpYWxpemUodmFsdWUuYXV0aGVudGljYXRvcik7XG59XG5mdW5jdGlvbiBkZXNlcmlhbGl6ZUFjY291bnRBdXRoZW50aWNhdG9ySW5wdXQoZGVzZXJpYWxpemVyKSB7XG4gIGNvbnN0IGFkZHJlc3MgPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoQWNjb3VudEFkZHJlc3MpO1xuICBjb25zdCBhdXRoZW50aWNhdG9yID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplKEFjY291bnRBdXRoZW50aWNhdG9yKTtcbiAgcmV0dXJuIHsgYWRkcmVzcywgYXV0aGVudGljYXRvciB9O1xufVxuXG4vLyBzcmMvc2hhcmVkL0FjY291bnRJbmZvLnRzXG5pbXBvcnQgeyBBY2NvdW50QWRkcmVzcyBhcyBBY2NvdW50QWRkcmVzczIgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5cbi8vIHNyYy9zaGFyZWQvUHVibGljS2V5LnRzXG5pbXBvcnQge1xuICBBbnlQdWJsaWNLZXksXG4gIEVkMjU1MTlQdWJsaWNLZXksXG4gIE11bHRpRWQyNTUxOVB1YmxpY0tleSxcbiAgTXVsdGlLZXksXG4gIFNpZ25pbmdTY2hlbWVcbn0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuZnVuY3Rpb24gc2VyaWFsaXplUHVibGljS2V5KHNlcmlhbGl6ZXIsIHZhbHVlKSB7XG4gIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEVkMjU1MTlQdWJsaWNLZXkpIHtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOChTaWduaW5nU2NoZW1lLkVkMjU1MTkpO1xuICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgTXVsdGlFZDI1NTE5UHVibGljS2V5KSB7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVVMzJBc1VsZWIxMjgoU2lnbmluZ1NjaGVtZS5NdWx0aUVkMjU1MTkpO1xuICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgQW55UHVibGljS2V5KSB7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVVMzJBc1VsZWIxMjgoU2lnbmluZ1NjaGVtZS5TaW5nbGVLZXkpO1xuICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgTXVsdGlLZXkpIHtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOChTaWduaW5nU2NoZW1lLk11bHRpS2V5KTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIHB1YmxpYyBrZXkgdHlwZVwiKTtcbiAgfVxuICBzZXJpYWxpemVyLnNlcmlhbGl6ZSh2YWx1ZSk7XG59XG5mdW5jdGlvbiBkZXNlcmlhbGl6ZVB1YmxpY0tleShkZXNlcmlhbGl6ZXIpIHtcbiAgY29uc3Qgc2lnbmluZ1NjaGVtZSA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVVsZWIxMjhBc1UzMigpO1xuICBzd2l0Y2ggKHNpZ25pbmdTY2hlbWUpIHtcbiAgICBjYXNlIFNpZ25pbmdTY2hlbWUuRWQyNTUxOTpcbiAgICAgIHJldHVybiBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoRWQyNTUxOVB1YmxpY0tleSk7XG4gICAgY2FzZSBTaWduaW5nU2NoZW1lLk11bHRpRWQyNTUxOTpcbiAgICAgIHJldHVybiBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoTXVsdGlFZDI1NTE5UHVibGljS2V5KTtcbiAgICBjYXNlIFNpZ25pbmdTY2hlbWUuU2luZ2xlS2V5OlxuICAgICAgcmV0dXJuIGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZShBbnlQdWJsaWNLZXkpO1xuICAgIGNhc2UgU2lnbmluZ1NjaGVtZS5NdWx0aUtleTpcbiAgICAgIHJldHVybiBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoTXVsdGlLZXkpO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gc2lnbmluZyBzY2hlbWU6ICR7c2lnbmluZ1NjaGVtZX1gKTtcbiAgfVxufVxuXG4vLyBzcmMvc2hhcmVkL0FjY291bnRJbmZvLnRzXG5mdW5jdGlvbiBzZXJpYWxpemVBY2NvdW50SW5mbyhzZXJpYWxpemVyLCB2YWx1ZSkge1xuICBzZXJpYWxpemVyLnNlcmlhbGl6ZSh2YWx1ZS5hZGRyZXNzKTtcbiAgc2VyaWFsaXplUHVibGljS2V5KHNlcmlhbGl6ZXIsIHZhbHVlLnB1YmxpY0tleSk7XG4gIHNlcmlhbGl6ZXIuc2VyaWFsaXplU3RyKHZhbHVlLm5hbWUgPz8gXCJcIik7XG59XG5mdW5jdGlvbiBkZXNlcmlhbGl6ZUFjY291bnRJbmZvKGRlc2VyaWFsaXplcikge1xuICBjb25zdCBhZGRyZXNzID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplKEFjY291bnRBZGRyZXNzMik7XG4gIGNvbnN0IHB1YmxpY0tleSA9IGRlc2VyaWFsaXplUHVibGljS2V5KGRlc2VyaWFsaXplcik7XG4gIGNvbnN0IG5hbWUgPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVTdHIoKTtcbiAgcmV0dXJuIHtcbiAgICBhZGRyZXNzLFxuICAgIHB1YmxpY0tleSxcbiAgICAuLi5uYW1lLmxlbmd0aCA+IDAgPyB7IG5hbWUgfSA6IHZvaWQgMFxuICB9O1xufVxuXG4vLyBzcmMvc2hhcmVkL0FjY291bnRJbnB1dC50c1xuaW1wb3J0IHsgQWNjb3VudEFkZHJlc3MgYXMgQWNjb3VudEFkZHJlc3MzIH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xuZnVuY3Rpb24gc2VyaWFsaXplQWNjb3VudElucHV0KHNlcmlhbGl6ZXIsIHZhbHVlKSB7XG4gIHNlcmlhbGl6ZXIuc2VyaWFsaXplKHZhbHVlLmFkZHJlc3MpO1xuICBzZXJpYWxpemVyLnNlcmlhbGl6ZUJvb2wodmFsdWUucHVibGljS2V5ICE9PSB2b2lkIDApO1xuICBpZiAodmFsdWUucHVibGljS2V5KSB7XG4gICAgc2VyaWFsaXplUHVibGljS2V5KHNlcmlhbGl6ZXIsIHZhbHVlLnB1YmxpY0tleSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGRlc2VyaWFsaXplQWNjb3VudElucHV0KGRlc2VyaWFsaXplcikge1xuICBjb25zdCBhZGRyZXNzID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplKEFjY291bnRBZGRyZXNzMyk7XG4gIGNvbnN0IGhhc1B1YmxpY0tleSA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZUJvb2woKTtcbiAgY29uc3QgcHVibGljS2V5ID0gaGFzUHVibGljS2V5ID8gZGVzZXJpYWxpemVQdWJsaWNLZXkoZGVzZXJpYWxpemVyKSA6IHZvaWQgMDtcbiAgcmV0dXJuIHsgYWRkcmVzcywgcHVibGljS2V5IH07XG59XG5cbi8vIHNyYy9zaGFyZWQvRGFwcEluZm8udHNcbmZ1bmN0aW9uIHNlcmlhbGl6ZURhcHBJbmZvKHNlcmlhbGl6ZXIsIHZhbHVlKSB7XG4gIHNlcmlhbGl6ZXIuc2VyaWFsaXplU3RyKHZhbHVlLmRvbWFpbik7XG4gIHNlcmlhbGl6ZXIuc2VyaWFsaXplU3RyKHZhbHVlLm5hbWUpO1xuICBzZXJpYWxpemVyLnNlcmlhbGl6ZUJvb2wodmFsdWUuaW1hZ2VVUkkgIT09IHZvaWQgMCk7XG4gIGlmICh2YWx1ZS5pbWFnZVVSSSAhPT0gdm9pZCAwKSB7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVTdHIodmFsdWUuaW1hZ2VVUkkpO1xuICB9XG59XG5mdW5jdGlvbiBkZXNlcmlhbGl6ZURhcHBJbmZvKGRlc2VyaWFsaXplcikge1xuICBjb25zdCBkb21haW4gPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVTdHIoKTtcbiAgY29uc3QgbmFtZSA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVN0cigpO1xuICBjb25zdCBoYXNJbWFnZVVyaSA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZUJvb2woKTtcbiAgY29uc3QgaW1hZ2VVUkkgPSBoYXNJbWFnZVVyaSA/IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVN0cigpIDogdm9pZCAwO1xuICByZXR1cm4geyBkb21haW4sIGltYWdlVVJJLCBuYW1lIH07XG59XG5cbi8vIHNyYy9zaGFyZWQvRW50cnlGdW5jdGlvbkFyZ3VtZW50LnRzXG5pbXBvcnQge1xuICBBY2NvdW50QWRkcmVzcyBhcyBBY2NvdW50QWRkcmVzczQsXG4gIEZpeGVkQnl0ZXNcbn0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xudmFyIEVudHJ5RnVuY3Rpb25Bcmd1bWVudFZhcmlhbnQgPSAvKiBAX19QVVJFX18gKi8gKChFbnRyeUZ1bmN0aW9uQXJndW1lbnRWYXJpYW50MikgPT4ge1xuICBFbnRyeUZ1bmN0aW9uQXJndW1lbnRWYXJpYW50MltFbnRyeUZ1bmN0aW9uQXJndW1lbnRWYXJpYW50MltcIlVuZGVmaW5lZFwiXSA9IDBdID0gXCJVbmRlZmluZWRcIjtcbiAgRW50cnlGdW5jdGlvbkFyZ3VtZW50VmFyaWFudDJbRW50cnlGdW5jdGlvbkFyZ3VtZW50VmFyaWFudDJbXCJBcnJheVwiXSA9IDFdID0gXCJBcnJheVwiO1xuICBFbnRyeUZ1bmN0aW9uQXJndW1lbnRWYXJpYW50MltFbnRyeUZ1bmN0aW9uQXJndW1lbnRWYXJpYW50MltcIlN0cmluZ1wiXSA9IDJdID0gXCJTdHJpbmdcIjtcbiAgRW50cnlGdW5jdGlvbkFyZ3VtZW50VmFyaWFudDJbRW50cnlGdW5jdGlvbkFyZ3VtZW50VmFyaWFudDJbXCJVaW50OEFycmF5XCJdID0gM10gPSBcIlVpbnQ4QXJyYXlcIjtcbiAgRW50cnlGdW5jdGlvbkFyZ3VtZW50VmFyaWFudDJbRW50cnlGdW5jdGlvbkFyZ3VtZW50VmFyaWFudDJbXCJBY2NvdW50QWRkcmVzc1wiXSA9IDRdID0gXCJBY2NvdW50QWRkcmVzc1wiO1xuICBFbnRyeUZ1bmN0aW9uQXJndW1lbnRWYXJpYW50MltFbnRyeUZ1bmN0aW9uQXJndW1lbnRWYXJpYW50MltcIkZpeGVkQnl0ZXNcIl0gPSA1XSA9IFwiRml4ZWRCeXRlc1wiO1xuICByZXR1cm4gRW50cnlGdW5jdGlvbkFyZ3VtZW50VmFyaWFudDI7XG59KShFbnRyeUZ1bmN0aW9uQXJndW1lbnRWYXJpYW50IHx8IHt9KTtcbmZ1bmN0aW9uIHNlcmlhbGl6ZUVudHJ5RnVuY3Rpb25Bcmd1bWVudChzZXJpYWxpemVyLCBhcmd1bWVudCkge1xuICBpZiAoYXJndW1lbnQgPT09IHZvaWQgMCB8fCBhcmd1bWVudCA9PT0gbnVsbCkge1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KDAgLyogVW5kZWZpbmVkICovKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJndW1lbnQpKSB7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVVMzJBc1VsZWIxMjgoMSAvKiBBcnJheSAqLyk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVVMzJBc1VsZWIxMjgoYXJndW1lbnQubGVuZ3RoKTtcbiAgICBmb3IgKGNvbnN0IHN1YkFyZ3VtZW50IG9mIGFyZ3VtZW50KSB7XG4gICAgICBzZXJpYWxpemVFbnRyeUZ1bmN0aW9uQXJndW1lbnQoc2VyaWFsaXplciwgc3ViQXJndW1lbnQpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHR5cGVvZiBhcmd1bWVudCA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgYXJndW1lbnQgPT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIGFyZ3VtZW50ID09PSBcImJvb2xlYW5cIiB8fCB0eXBlb2YgYXJndW1lbnQgPT09IFwiYmlnaW50XCIpIHtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOCgyIC8qIFN0cmluZyAqLyk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVTdHIoYXJndW1lbnQudG9TdHJpbmcoKSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChhcmd1bWVudCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOCgzIC8qIFVpbnQ4QXJyYXkgKi8pO1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplQnl0ZXMoYXJndW1lbnQpO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoYXJndW1lbnQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KDMgLyogVWludDhBcnJheSAqLyk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVCeXRlcyhuZXcgVWludDhBcnJheShhcmd1bWVudCkpO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoXCJ2YWx1ZXNcIiBpbiBhcmd1bWVudCkge1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KDEgLyogQXJyYXkgKi8pO1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KGFyZ3VtZW50LnZhbHVlcy5sZW5ndGgpO1xuICAgIGZvciAoY29uc3Qgc3ViQXJndW1lbnQgb2YgYXJndW1lbnQudmFsdWVzKSB7XG4gICAgICBzZXJpYWxpemVFbnRyeUZ1bmN0aW9uQXJndW1lbnQoc2VyaWFsaXplciwgc3ViQXJndW1lbnQpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKFwiZGF0YVwiIGluIGFyZ3VtZW50KSB7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVVMzJBc1VsZWIxMjgoNCAvKiBBY2NvdW50QWRkcmVzcyAqLyk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemUoYXJndW1lbnQpO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoYXJndW1lbnQudmFsdWUgPT09IHZvaWQgMCkge1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KDAgLyogVW5kZWZpbmVkICovKTtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZShhcmd1bWVudCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChhcmd1bWVudC52YWx1ZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOCg1IC8qIEZpeGVkQnl0ZXMgKi8pO1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplQnl0ZXMoYXJndW1lbnQudmFsdWUpO1xuICAgIHJldHVybjtcbiAgfVxuICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOCgyIC8qIFN0cmluZyAqLyk7XG4gIHNlcmlhbGl6ZXIuc2VyaWFsaXplU3RyKGFyZ3VtZW50LnZhbHVlLnRvU3RyaW5nKCkpO1xufVxuZnVuY3Rpb24gZGVzZXJpYWxpemVFbnRyeUZ1bmN0aW9uQXJndW1lbnQoZGVzZXJpYWxpemVyKSB7XG4gIGNvbnN0IHZhcmlhbnQgPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVVbGViMTI4QXNVMzIoKTtcbiAgc3dpdGNoICh2YXJpYW50KSB7XG4gICAgY2FzZSAwIC8qIFVuZGVmaW5lZCAqLzoge1xuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9XG4gICAgY2FzZSAxIC8qIEFycmF5ICovOiB7XG4gICAgICBjb25zdCBsZW5ndGggPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVVbGViMTI4QXNVMzIoKTtcbiAgICAgIGNvbnN0IGFyZ3MgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgY29uc3QgYXJndW1lbnQgPSBkZXNlcmlhbGl6ZUVudHJ5RnVuY3Rpb25Bcmd1bWVudChkZXNlcmlhbGl6ZXIpO1xuICAgICAgICBhcmdzLnB1c2goYXJndW1lbnQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFyZ3M7XG4gICAgfVxuICAgIGNhc2UgMyAvKiBVaW50OEFycmF5ICovOiB7XG4gICAgICByZXR1cm4gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplQnl0ZXMoKTtcbiAgICB9XG4gICAgY2FzZSA0IC8qIEFjY291bnRBZGRyZXNzICovOiB7XG4gICAgICByZXR1cm4gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplKEFjY291bnRBZGRyZXNzNCk7XG4gICAgfVxuICAgIGNhc2UgMiAvKiBTdHJpbmcgKi86IHtcbiAgICAgIHJldHVybiBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVTdHIoKTtcbiAgICB9XG4gICAgY2FzZSA1IC8qIEZpeGVkQnl0ZXMgKi86IHtcbiAgICAgIGNvbnN0IGJ5dGVzID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplQnl0ZXMoKTtcbiAgICAgIHJldHVybiBuZXcgRml4ZWRCeXRlcyhieXRlcyk7XG4gICAgfVxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgdmFyaWFudFwiKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gc3JjL3NoYXJlZC9TaWduYXR1cmUudHNcbmltcG9ydCB7XG4gIEFueVNpZ25hdHVyZSxcbiAgRWQyNTUxOVNpZ25hdHVyZSxcbiAgTXVsdGlFZDI1NTE5U2lnbmF0dXJlLFxuICBTaWduaW5nU2NoZW1lIGFzIFNpZ25pbmdTY2hlbWUyXG59IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbmZ1bmN0aW9uIHNlcmlhbGl6ZVNpZ25hdHVyZShzZXJpYWxpemVyLCB2YWx1ZSkge1xuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBFZDI1NTE5U2lnbmF0dXJlKSB7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVVMzJBc1VsZWIxMjgoU2lnbmluZ1NjaGVtZTIuRWQyNTUxOSk7XG4gIH0gZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBNdWx0aUVkMjU1MTlTaWduYXR1cmUpIHtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOChTaWduaW5nU2NoZW1lMi5NdWx0aUVkMjU1MTkpO1xuICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgQW55U2lnbmF0dXJlKSB7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVVMzJBc1VsZWIxMjgoU2lnbmluZ1NjaGVtZTIuU2luZ2xlS2V5KTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIHNpZ25hdHVyZSB0eXBlXCIpO1xuICB9XG4gIHNlcmlhbGl6ZXIuc2VyaWFsaXplKHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGRlc2VyaWFsaXplU2lnbmF0dXJlKGRlc2VyaWFsaXplcikge1xuICBjb25zdCBzaWduaW5nU2NoZW1lID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplVWxlYjEyOEFzVTMyKCk7XG4gIHN3aXRjaCAoc2lnbmluZ1NjaGVtZSkge1xuICAgIGNhc2UgU2lnbmluZ1NjaGVtZTIuRWQyNTUxOTpcbiAgICAgIHJldHVybiBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoRWQyNTUxOVNpZ25hdHVyZSk7XG4gICAgY2FzZSBTaWduaW5nU2NoZW1lMi5NdWx0aUVkMjU1MTk6XG4gICAgICByZXR1cm4gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplKE11bHRpRWQyNTUxOVNpZ25hdHVyZSk7XG4gICAgY2FzZSBTaWduaW5nU2NoZW1lMi5TaW5nbGVLZXk6XG4gICAgICByZXR1cm4gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplKEFueVNpZ25hdHVyZSk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBzaWduaW5nIHNjaGVtZTogJHtzaWduaW5nU2NoZW1lfWApO1xuICB9XG59XG5cbi8vIHNyYy9zaGFyZWQvVHJhbnNhY3Rpb25QYXlsb2FkSW5wdXQudHNcbmltcG9ydCB7XG4gIEFjY291bnRBZGRyZXNzIGFzIEFjY291bnRBZGRyZXNzNSxcbiAgZGVzZXJpYWxpemVGcm9tU2NyaXB0QXJndW1lbnQsXG4gIEhleCxcbiAgcGFyc2VUeXBlVGFnLFxuICBUeXBlVGFnXG59IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbnZhciBUcmFuc2FjdGlvblBheWxvYWRJbnB1dFZhcmlhbnQgPSAvKiBAX19QVVJFX18gKi8gKChUcmFuc2FjdGlvblBheWxvYWRJbnB1dFZhcmlhbnQyKSA9PiB7XG4gIFRyYW5zYWN0aW9uUGF5bG9hZElucHV0VmFyaWFudDJbVHJhbnNhY3Rpb25QYXlsb2FkSW5wdXRWYXJpYW50MltcIkVudHJ5RnVuY3Rpb25cIl0gPSAwXSA9IFwiRW50cnlGdW5jdGlvblwiO1xuICBUcmFuc2FjdGlvblBheWxvYWRJbnB1dFZhcmlhbnQyW1RyYW5zYWN0aW9uUGF5bG9hZElucHV0VmFyaWFudDJbXCJTY3JpcHRcIl0gPSAxXSA9IFwiU2NyaXB0XCI7XG4gIFRyYW5zYWN0aW9uUGF5bG9hZElucHV0VmFyaWFudDJbVHJhbnNhY3Rpb25QYXlsb2FkSW5wdXRWYXJpYW50MltcIk11bHRpc2lnXCJdID0gMl0gPSBcIk11bHRpc2lnXCI7XG4gIHJldHVybiBUcmFuc2FjdGlvblBheWxvYWRJbnB1dFZhcmlhbnQyO1xufSkoVHJhbnNhY3Rpb25QYXlsb2FkSW5wdXRWYXJpYW50IHx8IHt9KTtcbmZ1bmN0aW9uIHNlcmlhbGl6ZVR5cGVBcmd1bWVudHMoc2VyaWFsaXplciwgdHlwZUFyZ3VtZW50cykge1xuICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOCh0eXBlQXJndW1lbnRzLmxlbmd0aCk7XG4gIGZvciAoY29uc3QgdHlwZUFyZ3VtZW50IG9mIHR5cGVBcmd1bWVudHMpIHtcbiAgICBjb25zdCB0eXBlVGFnID0gdHlwZW9mIHR5cGVBcmd1bWVudCA9PT0gXCJzdHJpbmdcIiA/IHBhcnNlVHlwZVRhZyh0eXBlQXJndW1lbnQsIHsgYWxsb3dHZW5lcmljczogdHJ1ZSB9KSA6IHR5cGVBcmd1bWVudDtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZSh0eXBlVGFnKTtcbiAgfVxufVxuZnVuY3Rpb24gZGVzZXJpYWxpemVUeXBlQXJndW1lbnRzKGRlc2VyaWFsaXplcikge1xuICBjb25zdCB0eXBlQXJndW1lbnRzID0gW107XG4gIGNvbnN0IHR5cGVBcmd1bWVudHNMZW5ndGggPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVVbGViMTI4QXNVMzIoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0eXBlQXJndW1lbnRzTGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCB0eXBlVGFnID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplKFR5cGVUYWcpO1xuICAgIHR5cGVBcmd1bWVudHMucHVzaCh0eXBlVGFnKTtcbiAgfVxuICByZXR1cm4gdHlwZUFyZ3VtZW50cztcbn1cbmZ1bmN0aW9uIHNlcmlhbGl6ZUVudHJ5RnVuY3Rpb25Bcmd1bWVudHMoc2VyaWFsaXplciwgZnVuY3Rpb25Bcmd1bWVudHMpIHtcbiAgc2VyaWFsaXplci5zZXJpYWxpemVVMzJBc1VsZWIxMjgoZnVuY3Rpb25Bcmd1bWVudHMubGVuZ3RoKTtcbiAgZm9yIChjb25zdCBmdW5jdGlvbkFyZ3VtZW50IG9mIGZ1bmN0aW9uQXJndW1lbnRzKSB7XG4gICAgc2VyaWFsaXplRW50cnlGdW5jdGlvbkFyZ3VtZW50KHNlcmlhbGl6ZXIsIGZ1bmN0aW9uQXJndW1lbnQpO1xuICB9XG59XG5mdW5jdGlvbiBkZXNlcmlhbGl6ZUVudHJ5RnVuY3Rpb25Bcmd1bWVudHMoZGVzZXJpYWxpemVyKSB7XG4gIGNvbnN0IGZ1bmN0aW9uQXJndW1lbnRzTGVuZ3RoID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplVWxlYjEyOEFzVTMyKCk7XG4gIGNvbnN0IGZ1bmN0aW9uQXJndW1lbnRzID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZnVuY3Rpb25Bcmd1bWVudHNMZW5ndGg7IGkgKz0gMSkge1xuICAgIGNvbnN0IGZ1bmN0aW9uQXJndW1lbnQgPSBkZXNlcmlhbGl6ZUVudHJ5RnVuY3Rpb25Bcmd1bWVudChkZXNlcmlhbGl6ZXIpO1xuICAgIGZ1bmN0aW9uQXJndW1lbnRzLnB1c2goZnVuY3Rpb25Bcmd1bWVudCk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uQXJndW1lbnRzO1xufVxuZnVuY3Rpb24gc2VyaWFsaXplVHJhbnNhY3Rpb25QYXlsb2FkSW5wdXQoc2VyaWFsaXplciwgdmFsdWUpIHtcbiAgaWYgKFwibXVsdGlzaWdBZGRyZXNzXCIgaW4gdmFsdWUpIHtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOCgyIC8qIE11bHRpc2lnICovKTtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVN0cih2YWx1ZS5mdW5jdGlvbik7XG4gICAgc2VyaWFsaXplRW50cnlGdW5jdGlvbkFyZ3VtZW50cyhzZXJpYWxpemVyLCB2YWx1ZS5mdW5jdGlvbkFyZ3VtZW50cyk7XG4gICAgc2VyaWFsaXplVHlwZUFyZ3VtZW50cyhzZXJpYWxpemVyLCB2YWx1ZS50eXBlQXJndW1lbnRzID8/IFtdKTtcbiAgICBjb25zdCBtdWx0aXNpZ0FkZHJlc3MgPSBBY2NvdW50QWRkcmVzczUuZnJvbSh2YWx1ZS5tdWx0aXNpZ0FkZHJlc3MpO1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplKG11bHRpc2lnQWRkcmVzcyk7XG4gIH0gZWxzZSBpZiAoXCJmdW5jdGlvblwiIGluIHZhbHVlKSB7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVVMzJBc1VsZWIxMjgoMCAvKiBFbnRyeUZ1bmN0aW9uICovKTtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVN0cih2YWx1ZS5mdW5jdGlvbik7XG4gICAgc2VyaWFsaXplRW50cnlGdW5jdGlvbkFyZ3VtZW50cyhzZXJpYWxpemVyLCB2YWx1ZS5mdW5jdGlvbkFyZ3VtZW50cyk7XG4gICAgc2VyaWFsaXplVHlwZUFyZ3VtZW50cyhzZXJpYWxpemVyLCB2YWx1ZS50eXBlQXJndW1lbnRzID8/IFtdKTtcbiAgfSBlbHNlIHtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOCgxIC8qIFNjcmlwdCAqLyk7XG4gICAgY29uc3QgYnl0ZWNvZGUgPSBIZXguZnJvbUhleElucHV0KHZhbHVlLmJ5dGVjb2RlKTtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZUJ5dGVzKGJ5dGVjb2RlLnRvVWludDhBcnJheSgpKTtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOCh2YWx1ZS5mdW5jdGlvbkFyZ3VtZW50cy5sZW5ndGgpO1xuICAgIGZvciAoY29uc3QgYXJndW1lbnQgb2YgdmFsdWUuZnVuY3Rpb25Bcmd1bWVudHMpIHtcbiAgICAgIGFyZ3VtZW50LnNlcmlhbGl6ZUZvclNjcmlwdEZ1bmN0aW9uKHNlcmlhbGl6ZXIpO1xuICAgIH1cbiAgICBzZXJpYWxpemVUeXBlQXJndW1lbnRzKHNlcmlhbGl6ZXIsIHZhbHVlLnR5cGVBcmd1bWVudHMgPz8gW10pO1xuICB9XG59XG5mdW5jdGlvbiBkZXNlcmlhbGl6ZVRyYW5zYWN0aW9uUGF5bG9hZElucHV0KGRlc2VyaWFsaXplcikge1xuICBjb25zdCB2YXJpYW50ID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplVWxlYjEyOEFzVTMyKCk7XG4gIHN3aXRjaCAodmFyaWFudCkge1xuICAgIGNhc2UgMiAvKiBNdWx0aXNpZyAqLzoge1xuICAgICAgY29uc3QgZnVuY3Rpb25JZCA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVN0cigpO1xuICAgICAgY29uc3QgZnVuY3Rpb25Bcmd1bWVudHMgPSBkZXNlcmlhbGl6ZUVudHJ5RnVuY3Rpb25Bcmd1bWVudHMoZGVzZXJpYWxpemVyKTtcbiAgICAgIGNvbnN0IHR5cGVBcmd1bWVudHMgPSBkZXNlcmlhbGl6ZVR5cGVBcmd1bWVudHMoZGVzZXJpYWxpemVyKTtcbiAgICAgIGNvbnN0IG11bHRpc2lnQWRkcmVzcyA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZShBY2NvdW50QWRkcmVzczUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZnVuY3Rpb246IGZ1bmN0aW9uSWQsXG4gICAgICAgIGZ1bmN0aW9uQXJndW1lbnRzLFxuICAgICAgICBtdWx0aXNpZ0FkZHJlc3MsXG4gICAgICAgIHR5cGVBcmd1bWVudHNcbiAgICAgIH07XG4gICAgfVxuICAgIGNhc2UgMCAvKiBFbnRyeUZ1bmN0aW9uICovOiB7XG4gICAgICBjb25zdCBmdW5jdGlvbklkID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplU3RyKCk7XG4gICAgICBjb25zdCBmdW5jdGlvbkFyZ3VtZW50cyA9IGRlc2VyaWFsaXplRW50cnlGdW5jdGlvbkFyZ3VtZW50cyhkZXNlcmlhbGl6ZXIpO1xuICAgICAgY29uc3QgdHlwZUFyZ3VtZW50cyA9IGRlc2VyaWFsaXplVHlwZUFyZ3VtZW50cyhkZXNlcmlhbGl6ZXIpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZnVuY3Rpb246IGZ1bmN0aW9uSWQsXG4gICAgICAgIGZ1bmN0aW9uQXJndW1lbnRzLFxuICAgICAgICB0eXBlQXJndW1lbnRzXG4gICAgICB9O1xuICAgIH1cbiAgICBjYXNlIDEgLyogU2NyaXB0ICovOiB7XG4gICAgICBjb25zdCBieXRlY29kZSA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZUJ5dGVzKCk7XG4gICAgICBjb25zdCBmdW5jdGlvbkFyZ3VtZW50c0xlbmd0aCA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVVsZWIxMjhBc1UzMigpO1xuICAgICAgY29uc3QgZnVuY3Rpb25Bcmd1bWVudHMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZnVuY3Rpb25Bcmd1bWVudHNMZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBhcmd1bWVudCA9IGRlc2VyaWFsaXplRnJvbVNjcmlwdEFyZ3VtZW50KGRlc2VyaWFsaXplcik7XG4gICAgICAgIGZ1bmN0aW9uQXJndW1lbnRzLnB1c2goYXJndW1lbnQpO1xuICAgICAgfVxuICAgICAgY29uc3QgdHlwZUFyZ3VtZW50cyA9IGRlc2VyaWFsaXplVHlwZUFyZ3VtZW50cyhkZXNlcmlhbGl6ZXIpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYnl0ZWNvZGUsXG4gICAgICAgIGZ1bmN0aW9uQXJndW1lbnRzLFxuICAgICAgICB0eXBlQXJndW1lbnRzXG4gICAgICB9O1xuICAgIH1cbiAgICBkZWZhdWx0OiB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIHZhcmlhbnRcIik7XG4gICAgfVxuICB9XG59XG5cbi8vIHNyYy9XYWxsZXRSZXF1ZXN0LnRzXG5mdW5jdGlvbiBzZXJpYWxpemVXYWxsZXRSZXF1ZXN0KHtcbiAgZGFwcEluZm8sXG4gIG5hbWUsXG4gIHZlcnNpb25cbn0pIHtcbiAgY29uc3Qgc2VyaWFsaXplciA9IG5ldyBTZXJpYWxpemVyOSgpO1xuICBzZXJpYWxpemVEYXBwSW5mbyhzZXJpYWxpemVyLCBkYXBwSW5mbyk7XG4gIGNvbnN0IGRhdGEgPSBzZXJpYWxpemVyLnRvVWludDhBcnJheSgpO1xuICByZXR1cm4geyBkYXRhLCBuYW1lLCB2ZXJzaW9uIH07XG59XG5mdW5jdGlvbiBkZXNlcmlhbGl6ZVdhbGxldFJlcXVlc3Qoe1xuICBkYXRhLFxuICBuYW1lLFxuICB2ZXJzaW9uXG59KSB7XG4gIGNvbnN0IGRlc2VyaWFsaXplciA9IG5ldyBEZXNlcmlhbGl6ZXI5KGRhdGEpO1xuICBjb25zdCBkYXBwSW5mbyA9IGRlc2VyaWFsaXplRGFwcEluZm8oZGVzZXJpYWxpemVyKTtcbiAgcmV0dXJuIHsgZGFwcEluZm8sIG5hbWUsIHZlcnNpb24gfTtcbn1cbmZ1bmN0aW9uIHNlcmlhbGl6ZVdhbGxldFJlcXVlc3RXaXRoQXJncyh7IGFyZ3MsIGRhcHBJbmZvLCBuYW1lLCB2ZXJzaW9uIH0sIHNlcmlhbGl6ZUFyZ3NGbikge1xuICBjb25zdCBzZXJpYWxpemVyID0gbmV3IFNlcmlhbGl6ZXI5KCk7XG4gIHNlcmlhbGl6ZURhcHBJbmZvKHNlcmlhbGl6ZXIsIGRhcHBJbmZvKTtcbiAgc2VyaWFsaXplQXJnc0ZuKHNlcmlhbGl6ZXIsIGFyZ3MpO1xuICBjb25zdCBkYXRhID0gc2VyaWFsaXplci50b1VpbnQ4QXJyYXkoKTtcbiAgcmV0dXJuIHsgZGF0YSwgbmFtZSwgdmVyc2lvbiB9O1xufVxuZnVuY3Rpb24gZGVzZXJpYWxpemVXYWxsZXRSZXF1ZXN0V2l0aEFyZ3MoeyBkYXRhLCBuYW1lLCB2ZXJzaW9uIH0sIGRlc2VyaWFsaXplQXJnc0ZuKSB7XG4gIGNvbnN0IGRlc2VyaWFsaXplciA9IG5ldyBEZXNlcmlhbGl6ZXI5KGRhdGEpO1xuICBjb25zdCBkYXBwSW5mbyA9IGRlc2VyaWFsaXplRGFwcEluZm8oZGVzZXJpYWxpemVyKTtcbiAgY29uc3QgYXJncyA9IGRlc2VyaWFsaXplQXJnc0ZuKGRlc2VyaWFsaXplcik7XG4gIHJldHVybiB7IGFyZ3MsIGRhcHBJbmZvLCBuYW1lLCB2ZXJzaW9uIH07XG59XG5cbi8vIHNyYy9mZWF0dXJlcy9jb25uZWN0L3JlcXVlc3QudHNcbnZhciBDb25uZWN0UmVxdWVzdDtcbigoQ29ubmVjdFJlcXVlc3QyKSA9PiB7XG4gIENvbm5lY3RSZXF1ZXN0Mi5uYW1lID0gXCJjb25uZWN0XCI7XG4gIENvbm5lY3RSZXF1ZXN0Mi5zdXBwb3J0ZWRWZXJzaW9ucyA9IFsxLCAyXTtcbiAgQ29ubmVjdFJlcXVlc3QyLmN1cnJlbnRWZXJzaW9uID0gMjtcbiAgZnVuY3Rpb24gc2VyaWFsaXplQXJncyhzZXJpYWxpemVyLCB2YWx1ZSkge1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplT3B0aW9uU3RyKHZhbHVlLmRhcHBJZCk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVPcHRpb25TdHIodmFsdWUuZGFwcEVkMjU1MTlQdWJsaWNLZXlCNjQpO1xuICB9XG4gIENvbm5lY3RSZXF1ZXN0Mi5zZXJpYWxpemVBcmdzID0gc2VyaWFsaXplQXJncztcbiAgZnVuY3Rpb24gZGVzZXJpYWxpemVBcmdzKGRlc2VyaWFsaXplciwgdmVyc2lvbikge1xuICAgIGlmICh2ZXJzaW9uID09PSAxKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIGNvbnN0IGRhcHBJZCA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZU9wdGlvblN0cigpO1xuICAgIGNvbnN0IGRhcHBFZDI1NTE5UHVibGljS2V5QjY0ID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplT3B0aW9uU3RyKCk7XG4gICAgcmV0dXJuIHsgZGFwcEVkMjU1MTlQdWJsaWNLZXlCNjQsIGRhcHBJZCB9O1xuICB9XG4gIENvbm5lY3RSZXF1ZXN0Mi5kZXNlcmlhbGl6ZUFyZ3MgPSBkZXNlcmlhbGl6ZUFyZ3M7XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZShkYXBwSW5mbywgYXJncyA9IHt9KSB7XG4gICAgcmV0dXJuIHNlcmlhbGl6ZVdhbGxldFJlcXVlc3RXaXRoQXJncyh7IGFyZ3MsIGRhcHBJbmZvLCBuYW1lOiBDb25uZWN0UmVxdWVzdDIubmFtZSwgdmVyc2lvbjogQ29ubmVjdFJlcXVlc3QyLmN1cnJlbnRWZXJzaW9uIH0sIHNlcmlhbGl6ZUFyZ3MpO1xuICB9XG4gIENvbm5lY3RSZXF1ZXN0Mi5zZXJpYWxpemUgPSBzZXJpYWxpemU7XG4gIGZ1bmN0aW9uIGRlc2VyaWFsaXplKHJlcXVlc3QpIHtcbiAgICByZXR1cm4gZGVzZXJpYWxpemVXYWxsZXRSZXF1ZXN0V2l0aEFyZ3MocmVxdWVzdCwgKGQpID0+IGRlc2VyaWFsaXplQXJncyhkLCByZXF1ZXN0LnZlcnNpb24pKTtcbiAgfVxuICBDb25uZWN0UmVxdWVzdDIuZGVzZXJpYWxpemUgPSBkZXNlcmlhbGl6ZTtcbiAgZnVuY3Rpb24gaXNTZXJpYWxpemVkKHJlcXVlc3QpIHtcbiAgICByZXR1cm4gcmVxdWVzdC5uYW1lID09PSBDb25uZWN0UmVxdWVzdDIubmFtZSAmJiBDb25uZWN0UmVxdWVzdDIuc3VwcG9ydGVkVmVyc2lvbnMuaW5jbHVkZXMocmVxdWVzdC52ZXJzaW9uKTtcbiAgfVxuICBDb25uZWN0UmVxdWVzdDIuaXNTZXJpYWxpemVkID0gaXNTZXJpYWxpemVkO1xufSkoQ29ubmVjdFJlcXVlc3QgfHwgKENvbm5lY3RSZXF1ZXN0ID0ge30pKTtcblxuLy8gc3JjL1VzZXJSZXNwb25zZS50c1xuZnVuY3Rpb24gbWFrZVVzZXJBcHByb3ZhbChhcmdzKSB7XG4gIHJldHVybiB7IGFyZ3MsIHN0YXR1czogXCJhcHByb3ZlZFwiIH07XG59XG5mdW5jdGlvbiBtYWtlVXNlclJlc3BvbnNlU2VyaWFsaXplRm4oc2VyaWFsaXplQXJncykge1xuICByZXR1cm4gKHNlcmlhbGl6ZXIsIHZhbHVlKSA9PiB7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVCb29sKHZhbHVlLnN0YXR1cyA9PT0gXCJhcHByb3ZlZFwiKTtcbiAgICBpZiAodmFsdWUuc3RhdHVzID09PSBcImFwcHJvdmVkXCIpIHtcbiAgICAgIHNlcmlhbGl6ZUFyZ3Moc2VyaWFsaXplciwgdmFsdWUuYXJncyk7XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gbWFrZVVzZXJSZXNwb25zZURlc2VyaWFsaXplRm4oZGVzZXJpYWxpemVBcmdzKSB7XG4gIHJldHVybiAoZGVzZXJpYWxpemVyKSA9PiB7XG4gICAgY29uc3QgaXNBcHByb3ZlZCA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZUJvb2woKTtcbiAgICByZXR1cm4gaXNBcHByb3ZlZCA/IHsgYXJnczogZGVzZXJpYWxpemVBcmdzKGRlc2VyaWFsaXplciksIHN0YXR1czogXCJhcHByb3ZlZFwiIH0gOiB7IHN0YXR1czogXCJkaXNtaXNzZWRcIiB9O1xuICB9O1xufVxuXG4vLyBzcmMvV2FsbGV0UmVzcG9uc2UudHNcbmltcG9ydCB7IERlc2VyaWFsaXplciBhcyBEZXNlcmlhbGl6ZXIxMCwgU2VyaWFsaXplciBhcyBTZXJpYWxpemVyMTAgfSBmcm9tIFwiQGFwdG9zLWxhYnMvdHMtc2RrXCI7XG5mdW5jdGlvbiBzZXJpYWxpemVXYWxsZXRSZXNwb25zZShhcmdzLCBzZXJpYWxpemVGbikge1xuICBjb25zdCBzZXJpYWxpemVyID0gbmV3IFNlcmlhbGl6ZXIxMCgpO1xuICBzZXJpYWxpemVGbihzZXJpYWxpemVyLCBhcmdzKTtcbiAgY29uc3QgZGF0YSA9IHNlcmlhbGl6ZXIudG9VaW50OEFycmF5KCk7XG4gIHJldHVybiB7IGRhdGEgfTtcbn1cbmZ1bmN0aW9uIGRlc2VyaWFsaXplV2FsbGV0UmVzcG9uc2UoeyBkYXRhIH0sIGRlc2VyaWFsaXplRm4pIHtcbiAgY29uc3QgZGVzZXJpYWxpemVyID0gbmV3IERlc2VyaWFsaXplcjEwKGRhdGEpO1xuICBjb25zdCBhcmdzID0gZGVzZXJpYWxpemVGbihkZXNlcmlhbGl6ZXIpO1xuICByZXR1cm4geyBhcmdzIH07XG59XG5cbi8vIHNyYy9mZWF0dXJlcy9jb25uZWN0L3Jlc3BvbnNlLnRzXG52YXIgQ29ubmVjdFJlc3BvbnNlO1xuKChDb25uZWN0UmVzcG9uc2UyKSA9PiB7XG4gIENvbm5lY3RSZXNwb25zZTIuc3VwcG9ydGVkVmVyc2lvbnMgPSBbMSwgMl07XG4gIENvbm5lY3RSZXNwb25zZTIuY3VycmVudFZlcnNpb24gPSAyO1xuICBmdW5jdGlvbiBzZXJpYWxpemVBcHByb3ZhbEFyZ3NWMShzZXJpYWxpemVyLCB2YWx1ZSkge1xuICAgIHNlcmlhbGl6ZUFjY291bnRJbmZvKHNlcmlhbGl6ZXIsIHZhbHVlLmFjY291bnQpO1xuICB9XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZUFwcHJvdmFsQXJncyhzZXJpYWxpemVyLCB2YWx1ZSkge1xuICAgIHNlcmlhbGl6ZUFjY291bnRJbmZvKHNlcmlhbGl6ZXIsIHZhbHVlLmFjY291bnQpO1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplT3B0aW9uU3RyKHZhbHVlLnBhaXJpbmcgIT09IHZvaWQgMCA/IEpTT04uc3RyaW5naWZ5KHZhbHVlLnBhaXJpbmcpIDogdm9pZCAwKTtcbiAgfVxuICBmdW5jdGlvbiBkZXNlcmlhbGl6ZUFwcHJvdmFsQXJncyhkZXNlcmlhbGl6ZXIpIHtcbiAgICBjb25zdCBhY2NvdW50ID0gZGVzZXJpYWxpemVBY2NvdW50SW5mbyhkZXNlcmlhbGl6ZXIpO1xuICAgIGNvbnN0IHNlcmlhbGl6ZWRQYWlyaW5nID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplT3B0aW9uU3RyKCk7XG4gICAgY29uc3QgcGFpcmluZyA9IHNlcmlhbGl6ZWRQYWlyaW5nICE9PSB2b2lkIDAgPyBKU09OLnBhcnNlKHNlcmlhbGl6ZWRQYWlyaW5nKSA6IHZvaWQgMDtcbiAgICByZXR1cm4geyBhY2NvdW50LCBwYWlyaW5nIH07XG4gIH1cbiAgY29uc3Qgc2VyaWFsaXplQXJnc1YxID0gbWFrZVVzZXJSZXNwb25zZVNlcmlhbGl6ZUZuKHNlcmlhbGl6ZUFwcHJvdmFsQXJnc1YxKTtcbiAgY29uc3Qgc2VyaWFsaXplQXJncyA9IG1ha2VVc2VyUmVzcG9uc2VTZXJpYWxpemVGbihzZXJpYWxpemVBcHByb3ZhbEFyZ3MpO1xuICBjb25zdCBkZXNlcmlhbGl6ZUFyZ3MgPSBtYWtlVXNlclJlc3BvbnNlRGVzZXJpYWxpemVGbihkZXNlcmlhbGl6ZUFwcHJvdmFsQXJncyk7XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZShhcmdzLCB2ZXJzaW9uID0gQ29ubmVjdFJlc3BvbnNlMi5jdXJyZW50VmVyc2lvbikge1xuICAgIHJldHVybiBzZXJpYWxpemVXYWxsZXRSZXNwb25zZShhcmdzLCB2ZXJzaW9uID09PSAxID8gc2VyaWFsaXplQXJnc1YxIDogc2VyaWFsaXplQXJncyk7XG4gIH1cbiAgQ29ubmVjdFJlc3BvbnNlMi5zZXJpYWxpemUgPSBzZXJpYWxpemU7XG4gIGZ1bmN0aW9uIGRlc2VyaWFsaXplKHNlcmlhbGl6ZWRSZXNwb25zZSkge1xuICAgIHJldHVybiBkZXNlcmlhbGl6ZVdhbGxldFJlc3BvbnNlKHNlcmlhbGl6ZWRSZXNwb25zZSwgZGVzZXJpYWxpemVBcmdzKTtcbiAgfVxuICBDb25uZWN0UmVzcG9uc2UyLmRlc2VyaWFsaXplID0gZGVzZXJpYWxpemU7XG59KShDb25uZWN0UmVzcG9uc2UgfHwgKENvbm5lY3RSZXNwb25zZSA9IHt9KSk7XG5cbi8vIHNyYy9mZWF0dXJlcy9kaXNjb25uZWN0L3JlcXVlc3QudHNcbnZhciBEaXNjb25uZWN0UmVxdWVzdDtcbigoRGlzY29ubmVjdFJlcXVlc3QyKSA9PiB7XG4gIERpc2Nvbm5lY3RSZXF1ZXN0Mi5uYW1lID0gXCJkaXNjb25uZWN0XCI7XG4gIERpc2Nvbm5lY3RSZXF1ZXN0Mi5jdXJyZW50VmVyc2lvbiA9IDE7XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZShkYXBwSW5mbykge1xuICAgIHJldHVybiBzZXJpYWxpemVXYWxsZXRSZXF1ZXN0KHsgZGFwcEluZm8sIG5hbWU6IERpc2Nvbm5lY3RSZXF1ZXN0Mi5uYW1lLCB2ZXJzaW9uOiBEaXNjb25uZWN0UmVxdWVzdDIuY3VycmVudFZlcnNpb24gfSk7XG4gIH1cbiAgRGlzY29ubmVjdFJlcXVlc3QyLnNlcmlhbGl6ZSA9IHNlcmlhbGl6ZTtcbiAgZnVuY3Rpb24gZGVzZXJpYWxpemUocmVxdWVzdCkge1xuICAgIHJldHVybiBkZXNlcmlhbGl6ZVdhbGxldFJlcXVlc3QocmVxdWVzdCk7XG4gIH1cbiAgRGlzY29ubmVjdFJlcXVlc3QyLmRlc2VyaWFsaXplID0gZGVzZXJpYWxpemU7XG4gIGZ1bmN0aW9uIGlzU2VyaWFsaXplZChyZXF1ZXN0KSB7XG4gICAgcmV0dXJuIHJlcXVlc3QubmFtZSA9PT0gRGlzY29ubmVjdFJlcXVlc3QyLm5hbWUgJiYgcmVxdWVzdC52ZXJzaW9uID09PSBEaXNjb25uZWN0UmVxdWVzdDIuY3VycmVudFZlcnNpb247XG4gIH1cbiAgRGlzY29ubmVjdFJlcXVlc3QyLmlzU2VyaWFsaXplZCA9IGlzU2VyaWFsaXplZDtcbn0pKERpc2Nvbm5lY3RSZXF1ZXN0IHx8IChEaXNjb25uZWN0UmVxdWVzdCA9IHt9KSk7XG5cbi8vIHNyYy9mZWF0dXJlcy9kaXNjb25uZWN0L3Jlc3BvbnNlLnRzXG52YXIgRGlzY29ubmVjdFJlc3BvbnNlO1xuKChEaXNjb25uZWN0UmVzcG9uc2UyKSA9PiB7XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZShhcmdzKSB7XG4gICAgcmV0dXJuIHNlcmlhbGl6ZVdhbGxldFJlc3BvbnNlKGFyZ3MsICgpID0+IHtcbiAgICB9KTtcbiAgfVxuICBEaXNjb25uZWN0UmVzcG9uc2UyLnNlcmlhbGl6ZSA9IHNlcmlhbGl6ZTtcbiAgZnVuY3Rpb24gZGVzZXJpYWxpemUoc2VyaWFsaXplZFJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIGRlc2VyaWFsaXplV2FsbGV0UmVzcG9uc2Uoc2VyaWFsaXplZFJlc3BvbnNlLCAoKSA9PiAoe30pKTtcbiAgfVxuICBEaXNjb25uZWN0UmVzcG9uc2UyLmRlc2VyaWFsaXplID0gZGVzZXJpYWxpemU7XG59KShEaXNjb25uZWN0UmVzcG9uc2UgfHwgKERpc2Nvbm5lY3RSZXNwb25zZSA9IHt9KSk7XG5cbi8vIHNyYy9mZWF0dXJlcy9nZXRDb25uZWN0ZWRBY2NvdW50cy9yZXF1ZXN0LnRzXG52YXIgR2V0Q29ubmVjdGVkQWNjb3VudHNSZXF1ZXN0O1xuKChHZXRDb25uZWN0ZWRBY2NvdW50c1JlcXVlc3QyKSA9PiB7XG4gIEdldENvbm5lY3RlZEFjY291bnRzUmVxdWVzdDIubmFtZSA9IFwiZ2V0Q29ubmVjdGVkQWNjb3VudHNcIjtcbiAgR2V0Q29ubmVjdGVkQWNjb3VudHNSZXF1ZXN0Mi5jdXJyZW50VmVyc2lvbiA9IDE7XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZShkYXBwSW5mbykge1xuICAgIHJldHVybiBzZXJpYWxpemVXYWxsZXRSZXF1ZXN0KHsgZGFwcEluZm8sIG5hbWU6IEdldENvbm5lY3RlZEFjY291bnRzUmVxdWVzdDIubmFtZSwgdmVyc2lvbjogR2V0Q29ubmVjdGVkQWNjb3VudHNSZXF1ZXN0Mi5jdXJyZW50VmVyc2lvbiB9KTtcbiAgfVxuICBHZXRDb25uZWN0ZWRBY2NvdW50c1JlcXVlc3QyLnNlcmlhbGl6ZSA9IHNlcmlhbGl6ZTtcbiAgZnVuY3Rpb24gZGVzZXJpYWxpemUocmVxdWVzdCkge1xuICAgIHJldHVybiBkZXNlcmlhbGl6ZVdhbGxldFJlcXVlc3QocmVxdWVzdCk7XG4gIH1cbiAgR2V0Q29ubmVjdGVkQWNjb3VudHNSZXF1ZXN0Mi5kZXNlcmlhbGl6ZSA9IGRlc2VyaWFsaXplO1xuICBmdW5jdGlvbiBpc1NlcmlhbGl6ZWQocmVxdWVzdCkge1xuICAgIHJldHVybiByZXF1ZXN0Lm5hbWUgPT09IEdldENvbm5lY3RlZEFjY291bnRzUmVxdWVzdDIubmFtZSAmJiByZXF1ZXN0LnZlcnNpb24gPT09IEdldENvbm5lY3RlZEFjY291bnRzUmVxdWVzdDIuY3VycmVudFZlcnNpb247XG4gIH1cbiAgR2V0Q29ubmVjdGVkQWNjb3VudHNSZXF1ZXN0Mi5pc1NlcmlhbGl6ZWQgPSBpc1NlcmlhbGl6ZWQ7XG59KShHZXRDb25uZWN0ZWRBY2NvdW50c1JlcXVlc3QgfHwgKEdldENvbm5lY3RlZEFjY291bnRzUmVxdWVzdCA9IHt9KSk7XG5cbi8vIHNyYy9mZWF0dXJlcy9nZXRDb25uZWN0ZWRBY2NvdW50cy9yZXNwb25zZS50c1xudmFyIEdldENvbm5lY3RlZEFjY291bnRzUmVzcG9uc2U7XG4oKEdldENvbm5lY3RlZEFjY291bnRzUmVzcG9uc2UyKSA9PiB7XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZUFyZ3Moc2VyaWFsaXplciwgYXJncykge1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KGFyZ3MubGVuZ3RoKTtcbiAgICBmb3IgKGNvbnN0IGFjY291bnQgb2YgYXJncykge1xuICAgICAgc2VyaWFsaXplQWNjb3VudEluZm8oc2VyaWFsaXplciwgYWNjb3VudCk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGRlc2VyaWFsaXplQXJncyhkZXNlcmlhbGl6ZXIpIHtcbiAgICBjb25zdCBsZW5ndGggPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVVbGViMTI4QXNVMzIoKTtcbiAgICBjb25zdCBhY2NvdW50cyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGFjY291bnRzLnB1c2goZGVzZXJpYWxpemVBY2NvdW50SW5mbyhkZXNlcmlhbGl6ZXIpKTtcbiAgICB9XG4gICAgcmV0dXJuIGFjY291bnRzO1xuICB9XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZShhcmdzKSB7XG4gICAgcmV0dXJuIHNlcmlhbGl6ZVdhbGxldFJlc3BvbnNlKGFyZ3MsIHNlcmlhbGl6ZUFyZ3MpO1xuICB9XG4gIEdldENvbm5lY3RlZEFjY291bnRzUmVzcG9uc2UyLnNlcmlhbGl6ZSA9IHNlcmlhbGl6ZTtcbiAgZnVuY3Rpb24gZGVzZXJpYWxpemUoc2VyaWFsaXplZFJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIGRlc2VyaWFsaXplV2FsbGV0UmVzcG9uc2Uoc2VyaWFsaXplZFJlc3BvbnNlLCBkZXNlcmlhbGl6ZUFyZ3MpO1xuICB9XG4gIEdldENvbm5lY3RlZEFjY291bnRzUmVzcG9uc2UyLmRlc2VyaWFsaXplID0gZGVzZXJpYWxpemU7XG59KShHZXRDb25uZWN0ZWRBY2NvdW50c1Jlc3BvbnNlIHx8IChHZXRDb25uZWN0ZWRBY2NvdW50c1Jlc3BvbnNlID0ge30pKTtcblxuLy8gc3JjL2ZlYXR1cmVzL2lzQ29ubmVjdGVkL3JlcXVlc3QudHNcbnZhciBJc0Nvbm5lY3RlZFJlcXVlc3Q7XG4oKElzQ29ubmVjdGVkUmVxdWVzdDIpID0+IHtcbiAgSXNDb25uZWN0ZWRSZXF1ZXN0Mi5uYW1lID0gXCJpc0Nvbm5lY3RlZFwiO1xuICBJc0Nvbm5lY3RlZFJlcXVlc3QyLmN1cnJlbnRWZXJzaW9uID0gMTtcbiAgZnVuY3Rpb24gc2VyaWFsaXplKGRhcHBJbmZvKSB7XG4gICAgcmV0dXJuIHNlcmlhbGl6ZVdhbGxldFJlcXVlc3QoeyBkYXBwSW5mbywgbmFtZTogSXNDb25uZWN0ZWRSZXF1ZXN0Mi5uYW1lLCB2ZXJzaW9uOiBJc0Nvbm5lY3RlZFJlcXVlc3QyLmN1cnJlbnRWZXJzaW9uIH0pO1xuICB9XG4gIElzQ29ubmVjdGVkUmVxdWVzdDIuc2VyaWFsaXplID0gc2VyaWFsaXplO1xuICBmdW5jdGlvbiBkZXNlcmlhbGl6ZShyZXF1ZXN0KSB7XG4gICAgcmV0dXJuIGRlc2VyaWFsaXplV2FsbGV0UmVxdWVzdChyZXF1ZXN0KTtcbiAgfVxuICBJc0Nvbm5lY3RlZFJlcXVlc3QyLmRlc2VyaWFsaXplID0gZGVzZXJpYWxpemU7XG4gIGZ1bmN0aW9uIGlzU2VyaWFsaXplZChyZXF1ZXN0KSB7XG4gICAgcmV0dXJuIHJlcXVlc3QubmFtZSA9PT0gSXNDb25uZWN0ZWRSZXF1ZXN0Mi5uYW1lICYmIHJlcXVlc3QudmVyc2lvbiA9PT0gSXNDb25uZWN0ZWRSZXF1ZXN0Mi5jdXJyZW50VmVyc2lvbjtcbiAgfVxuICBJc0Nvbm5lY3RlZFJlcXVlc3QyLmlzU2VyaWFsaXplZCA9IGlzU2VyaWFsaXplZDtcbn0pKElzQ29ubmVjdGVkUmVxdWVzdCB8fCAoSXNDb25uZWN0ZWRSZXF1ZXN0ID0ge30pKTtcblxuLy8gc3JjL2ZlYXR1cmVzL2lzQ29ubmVjdGVkL3Jlc3BvbnNlLnRzXG52YXIgSXNDb25uZWN0ZWRSZXNwb25zZTtcbigoSXNDb25uZWN0ZWRSZXNwb25zZTIpID0+IHtcbiAgZnVuY3Rpb24gc2VyaWFsaXplQXJncyhzZXJpYWxpemVyLCB2YWx1ZSkge1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplQm9vbCh2YWx1ZSk7XG4gIH1cbiAgZnVuY3Rpb24gZGVzZXJpYWxpemVBcmdzKGRlc2VyaWFsaXplcikge1xuICAgIHJldHVybiBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVCb29sKCk7XG4gIH1cbiAgZnVuY3Rpb24gc2VyaWFsaXplKGFyZ3MpIHtcbiAgICByZXR1cm4gc2VyaWFsaXplV2FsbGV0UmVzcG9uc2UoYXJncywgc2VyaWFsaXplQXJncyk7XG4gIH1cbiAgSXNDb25uZWN0ZWRSZXNwb25zZTIuc2VyaWFsaXplID0gc2VyaWFsaXplO1xuICBmdW5jdGlvbiBkZXNlcmlhbGl6ZShzZXJpYWxpemVkUmVzcG9uc2UpIHtcbiAgICByZXR1cm4gZGVzZXJpYWxpemVXYWxsZXRSZXNwb25zZShzZXJpYWxpemVkUmVzcG9uc2UsIGRlc2VyaWFsaXplQXJncyk7XG4gIH1cbiAgSXNDb25uZWN0ZWRSZXNwb25zZTIuZGVzZXJpYWxpemUgPSBkZXNlcmlhbGl6ZTtcbn0pKElzQ29ubmVjdGVkUmVzcG9uc2UgfHwgKElzQ29ubmVjdGVkUmVzcG9uc2UgPSB7fSkpO1xuXG4vLyBzcmMvZmVhdHVyZXMvc2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uL3JlcXVlc3QudHNcbmltcG9ydCB7XG4gIEFjY291bnRBZGRyZXNzIGFzIEFjY291bnRBZGRyZXNzNixcbiAgVHJhbnNhY3Rpb25QYXlsb2FkXG59IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbnZhciBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXF1ZXN0O1xuKChTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXF1ZXN0MikgPT4ge1xuICBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXF1ZXN0Mi5uYW1lID0gXCJzaWduQW5kU3VibWl0VHJhbnNhY3Rpb25cIjtcbiAgU2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uUmVxdWVzdDIuc3VwcG9ydGVkVmVyc2lvbnMgPSBbMSwgMiwgM107XG4gIFNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlcXVlc3QyLmN1cnJlbnRWZXJzaW9uID0gMztcbiAgZnVuY3Rpb24gc2VyaWFsaXplQXJncyhzZXJpYWxpemVyLCB2YWx1ZSkge1xuICAgIGlmICh2YWx1ZS5uZXR3b3JrICE9PSB2b2lkIDAgJiYgIWlzU3VwcG9ydGVkTmV0d29yayh2YWx1ZS5uZXR3b3JrKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBuZXR3b3JrICcke3ZhbHVlLm5ldHdvcmt9J2ApO1xuICAgIH1cbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZUJvb2wodmFsdWUuc2lnbmVyQWRkcmVzcyAhPT0gdm9pZCAwKTtcbiAgICBpZiAodmFsdWUuc2lnbmVyQWRkcmVzcyAhPT0gdm9pZCAwKSB7XG4gICAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZSh2YWx1ZS5zaWduZXJBZGRyZXNzKTtcbiAgICB9XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVPcHRpb25TdHIodmFsdWUubmV0d29yayk7XG4gICAgaWYgKFwiYmNzVG9CeXRlc1wiIGluIHZhbHVlLnBheWxvYWQpIHtcbiAgICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplQm9vbCh0cnVlKTtcbiAgICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplKHZhbHVlLnBheWxvYWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZUJvb2woZmFsc2UpO1xuICAgICAgc2VyaWFsaXplVHJhbnNhY3Rpb25QYXlsb2FkSW5wdXQoc2VyaWFsaXplciwgdmFsdWUucGF5bG9hZCk7XG4gICAgfVxuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTY0KHZhbHVlLmV4cGlyYXRpb25UaW1lc3RhbXAgPz8gMCk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVVMzJBc1VsZWIxMjgodmFsdWUuZ2FzVW5pdFByaWNlID8/IDApO1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KHZhbHVlLm1heEdhc0Ftb3VudCA/PyAwKTtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOCh2YWx1ZS5mZWVQYXllciA/IDEgOiAwKTtcbiAgICBpZiAodmFsdWUuZmVlUGF5ZXIpIHtcbiAgICAgIHNlcmlhbGl6ZUFjY291bnRBdXRoZW50aWNhdG9ySW5wdXQoc2VyaWFsaXplciwgdmFsdWUuZmVlUGF5ZXIpO1xuICAgIH1cbiAgfVxuICBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXF1ZXN0Mi5zZXJpYWxpemVBcmdzID0gc2VyaWFsaXplQXJncztcbiAgZnVuY3Rpb24gZGVzZXJpYWxpemVBcmdzKGRlc2VyaWFsaXplciwgdmVyc2lvbikge1xuICAgIGNvbnN0IGhhc1NpZ25lckFkZHJlc3MgPSB2ZXJzaW9uID49IDMgJiYgZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplQm9vbCgpO1xuICAgIGNvbnN0IHNpZ25lckFkZHJlc3MgPSBoYXNTaWduZXJBZGRyZXNzID8gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplKEFjY291bnRBZGRyZXNzNikgOiB2b2lkIDA7XG4gICAgY29uc3QgbmV0d29yayA9IHZlcnNpb24gPT09IDEgPyBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVTdHIoKSA6IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZU9wdGlvblN0cigpO1xuICAgIGlmIChuZXR3b3JrICE9PSB2b2lkIDAgJiYgIWlzU3VwcG9ydGVkTmV0d29yayhuZXR3b3JrKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBuZXR3b3JrICcke25ldHdvcmt9J2ApO1xuICAgIH1cbiAgICBjb25zdCBpc1BheWxvYWRCY3NTZXJpYWxpemFibGUgPSB2ZXJzaW9uID09PSAxIHx8IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZUJvb2woKTtcbiAgICBjb25zdCBwYXlsb2FkID0gaXNQYXlsb2FkQmNzU2VyaWFsaXphYmxlID8gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplKFRyYW5zYWN0aW9uUGF5bG9hZCkgOiBkZXNlcmlhbGl6ZVRyYW5zYWN0aW9uUGF5bG9hZElucHV0KGRlc2VyaWFsaXplcik7XG4gICAgY29uc3QgZXhwaXJhdGlvblRpbWVzdGFtcCA9IE51bWJlcihkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVVNjQoKSk7XG4gICAgY29uc3QgZ2FzVW5pdFByaWNlID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplVWxlYjEyOEFzVTMyKCk7XG4gICAgY29uc3QgbWF4R2FzQW1vdW50ID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplVWxlYjEyOEFzVTMyKCk7XG4gICAgY29uc3QgaGFzRmVlUGF5ZXIgPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVVbGViMTI4QXNVMzIoKTtcbiAgICBjb25zdCBmZWVQYXllciA9IGhhc0ZlZVBheWVyID8gZGVzZXJpYWxpemVBY2NvdW50QXV0aGVudGljYXRvcklucHV0KGRlc2VyaWFsaXplcikgOiB2b2lkIDA7XG4gICAgcmV0dXJuIHtcbiAgICAgIGV4cGlyYXRpb25UaW1lc3RhbXA6IGV4cGlyYXRpb25UaW1lc3RhbXAgPiAwID8gZXhwaXJhdGlvblRpbWVzdGFtcCA6IHZvaWQgMCxcbiAgICAgIGZlZVBheWVyLFxuICAgICAgZ2FzVW5pdFByaWNlOiBnYXNVbml0UHJpY2UgPiAwID8gZ2FzVW5pdFByaWNlIDogdm9pZCAwLFxuICAgICAgbWF4R2FzQW1vdW50OiBtYXhHYXNBbW91bnQgPiAwID8gbWF4R2FzQW1vdW50IDogdm9pZCAwLFxuICAgICAgbmV0d29yayxcbiAgICAgIHBheWxvYWQsXG4gICAgICBzaWduZXJBZGRyZXNzXG4gICAgfTtcbiAgfVxuICBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXF1ZXN0Mi5kZXNlcmlhbGl6ZUFyZ3MgPSBkZXNlcmlhbGl6ZUFyZ3M7XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZShkYXBwSW5mbywgYXJncykge1xuICAgIGNvbnN0IHJlcXVlc3QgPSB7IGFyZ3MsIGRhcHBJbmZvLCBuYW1lOiBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXF1ZXN0Mi5uYW1lLCB2ZXJzaW9uOiBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXF1ZXN0Mi5jdXJyZW50VmVyc2lvbiB9O1xuICAgIHJldHVybiBzZXJpYWxpemVXYWxsZXRSZXF1ZXN0V2l0aEFyZ3MocmVxdWVzdCwgc2VyaWFsaXplQXJncyk7XG4gIH1cbiAgU2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uUmVxdWVzdDIuc2VyaWFsaXplID0gc2VyaWFsaXplO1xuICBmdW5jdGlvbiBkZXNlcmlhbGl6ZShzZXJpYWxpemVkUmVxdWVzdCkge1xuICAgIHJldHVybiBkZXNlcmlhbGl6ZVdhbGxldFJlcXVlc3RXaXRoQXJncyhcbiAgICAgIHNlcmlhbGl6ZWRSZXF1ZXN0LFxuICAgICAgKGRlc2VyaWFsaXplcikgPT4gZGVzZXJpYWxpemVBcmdzKGRlc2VyaWFsaXplciwgc2VyaWFsaXplZFJlcXVlc3QudmVyc2lvbilcbiAgICApO1xuICB9XG4gIFNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlcXVlc3QyLmRlc2VyaWFsaXplID0gZGVzZXJpYWxpemU7XG4gIGZ1bmN0aW9uIGlzU2VyaWFsaXplZChyZXF1ZXN0KSB7XG4gICAgcmV0dXJuIHJlcXVlc3QubmFtZSA9PT0gU2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uUmVxdWVzdDIubmFtZSAmJiBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXF1ZXN0Mi5zdXBwb3J0ZWRWZXJzaW9ucy5pbmNsdWRlcyhyZXF1ZXN0LnZlcnNpb24pO1xuICB9XG4gIFNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlcXVlc3QyLmlzU2VyaWFsaXplZCA9IGlzU2VyaWFsaXplZDtcbn0pKFNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlcXVlc3QgfHwgKFNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlcXVlc3QgPSB7fSkpO1xuXG4vLyBzcmMvZmVhdHVyZXMvc2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uL3Jlc3BvbnNlLnRzXG52YXIgU2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uUmVzcG9uc2U7XG4oKFNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlc3BvbnNlMikgPT4ge1xuICBmdW5jdGlvbiBzZXJpYWxpemVBcHByb3ZhbEFyZ3Moc2VyaWFsaXplciwgdmFsdWUpIHtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVN0cih2YWx1ZS50eG5IYXNoKTtcbiAgfVxuICBmdW5jdGlvbiBkZXNlcmlhbGl6ZUFwcHJvdmFsQXJncyhkZXNlcmlhbGl6ZXIpIHtcbiAgICBjb25zdCB0eG5IYXNoID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplU3RyKCk7XG4gICAgcmV0dXJuIHsgdHhuSGFzaCB9O1xuICB9XG4gIGNvbnN0IHNlcmlhbGl6ZUFyZ3MgPSBtYWtlVXNlclJlc3BvbnNlU2VyaWFsaXplRm4oc2VyaWFsaXplQXBwcm92YWxBcmdzKTtcbiAgY29uc3QgZGVzZXJpYWxpemVBcmdzID0gbWFrZVVzZXJSZXNwb25zZURlc2VyaWFsaXplRm4oZGVzZXJpYWxpemVBcHByb3ZhbEFyZ3MpO1xuICBmdW5jdGlvbiBzZXJpYWxpemUoYXJncykge1xuICAgIHJldHVybiBzZXJpYWxpemVXYWxsZXRSZXNwb25zZShhcmdzLCBzZXJpYWxpemVBcmdzKTtcbiAgfVxuICBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXNwb25zZTIuc2VyaWFsaXplID0gc2VyaWFsaXplO1xuICBmdW5jdGlvbiBkZXNlcmlhbGl6ZShzZXJpYWxpemVkUmVzcG9uc2UpIHtcbiAgICByZXR1cm4gZGVzZXJpYWxpemVXYWxsZXRSZXNwb25zZShzZXJpYWxpemVkUmVzcG9uc2UsIGRlc2VyaWFsaXplQXJncyk7XG4gIH1cbiAgU2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uUmVzcG9uc2UyLmRlc2VyaWFsaXplID0gZGVzZXJpYWxpemU7XG59KShTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXNwb25zZSB8fCAoU2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uUmVzcG9uc2UgPSB7fSkpO1xuXG4vLyBzcmMvZmVhdHVyZXMvc2lnbk1lc3NhZ2UvcmVxdWVzdC50c1xuaW1wb3J0IHsgQWNjb3VudEFkZHJlc3MgYXMgQWNjb3VudEFkZHJlc3M3IH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xudmFyIFNpZ25NZXNzYWdlUmVxdWVzdDtcbigoU2lnbk1lc3NhZ2VSZXF1ZXN0MikgPT4ge1xuICBTaWduTWVzc2FnZVJlcXVlc3QyLm5hbWUgPSBcInNpZ25NZXNzYWdlXCI7XG4gIFNpZ25NZXNzYWdlUmVxdWVzdDIuc3VwcG9ydGVkVmVyc2lvbnMgPSBbMSwgMl07XG4gIFNpZ25NZXNzYWdlUmVxdWVzdDIuY3VycmVudFZlcnNpb24gPSAyO1xuICBmdW5jdGlvbiBzZXJpYWxpemVBcmdzKHNlcmlhbGl6ZXIsIHZhbHVlKSB7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVCb29sKHZhbHVlLnNpZ25lckFkZHJlc3MgIT09IHZvaWQgMCk7XG4gICAgaWYgKHZhbHVlLnNpZ25lckFkZHJlc3MgIT09IHZvaWQgMCkge1xuICAgICAgc2VyaWFsaXplci5zZXJpYWxpemUodmFsdWUuc2lnbmVyQWRkcmVzcyk7XG4gICAgfVxuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTgodmFsdWUuY2hhaW5JZCk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVCeXRlcyh2YWx1ZS5ub25jZSk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVCeXRlcyh2YWx1ZS5tZXNzYWdlKTtcbiAgfVxuICBmdW5jdGlvbiBkZXNlcmlhbGl6ZUFyZ3MoZGVzZXJpYWxpemVyLCB2ZXJzaW9uKSB7XG4gICAgY29uc3QgaGFzU2lnbmVyQWRkcmVzcyA9IHZlcnNpb24gPj0gMiAmJiBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVCb29sKCk7XG4gICAgY29uc3Qgc2lnbmVyQWRkcmVzcyA9IGhhc1NpZ25lckFkZHJlc3MgPyBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoQWNjb3VudEFkZHJlc3M3KSA6IHZvaWQgMDtcbiAgICBjb25zdCBjaGFpbklkID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplVTgoKTtcbiAgICBjb25zdCBub25jZSA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZUJ5dGVzKCk7XG4gICAgY29uc3QgbWVzc2FnZSA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZUJ5dGVzKCk7XG4gICAgcmV0dXJuIHsgY2hhaW5JZCwgbWVzc2FnZSwgbm9uY2UsIHNpZ25lckFkZHJlc3MgfTtcbiAgfVxuICBmdW5jdGlvbiBzZXJpYWxpemUoZGFwcEluZm8sIGFyZ3MpIHtcbiAgICBjb25zdCByZXF1ZXN0ID0geyBhcmdzLCBkYXBwSW5mbywgbmFtZTogU2lnbk1lc3NhZ2VSZXF1ZXN0Mi5uYW1lLCB2ZXJzaW9uOiBTaWduTWVzc2FnZVJlcXVlc3QyLmN1cnJlbnRWZXJzaW9uIH07XG4gICAgcmV0dXJuIHNlcmlhbGl6ZVdhbGxldFJlcXVlc3RXaXRoQXJncyhyZXF1ZXN0LCBzZXJpYWxpemVBcmdzKTtcbiAgfVxuICBTaWduTWVzc2FnZVJlcXVlc3QyLnNlcmlhbGl6ZSA9IHNlcmlhbGl6ZTtcbiAgZnVuY3Rpb24gZGVzZXJpYWxpemUoc2VyaWFsaXplZFJlcXVlc3QpIHtcbiAgICByZXR1cm4gZGVzZXJpYWxpemVXYWxsZXRSZXF1ZXN0V2l0aEFyZ3Moc2VyaWFsaXplZFJlcXVlc3QsIChkKSA9PiBkZXNlcmlhbGl6ZUFyZ3MoZCwgc2VyaWFsaXplZFJlcXVlc3QudmVyc2lvbikpO1xuICB9XG4gIFNpZ25NZXNzYWdlUmVxdWVzdDIuZGVzZXJpYWxpemUgPSBkZXNlcmlhbGl6ZTtcbiAgZnVuY3Rpb24gaXNTZXJpYWxpemVkKHJlcXVlc3QpIHtcbiAgICByZXR1cm4gcmVxdWVzdC5uYW1lID09PSBTaWduTWVzc2FnZVJlcXVlc3QyLm5hbWUgJiYgcmVxdWVzdC52ZXJzaW9uID09PSBTaWduTWVzc2FnZVJlcXVlc3QyLmN1cnJlbnRWZXJzaW9uO1xuICB9XG4gIFNpZ25NZXNzYWdlUmVxdWVzdDIuaXNTZXJpYWxpemVkID0gaXNTZXJpYWxpemVkO1xufSkoU2lnbk1lc3NhZ2VSZXF1ZXN0IHx8IChTaWduTWVzc2FnZVJlcXVlc3QgPSB7fSkpO1xuXG4vLyBzcmMvZmVhdHVyZXMvc2lnbk1lc3NhZ2UvcmVzcG9uc2UudHNcbnZhciBTaWduTWVzc2FnZVJlc3BvbnNlO1xuKChTaWduTWVzc2FnZVJlc3BvbnNlMikgPT4ge1xuICBmdW5jdGlvbiBzZXJpYWxpemVBcHByb3ZhbEFyZ3Moc2VyaWFsaXplciwgdmFsdWUpIHtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVN0cih2YWx1ZS5mdWxsTWVzc2FnZSk7XG4gICAgc2VyaWFsaXplU2lnbmF0dXJlKHNlcmlhbGl6ZXIsIHZhbHVlLnNpZ25hdHVyZSk7XG4gIH1cbiAgZnVuY3Rpb24gZGVzZXJpYWxpemVBcHByb3ZhbEFyZ3MoZGVzZXJpYWxpemVyKSB7XG4gICAgY29uc3QgZnVsbE1lc3NhZ2UgPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVTdHIoKTtcbiAgICBjb25zdCBzaWduYXR1cmUgPSBkZXNlcmlhbGl6ZVNpZ25hdHVyZShkZXNlcmlhbGl6ZXIpO1xuICAgIHJldHVybiB7IGZ1bGxNZXNzYWdlLCBzaWduYXR1cmUgfTtcbiAgfVxuICBjb25zdCBzZXJpYWxpemVBcmdzID0gbWFrZVVzZXJSZXNwb25zZVNlcmlhbGl6ZUZuKHNlcmlhbGl6ZUFwcHJvdmFsQXJncyk7XG4gIGNvbnN0IGRlc2VyaWFsaXplQXJncyA9IG1ha2VVc2VyUmVzcG9uc2VEZXNlcmlhbGl6ZUZuKGRlc2VyaWFsaXplQXBwcm92YWxBcmdzKTtcbiAgZnVuY3Rpb24gc2VyaWFsaXplKGFyZ3MpIHtcbiAgICByZXR1cm4gc2VyaWFsaXplV2FsbGV0UmVzcG9uc2UoYXJncywgc2VyaWFsaXplQXJncyk7XG4gIH1cbiAgU2lnbk1lc3NhZ2VSZXNwb25zZTIuc2VyaWFsaXplID0gc2VyaWFsaXplO1xuICBmdW5jdGlvbiBkZXNlcmlhbGl6ZShzZXJpYWxpemVkUmVzcG9uc2UpIHtcbiAgICByZXR1cm4gZGVzZXJpYWxpemVXYWxsZXRSZXNwb25zZShzZXJpYWxpemVkUmVzcG9uc2UsIGRlc2VyaWFsaXplQXJncyk7XG4gIH1cbiAgU2lnbk1lc3NhZ2VSZXNwb25zZTIuZGVzZXJpYWxpemUgPSBkZXNlcmlhbGl6ZTtcbn0pKFNpZ25NZXNzYWdlUmVzcG9uc2UgfHwgKFNpZ25NZXNzYWdlUmVzcG9uc2UgPSB7fSkpO1xuXG4vLyBzcmMvZmVhdHVyZXMvc2lnblRyYW5zYWN0aW9uL3JlcXVlc3QudHNcbmltcG9ydCB7XG4gIEFjY291bnRBZGRyZXNzIGFzIEFjY291bnRBZGRyZXNzOCxcbiAgVHJhbnNhY3Rpb25QYXlsb2FkIGFzIFRyYW5zYWN0aW9uUGF5bG9hZDJcbn0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xudmFyIFNpZ25UcmFuc2FjdGlvblJlcXVlc3Q7XG4oKFNpZ25UcmFuc2FjdGlvblJlcXVlc3QyKSA9PiB7XG4gIFNpZ25UcmFuc2FjdGlvblJlcXVlc3QyLm5hbWUgPSBcInNpZ25UcmFuc2FjdGlvblwiO1xuICBTaWduVHJhbnNhY3Rpb25SZXF1ZXN0Mi5zdXBwb3J0ZWRWZXJzaW9ucyA9IFsxLCAyLCAzXTtcbiAgU2lnblRyYW5zYWN0aW9uUmVxdWVzdDIuY3VycmVudFZlcnNpb24gPSAzO1xuICBmdW5jdGlvbiBub3JtYWxpemVBcmdzKGFyZ3MpIHtcbiAgICBjb25zdCB7IGZlZVBheWVyLCBzZWNvbmRhcnlTaWduZXJzLCBzZW5kZXJQdWJsaWNLZXksIHNpZ25lckFkZHJlc3MsIHRyYW5zYWN0aW9uIH0gPSBhcmdzO1xuICAgIGNvbnN0IHNlbmRlciA9IHtcbiAgICAgIGFkZHJlc3M6IHRyYW5zYWN0aW9uLnNlbmRlcixcbiAgICAgIHB1YmxpY0tleTogc2VuZGVyUHVibGljS2V5XG4gICAgfTtcbiAgICBjb25zdCBuZXR3b3JrID0gY2hhaW5JZFRvTmV0d29yayhhcmdzLnRyYW5zYWN0aW9uLmNoYWluX2lkLmNoYWluSWQpO1xuICAgIHJldHVybiB7XG4gICAgICBleHBpcmF0aW9uVGltZXN0YW1wOiBOdW1iZXIodHJhbnNhY3Rpb24uZXhwaXJhdGlvbl90aW1lc3RhbXBfc2VjcyksXG4gICAgICBmZWVQYXllcixcbiAgICAgIGdhc1VuaXRQcmljZTogTnVtYmVyKHRyYW5zYWN0aW9uLmdhc191bml0X3ByaWNlKSxcbiAgICAgIG1heEdhc0Ftb3VudDogTnVtYmVyKHRyYW5zYWN0aW9uLm1heF9nYXNfYW1vdW50KSxcbiAgICAgIG5ldHdvcmssXG4gICAgICBwYXlsb2FkOiB0cmFuc2FjdGlvbi5wYXlsb2FkLFxuICAgICAgc2Vjb25kYXJ5U2lnbmVycyxcbiAgICAgIHNlbmRlcixcbiAgICAgIHNpZ25lckFkZHJlc3NcbiAgICB9O1xuICB9XG4gIFNpZ25UcmFuc2FjdGlvblJlcXVlc3QyLm5vcm1hbGl6ZUFyZ3MgPSBub3JtYWxpemVBcmdzO1xuICBmdW5jdGlvbiBzZXJpYWxpemVBcmdzKHNlcmlhbGl6ZXIsIHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlLm5ldHdvcmsgIT09IHZvaWQgMCAmJiAhaXNTdXBwb3J0ZWROZXR3b3JrKHZhbHVlLm5ldHdvcmspKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIG5ldHdvcmsgJyR7dmFsdWUubmV0d29ya30nYCk7XG4gICAgfVxuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplQm9vbCh2YWx1ZS5zaWduZXJBZGRyZXNzICE9PSB2b2lkIDApO1xuICAgIGlmICh2YWx1ZS5zaWduZXJBZGRyZXNzICE9PSB2b2lkIDApIHtcbiAgICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplKHZhbHVlLnNpZ25lckFkZHJlc3MpO1xuICAgIH1cbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZU9wdGlvblN0cih2YWx1ZS5uZXR3b3JrKTtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZUJvb2wodmFsdWUuc2VuZGVyICE9PSB2b2lkIDApO1xuICAgIGlmICh2YWx1ZS5zZW5kZXIgIT09IHZvaWQgMCkge1xuICAgICAgc2VyaWFsaXplQWNjb3VudElucHV0KHNlcmlhbGl6ZXIsIHZhbHVlLnNlbmRlcik7XG4gICAgfVxuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplKHZhbHVlLnBheWxvYWQpO1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KHZhbHVlLmV4cGlyYXRpb25TZWNvbmRzRnJvbU5vdyA/PyAwKTtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVU2NCh2YWx1ZS5leHBpcmF0aW9uVGltZXN0YW1wID8/IDApO1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KHZhbHVlLmdhc1VuaXRQcmljZSA/PyAwKTtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOCh2YWx1ZS5tYXhHYXNBbW91bnQgPz8gMCk7XG4gICAgc2VyaWFsaXplci5zZXJpYWxpemVCb29sKHZhbHVlLmZlZVBheWVyICE9PSB2b2lkIDApO1xuICAgIGlmICh2YWx1ZS5mZWVQYXllciAhPT0gdm9pZCAwKSB7XG4gICAgICBzZXJpYWxpemVBY2NvdW50SW5wdXQoc2VyaWFsaXplciwgdmFsdWUuZmVlUGF5ZXIpO1xuICAgIH1cbiAgICBjb25zdCBzZWNvbmRhcnlTaWduZXJzID0gdmFsdWUuc2Vjb25kYXJ5U2lnbmVycyA/PyBbXTtcbiAgICBzZXJpYWxpemVyLnNlcmlhbGl6ZVUzMkFzVWxlYjEyOChzZWNvbmRhcnlTaWduZXJzLmxlbmd0aCk7XG4gICAgZm9yIChjb25zdCBzaWduZXIgb2Ygc2Vjb25kYXJ5U2lnbmVycykge1xuICAgICAgc2VyaWFsaXplQWNjb3VudElucHV0KHNlcmlhbGl6ZXIsIHNpZ25lcik7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGRlc2VyaWFsaXplQXJncyhkZXNlcmlhbGl6ZXIsIHZlcnNpb24pIHtcbiAgICBjb25zdCBoYXNTaWduZXJBZGRyZXNzID0gdmVyc2lvbiA+PSAzICYmIGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZUJvb2woKTtcbiAgICBjb25zdCBzaWduZXJBZGRyZXNzID0gaGFzU2lnbmVyQWRkcmVzcyA/IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZShBY2NvdW50QWRkcmVzczgpIDogdm9pZCAwO1xuICAgIGNvbnN0IG5ldHdvcmsgPSB2ZXJzaW9uID09PSAxID8gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplU3RyKCkgOiBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVPcHRpb25TdHIoKTtcbiAgICBpZiAobmV0d29yayAhPT0gdm9pZCAwICYmICFpc1N1cHBvcnRlZE5ldHdvcmsobmV0d29yaykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgbmV0d29yayAnJHtuZXR3b3JrfSdgKTtcbiAgICB9XG4gICAgY29uc3QgaGFzU2VuZGVyID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplQm9vbCgpO1xuICAgIGNvbnN0IHNlbmRlciA9IGhhc1NlbmRlciA/IGRlc2VyaWFsaXplQWNjb3VudElucHV0KGRlc2VyaWFsaXplcikgOiB2b2lkIDA7XG4gICAgY29uc3QgcGF5bG9hZCA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZShUcmFuc2FjdGlvblBheWxvYWQyKTtcbiAgICBjb25zdCBleHBpcmF0aW9uU2Vjb25kc0Zyb21Ob3cgPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVVbGViMTI4QXNVMzIoKTtcbiAgICBjb25zdCBleHBpcmF0aW9uVGltZXN0YW1wID0gTnVtYmVyKGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVU2NCgpKTtcbiAgICBjb25zdCBnYXNVbml0UHJpY2UgPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVVbGViMTI4QXNVMzIoKTtcbiAgICBjb25zdCBtYXhHYXNBbW91bnQgPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVVbGViMTI4QXNVMzIoKTtcbiAgICBjb25zdCBoYXNGZWVQYXllciA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZUJvb2woKTtcbiAgICBjb25zdCBmZWVQYXllciA9IGhhc0ZlZVBheWVyID8gZGVzZXJpYWxpemVBY2NvdW50SW5wdXQoZGVzZXJpYWxpemVyKSA6IHZvaWQgMDtcbiAgICBjb25zdCBzZWNvbmRhcnlTaWduZXJzTGVuZ3RoID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplVWxlYjEyOEFzVTMyKCk7XG4gICAgY29uc3Qgc2Vjb25kYXJ5U2lnbmVycyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2Vjb25kYXJ5U2lnbmVyc0xlbmd0aDsgaSArPSAxKSB7XG4gICAgICBzZWNvbmRhcnlTaWduZXJzLnB1c2goZGVzZXJpYWxpemVBY2NvdW50SW5wdXQoZGVzZXJpYWxpemVyKSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBleHBpcmF0aW9uU2Vjb25kc0Zyb21Ob3c6IGV4cGlyYXRpb25TZWNvbmRzRnJvbU5vdyA+IDAgPyBleHBpcmF0aW9uU2Vjb25kc0Zyb21Ob3cgOiB2b2lkIDAsXG4gICAgICBleHBpcmF0aW9uVGltZXN0YW1wOiBleHBpcmF0aW9uVGltZXN0YW1wID4gMCA/IGV4cGlyYXRpb25UaW1lc3RhbXAgOiB2b2lkIDAsXG4gICAgICBmZWVQYXllcixcbiAgICAgIGdhc1VuaXRQcmljZTogZ2FzVW5pdFByaWNlID4gMCA/IGdhc1VuaXRQcmljZSA6IHZvaWQgMCxcbiAgICAgIG1heEdhc0Ftb3VudDogbWF4R2FzQW1vdW50ID4gMCA/IG1heEdhc0Ftb3VudCA6IHZvaWQgMCxcbiAgICAgIG5ldHdvcmssXG4gICAgICBwYXlsb2FkLFxuICAgICAgc2Vjb25kYXJ5U2lnbmVycyxcbiAgICAgIHNlbmRlcixcbiAgICAgIHNpZ25lckFkZHJlc3NcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZShkYXBwSW5mbywgYXJncykge1xuICAgIGNvbnN0IHJlcXVlc3QgPSB7IGFyZ3MsIGRhcHBJbmZvLCBuYW1lOiBTaWduVHJhbnNhY3Rpb25SZXF1ZXN0Mi5uYW1lLCB2ZXJzaW9uOiBTaWduVHJhbnNhY3Rpb25SZXF1ZXN0Mi5jdXJyZW50VmVyc2lvbiB9O1xuICAgIHJldHVybiBzZXJpYWxpemVXYWxsZXRSZXF1ZXN0V2l0aEFyZ3MocmVxdWVzdCwgc2VyaWFsaXplQXJncyk7XG4gIH1cbiAgU2lnblRyYW5zYWN0aW9uUmVxdWVzdDIuc2VyaWFsaXplID0gc2VyaWFsaXplO1xuICBmdW5jdGlvbiBkZXNlcmlhbGl6ZShzZXJpYWxpemVkUmVxdWVzdCkge1xuICAgIHJldHVybiBkZXNlcmlhbGl6ZVdhbGxldFJlcXVlc3RXaXRoQXJncyhcbiAgICAgIHNlcmlhbGl6ZWRSZXF1ZXN0LFxuICAgICAgKGRlc2VyaWFsaXplcikgPT4gZGVzZXJpYWxpemVBcmdzKGRlc2VyaWFsaXplciwgc2VyaWFsaXplZFJlcXVlc3QudmVyc2lvbilcbiAgICApO1xuICB9XG4gIFNpZ25UcmFuc2FjdGlvblJlcXVlc3QyLmRlc2VyaWFsaXplID0gZGVzZXJpYWxpemU7XG4gIGZ1bmN0aW9uIGlzU2VyaWFsaXplZChyZXF1ZXN0KSB7XG4gICAgcmV0dXJuIHJlcXVlc3QubmFtZSA9PT0gU2lnblRyYW5zYWN0aW9uUmVxdWVzdDIubmFtZSAmJiBTaWduVHJhbnNhY3Rpb25SZXF1ZXN0Mi5zdXBwb3J0ZWRWZXJzaW9ucy5pbmNsdWRlcyhyZXF1ZXN0LnZlcnNpb24pO1xuICB9XG4gIFNpZ25UcmFuc2FjdGlvblJlcXVlc3QyLmlzU2VyaWFsaXplZCA9IGlzU2VyaWFsaXplZDtcbn0pKFNpZ25UcmFuc2FjdGlvblJlcXVlc3QgfHwgKFNpZ25UcmFuc2FjdGlvblJlcXVlc3QgPSB7fSkpO1xuXG4vLyBzcmMvZmVhdHVyZXMvc2lnblRyYW5zYWN0aW9uL3Jlc3BvbnNlLnRzXG5pbXBvcnQgeyBBY2NvdW50QXV0aGVudGljYXRvciBhcyBBY2NvdW50QXV0aGVudGljYXRvcjIsIFJhd1RyYW5zYWN0aW9uIGFzIFJhd1RyYW5zYWN0aW9uMiB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbnZhciBTaWduVHJhbnNhY3Rpb25SZXNwb25zZTtcbigoU2lnblRyYW5zYWN0aW9uUmVzcG9uc2UyKSA9PiB7XG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZUFwcHJvdmFsQXJncyhzZXJpYWxpemVyLCB2YWx1ZSkge1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplKHZhbHVlLmF1dGhlbnRpY2F0b3IpO1xuICAgIHNlcmlhbGl6ZXIuc2VyaWFsaXplQm9vbCh2YWx1ZS5yYXdUcmFuc2FjdGlvbiAhPT0gdm9pZCAwKTtcbiAgICBpZiAodmFsdWUucmF3VHJhbnNhY3Rpb24gIT09IHZvaWQgMCkge1xuICAgICAgc2VyaWFsaXplci5zZXJpYWxpemUodmFsdWUucmF3VHJhbnNhY3Rpb24pO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBkZXNlcmlhbGl6ZUFwcHJvdmFsQXJncyhkZXNlcmlhbGl6ZXIpIHtcbiAgICBjb25zdCBhdXRoZW50aWNhdG9yID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplKEFjY291bnRBdXRoZW50aWNhdG9yMik7XG4gICAgY29uc3QgaGFzUmF3VHJhbnNhY3Rpb24gPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVCb29sKCk7XG4gICAgY29uc3QgcmF3VHJhbnNhY3Rpb24gPSBoYXNSYXdUcmFuc2FjdGlvbiA/IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZShSYXdUcmFuc2FjdGlvbjIpIDogdm9pZCAwO1xuICAgIHJldHVybiB7XG4gICAgICBhdXRoZW50aWNhdG9yLFxuICAgICAgcmF3VHJhbnNhY3Rpb25cbiAgICB9O1xuICB9XG4gIGNvbnN0IHNlcmlhbGl6ZUFyZ3MgPSBtYWtlVXNlclJlc3BvbnNlU2VyaWFsaXplRm4oc2VyaWFsaXplQXBwcm92YWxBcmdzKTtcbiAgY29uc3QgZGVzZXJpYWxpemVBcmdzID0gbWFrZVVzZXJSZXNwb25zZURlc2VyaWFsaXplRm4oZGVzZXJpYWxpemVBcHByb3ZhbEFyZ3MpO1xuICBmdW5jdGlvbiBzZXJpYWxpemUoYXJncykge1xuICAgIHJldHVybiBzZXJpYWxpemVXYWxsZXRSZXNwb25zZShhcmdzLCBzZXJpYWxpemVBcmdzKTtcbiAgfVxuICBTaWduVHJhbnNhY3Rpb25SZXNwb25zZTIuc2VyaWFsaXplID0gc2VyaWFsaXplO1xuICBmdW5jdGlvbiBkZXNlcmlhbGl6ZShzZXJpYWxpemVkUmVzcG9uc2UpIHtcbiAgICByZXR1cm4gZGVzZXJpYWxpemVXYWxsZXRSZXNwb25zZShzZXJpYWxpemVkUmVzcG9uc2UsIGRlc2VyaWFsaXplQXJncyk7XG4gIH1cbiAgU2lnblRyYW5zYWN0aW9uUmVzcG9uc2UyLmRlc2VyaWFsaXplID0gZGVzZXJpYWxpemU7XG59KShTaWduVHJhbnNhY3Rpb25SZXNwb25zZSB8fCAoU2lnblRyYW5zYWN0aW9uUmVzcG9uc2UgPSB7fSkpO1xuXG4vLyBzcmMvbWVzc2FnZXMvY29tbW9uLnRzXG5mdW5jdGlvbiBpc1R5cGVkTWVzc2FnZShtZXNzYWdlQ2xzLCBtZXNzYWdlKSB7XG4gIHJldHVybiBtZXNzYWdlPy5fX21lc3NhZ2VUeXBlID09PSBtZXNzYWdlQ2xzLlRZUEU7XG59XG5cbi8vIHNyYy9tZXNzYWdlcy9iYWNrZ3JvdW5kLnRzXG52YXIgX0FwdG9zV2FsbGV0UmVxdWVzdE1lc3NhZ2UgPSBjbGFzcyBfQXB0b3NXYWxsZXRSZXF1ZXN0TWVzc2FnZSB7XG4gIGNvbnN0cnVjdG9yKG5vbmNlLCBzZXJpYWxpemVkVmFsdWUpIHtcbiAgICB0aGlzLm5vbmNlID0gbm9uY2U7XG4gICAgdGhpcy5zZXJpYWxpemVkVmFsdWUgPSBzZXJpYWxpemVkVmFsdWU7XG4gICAgdGhpcy5fX21lc3NhZ2VUeXBlID0gX0FwdG9zV2FsbGV0UmVxdWVzdE1lc3NhZ2UuVFlQRTtcbiAgfVxufTtcbl9BcHRvc1dhbGxldFJlcXVlc3RNZXNzYWdlLlRZUEUgPSBcIkFwdG9zV2FsbGV0UmVxdWVzdFwiO1xudmFyIEFwdG9zV2FsbGV0UmVxdWVzdE1lc3NhZ2UgPSBfQXB0b3NXYWxsZXRSZXF1ZXN0TWVzc2FnZTtcbnZhciBfQXB0b3NXYWxsZXRTdWNjZXNzUmVzcG9uc2VNZXNzYWdlID0gY2xhc3MgX0FwdG9zV2FsbGV0U3VjY2Vzc1Jlc3BvbnNlTWVzc2FnZSB7XG4gIGNvbnN0cnVjdG9yKHNlcmlhbGl6ZWRWYWx1ZSwgbm9uY2UpIHtcbiAgICB0aGlzLnNlcmlhbGl6ZWRWYWx1ZSA9IHNlcmlhbGl6ZWRWYWx1ZTtcbiAgICB0aGlzLm5vbmNlID0gbm9uY2U7XG4gICAgdGhpcy5fX21lc3NhZ2VUeXBlID0gX0FwdG9zV2FsbGV0U3VjY2Vzc1Jlc3BvbnNlTWVzc2FnZS5UWVBFO1xuICB9XG59O1xuX0FwdG9zV2FsbGV0U3VjY2Vzc1Jlc3BvbnNlTWVzc2FnZS5UWVBFID0gXCJBcHRvc1dhbGxldFN1Y2Nlc3NSZXNwb25zZU1lc3NhZ2VcIjtcbnZhciBBcHRvc1dhbGxldFN1Y2Nlc3NSZXNwb25zZU1lc3NhZ2UgPSBfQXB0b3NXYWxsZXRTdWNjZXNzUmVzcG9uc2VNZXNzYWdlO1xudmFyIF9BcHRvc1dhbGxldEVycm9yUmVzcG9uc2VNZXNzYWdlID0gY2xhc3MgX0FwdG9zV2FsbGV0RXJyb3JSZXNwb25zZU1lc3NhZ2Uge1xuICBjb25zdHJ1Y3RvcihlcnJvciwgbm9uY2UpIHtcbiAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gICAgdGhpcy5ub25jZSA9IG5vbmNlO1xuICAgIHRoaXMuX19tZXNzYWdlVHlwZSA9IF9BcHRvc1dhbGxldEVycm9yUmVzcG9uc2VNZXNzYWdlLlRZUEU7XG4gIH1cbn07XG5fQXB0b3NXYWxsZXRFcnJvclJlc3BvbnNlTWVzc2FnZS5UWVBFID0gXCJBcHRvc1dhbGxldEVycm9yUmVzcG9uc2VNZXNzYWdlXCI7XG52YXIgQXB0b3NXYWxsZXRFcnJvclJlc3BvbnNlTWVzc2FnZSA9IF9BcHRvc1dhbGxldEVycm9yUmVzcG9uc2VNZXNzYWdlO1xuZnVuY3Rpb24gaXNBcHRvc1dhbGxldFJlc3BvbnNlTWVzc2FnZShtZXNzYWdlKSB7XG4gIHJldHVybiBpc1R5cGVkTWVzc2FnZShBcHRvc1dhbGxldFN1Y2Nlc3NSZXNwb25zZU1lc3NhZ2UsIG1lc3NhZ2UpIHx8IGlzVHlwZWRNZXNzYWdlKEFwdG9zV2FsbGV0RXJyb3JSZXNwb25zZU1lc3NhZ2UsIG1lc3NhZ2UpO1xufVxuXG4vLyBzcmMvbWVzc2FnZXMvcHJvbXB0LnRzXG5pbXBvcnQgeyBEZXNlcmlhbGl6ZXIgYXMgRGVzZXJpYWxpemVyMTUsIFNlcmlhbGl6ZXIgYXMgU2VyaWFsaXplcjE1IH0gZnJvbSBcIkBhcHRvcy1sYWJzL3RzLXNka1wiO1xudmFyIF9Qcm9tcHRPcGVuZXJQaW5nUmVxdWVzdE1lc3NhZ2UgPSBjbGFzcyBfUHJvbXB0T3BlbmVyUGluZ1JlcXVlc3RNZXNzYWdlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fX21lc3NhZ2VUeXBlID0gX1Byb21wdE9wZW5lclBpbmdSZXF1ZXN0TWVzc2FnZS5UWVBFO1xuICB9XG59O1xuX1Byb21wdE9wZW5lclBpbmdSZXF1ZXN0TWVzc2FnZS5UWVBFID0gXCJQcm9tcHRPcGVuZXJQaW5nUmVxdWVzdFwiO1xudmFyIFByb21wdE9wZW5lclBpbmdSZXF1ZXN0TWVzc2FnZSA9IF9Qcm9tcHRPcGVuZXJQaW5nUmVxdWVzdE1lc3NhZ2U7XG52YXIgX1Byb21wdE9wZW5lclBpbmdSZXNwb25zZU1lc3NhZ2UgPSBjbGFzcyBfUHJvbXB0T3BlbmVyUGluZ1Jlc3BvbnNlTWVzc2FnZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX19tZXNzYWdlVHlwZSA9IF9Qcm9tcHRPcGVuZXJQaW5nUmVzcG9uc2VNZXNzYWdlLlRZUEU7XG4gIH1cbn07XG5fUHJvbXB0T3BlbmVyUGluZ1Jlc3BvbnNlTWVzc2FnZS5UWVBFID0gXCJQcm9tcHRPcGVuZXJQaW5nUmVzcG9uc2VcIjtcbnZhciBQcm9tcHRPcGVuZXJQaW5nUmVzcG9uc2VNZXNzYWdlID0gX1Byb21wdE9wZW5lclBpbmdSZXNwb25zZU1lc3NhZ2U7XG52YXIgX1Byb21wdEFwcHJvdmFsUmVzcG9uc2VNZXNzYWdlID0gY2xhc3MgX1Byb21wdEFwcHJvdmFsUmVzcG9uc2VNZXNzYWdlIHtcbiAgY29uc3RydWN0b3Ioc2VyaWFsaXplZFZhbHVlKSB7XG4gICAgdGhpcy5zZXJpYWxpemVkVmFsdWUgPSBzZXJpYWxpemVkVmFsdWU7XG4gICAgdGhpcy5fX21lc3NhZ2VUeXBlID0gX1Byb21wdEFwcHJvdmFsUmVzcG9uc2VNZXNzYWdlLlRZUEU7XG4gIH1cbn07XG5fUHJvbXB0QXBwcm92YWxSZXNwb25zZU1lc3NhZ2UuVFlQRSA9IFwiUHJvbXB0QXBwcm92YWxSZXNwb25zZVwiO1xudmFyIFByb21wdEFwcHJvdmFsUmVzcG9uc2VNZXNzYWdlID0gX1Byb21wdEFwcHJvdmFsUmVzcG9uc2VNZXNzYWdlO1xudmFyIF9Qcm9tcHRVbmF1dGhvcml6ZWRFcnJvck1lc3NhZ2UgPSBjbGFzcyBfUHJvbXB0VW5hdXRob3JpemVkRXJyb3JNZXNzYWdlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fX21lc3NhZ2VUeXBlID0gX1Byb21wdFVuYXV0aG9yaXplZEVycm9yTWVzc2FnZS5UWVBFO1xuICB9XG59O1xuX1Byb21wdFVuYXV0aG9yaXplZEVycm9yTWVzc2FnZS5UWVBFID0gXCJQcm9tcHRVbmF1dGhvcml6ZWRFcnJvclwiO1xudmFyIFByb21wdFVuYXV0aG9yaXplZEVycm9yTWVzc2FnZSA9IF9Qcm9tcHRVbmF1dGhvcml6ZWRFcnJvck1lc3NhZ2U7XG5mdW5jdGlvbiB1cmxFbmNvZGVXYWxsZXRSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgY29uc3Qgc2VyaWFsaXplciA9IG5ldyBTZXJpYWxpemVyMTUoKTtcbiAgc2VyaWFsaXplci5zZXJpYWxpemVTdHIocmVxdWVzdC5uYW1lKTtcbiAgc2VyaWFsaXplci5zZXJpYWxpemVCeXRlcyhyZXF1ZXN0LmRhdGEpO1xuICBzZXJpYWxpemVyLnNlcmlhbGl6ZVN0cihyZXF1ZXN0LnZlcnNpb24udG9TdHJpbmcoKSk7XG4gIHJldHVybiBieXRlc1RvQmFzZTY0KHNlcmlhbGl6ZXIudG9VaW50OEFycmF5KCkpO1xufVxuZnVuY3Rpb24gdXJsRGVjb2RlV2FsbGV0UmVxdWVzdChlbmNvZGVkUmVxdWVzdCkge1xuICBjb25zdCBkZXNlcmlhbGl6ZXIgPSBuZXcgRGVzZXJpYWxpemVyMTUoYmFzZTY0VG9CeXRlcyhlbmNvZGVkUmVxdWVzdCkpO1xuICBjb25zdCBuYW1lID0gZGVzZXJpYWxpemVyLmRlc2VyaWFsaXplU3RyKCk7XG4gIGNvbnN0IGRhdGEgPSBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemVCeXRlcygpO1xuICBsZXQgdmVyc2lvbjtcbiAgdHJ5IHtcbiAgICB2ZXJzaW9uID0gTnVtYmVyKGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVN0cigpKTtcbiAgfSBjYXRjaCB7XG4gICAgdmVyc2lvbiA9IDE7XG4gIH1cbiAgcmV0dXJuIHsgZGF0YSwgbmFtZSwgdmVyc2lvbiB9O1xufVxuZXhwb3J0IHtcbiAgQXB0b3NXYWxsZXRFcnJvclJlc3BvbnNlTWVzc2FnZSxcbiAgQXB0b3NXYWxsZXRSZXF1ZXN0TWVzc2FnZSxcbiAgQXB0b3NXYWxsZXRTdWNjZXNzUmVzcG9uc2VNZXNzYWdlLFxuICBDb25uZWN0UmVxdWVzdCxcbiAgQ29ubmVjdFJlc3BvbnNlLFxuICBEaXNjb25uZWN0UmVxdWVzdCxcbiAgRGlzY29ubmVjdFJlc3BvbnNlLFxuICBFbnRyeUZ1bmN0aW9uQXJndW1lbnRWYXJpYW50LFxuICBHZXRDb25uZWN0ZWRBY2NvdW50c1JlcXVlc3QsXG4gIEdldENvbm5lY3RlZEFjY291bnRzUmVzcG9uc2UsXG4gIElzQ29ubmVjdGVkUmVxdWVzdCxcbiAgSXNDb25uZWN0ZWRSZXNwb25zZSxcbiAgUHJvbXB0QXBwcm92YWxSZXNwb25zZU1lc3NhZ2UsXG4gIFByb21wdE9wZW5lclBpbmdSZXF1ZXN0TWVzc2FnZSxcbiAgUHJvbXB0T3BlbmVyUGluZ1Jlc3BvbnNlTWVzc2FnZSxcbiAgUHJvbXB0VW5hdXRob3JpemVkRXJyb3JNZXNzYWdlLFxuICBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXF1ZXN0LFxuICBTaWduQW5kU3VibWl0VHJhbnNhY3Rpb25SZXNwb25zZSxcbiAgU2lnbk1lc3NhZ2VSZXF1ZXN0LFxuICBTaWduTWVzc2FnZVJlc3BvbnNlLFxuICBTaWduVHJhbnNhY3Rpb25SZXF1ZXN0LFxuICBTaWduVHJhbnNhY3Rpb25SZXNwb25zZSxcbiAgVHJhbnNhY3Rpb25QYXlsb2FkSW5wdXRWYXJpYW50LFxuICBiYXNlNjRUb0J5dGVzLFxuICBieXRlc1RvQmFzZTY0LFxuICBjaGFpbklkVG9OZXR3b3JrLFxuICBkZXNlcmlhbGl6ZUFjY291bnRBdXRoZW50aWNhdG9ySW5wdXQsXG4gIGRlc2VyaWFsaXplQWNjb3VudEluZm8sXG4gIGRlc2VyaWFsaXplQWNjb3VudElucHV0LFxuICBkZXNlcmlhbGl6ZURhcHBJbmZvLFxuICBkZXNlcmlhbGl6ZUVudHJ5RnVuY3Rpb25Bcmd1bWVudCxcbiAgZGVzZXJpYWxpemVQdWJsaWNLZXksXG4gIGRlc2VyaWFsaXplU2lnbmF0dXJlLFxuICBkZXNlcmlhbGl6ZVRyYW5zYWN0aW9uUGF5bG9hZElucHV0LFxuICBkZXNlcmlhbGl6ZVdhbGxldFJlcXVlc3QsXG4gIGRlc2VyaWFsaXplV2FsbGV0UmVxdWVzdFdpdGhBcmdzLFxuICBkZXNlcmlhbGl6ZVdhbGxldFJlc3BvbnNlLFxuICBpc0FwdG9zV2FsbGV0UmVzcG9uc2VNZXNzYWdlLFxuICBpc1N1cHBvcnRlZE5ldHdvcmssXG4gIGlzVHlwZWRNZXNzYWdlLFxuICBtYWtlVXNlckFwcHJvdmFsLFxuICBtYWtlVXNlclJlc3BvbnNlRGVzZXJpYWxpemVGbixcbiAgbWFrZVVzZXJSZXNwb25zZVNlcmlhbGl6ZUZuLFxuICBzZXJpYWxpemVBY2NvdW50QXV0aGVudGljYXRvcklucHV0LFxuICBzZXJpYWxpemVBY2NvdW50SW5mbyxcbiAgc2VyaWFsaXplQWNjb3VudElucHV0LFxuICBzZXJpYWxpemVEYXBwSW5mbyxcbiAgc2VyaWFsaXplRW50cnlGdW5jdGlvbkFyZ3VtZW50LFxuICBzZXJpYWxpemVQdWJsaWNLZXksXG4gIHNlcmlhbGl6ZVNpZ25hdHVyZSxcbiAgc2VyaWFsaXplVHJhbnNhY3Rpb25QYXlsb2FkSW5wdXQsXG4gIHNlcmlhbGl6ZVdhbGxldFJlcXVlc3QsXG4gIHNlcmlhbGl6ZVdhbGxldFJlcXVlc3RXaXRoQXJncyxcbiAgc2VyaWFsaXplV2FsbGV0UmVzcG9uc2UsXG4gIHVybERlY29kZVdhbGxldFJlcXVlc3QsXG4gIHVybEVuY29kZVdhbGxldFJlcXVlc3Rcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/../../../../node_modules/@aptos-connect/wallet-api/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/../../../../node_modules/@aptos-connect/web-transport/dist/index.mjs":
/*!****************************************************************************!*\
  !*** ../../../../node_modules/@aptos-connect/web-transport/dist/index.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WebWalletTransport: () => (/* binding */ WebWalletTransport)\n/* harmony export */ });\n/* harmony import */ var _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aptos-connect/wallet-api */ \"(ssr)/../../../../node_modules/@aptos-connect/wallet-api/dist/index.mjs\");\n/* harmony import */ var _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aptos-labs/ts-sdk */ \"(ssr)/../../../../node_modules/@aptos-labs/ts-sdk/dist/esm/index.mjs\");\n// src/index.ts\n\n\n// src/prompt.ts\n\nvar DEFAULT_PROMPT_SIZE = { height: 695, width: 465 };\nvar PROMPT_POLLER_INTERVAL = 500;\nvar dismissalSerializedResponse = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.ConnectResponse.serialize({ status: \"dismissed\" });\nvar PromptUnauthorizedError = class extends Error {\n  constructor() {\n    super(\"Unauthorized\");\n  }\n};\nfunction openPrompt(url, size = DEFAULT_PROMPT_SIZE) {\n  const { height, width } = size;\n  const options = {\n    height,\n    left: window.screenLeft + Math.round((window.outerWidth - width) / 2),\n    popup: true,\n    top: window.screenTop + Math.round((window.outerHeight - height) / 2),\n    width\n  };\n  const strOptions = Object.entries(options).map(([key, value]) => `${key}=${JSON.stringify(value)}`).reduce((acc, entry) => `${acc}, ${entry}`);\n  const href = url instanceof URL ? url.href : url;\n  const promptWindow = window.open(href, void 0, strOptions);\n  if (promptWindow === null) {\n    throw new Error(\"Couldn't open prompt\");\n  }\n  return promptWindow;\n}\nasync function waitForPromptResponse(baseUrl, promptWindow) {\n  return new Promise((resolve, reject) => {\n    const listeners = {\n      onMessage: (message) => {\n        if (message.source !== promptWindow || message.origin !== baseUrl) {\n          return;\n        }\n        if ((0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.isTypedMessage)(_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.PromptUnauthorizedErrorMessage, message.data)) {\n          window.removeEventListener(\"message\", listeners.onMessage);\n          clearTimeout(listeners.promptPollerId);\n          reject(new PromptUnauthorizedError());\n          return;\n        }\n        if ((0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.isTypedMessage)(_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.PromptOpenerPingRequestMessage, message.data)) {\n          promptWindow.postMessage(new _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.PromptOpenerPingResponseMessage(), baseUrl);\n          return;\n        }\n        if ((0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.isTypedMessage)(_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.PromptApprovalResponseMessage, message.data)) {\n          window.removeEventListener(\"message\", listeners.onMessage);\n          clearTimeout(listeners.promptPollerId);\n          resolve(message.data.serializedValue);\n        }\n      },\n      promptPollerId: setInterval(() => {\n        if (promptWindow.closed) {\n          window.removeEventListener(\"message\", listeners.onMessage);\n          clearTimeout(listeners.promptPollerId);\n          resolve(dismissalSerializedResponse);\n        }\n      }, PROMPT_POLLER_INTERVAL)\n    };\n    window.addEventListener(\"message\", listeners.onMessage);\n  });\n}\n\n// src/state.ts\n\n\nvar localDappStateKey = \"@aptos-connect/dapp-local-state\";\nfunction serializeLocalDappState(state) {\n  const serializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Serializer();\n  serializer.serializeU32AsUleb128(state.connectedAccounts.length);\n  for (const account of state.connectedAccounts) {\n    (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.serializeAccountInfo)(serializer, account);\n  }\n  return serializer.toUint8Array();\n}\nfunction deserializeLocalDappState(serializedValue) {\n  const deserializer = new _aptos_labs_ts_sdk__WEBPACK_IMPORTED_MODULE_1__.Deserializer(serializedValue);\n  const connectedAccountsLength = deserializer.deserializeUleb128AsU32();\n  const connectedAccounts = [];\n  for (let i = 0; i < connectedAccountsLength; i += 1) {\n    connectedAccounts.push((0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.deserializeAccountInfo)(deserializer));\n  }\n  return { connectedAccounts };\n}\nfunction getState() {\n  const encodedValue = window.localStorage.getItem(localDappStateKey);\n  return encodedValue ? deserializeLocalDappState((0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.base64ToBytes)(encodedValue)) : { connectedAccounts: [] };\n}\nfunction setState(state) {\n  const serializedValue = serializeLocalDappState(state);\n  const encodedValue = (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.bytesToBase64)(serializedValue);\n  window.localStorage.setItem(localDappStateKey, encodedValue);\n}\nfunction getConnectedAccounts() {\n  const state = getState();\n  return state.connectedAccounts;\n}\nfunction addConnectedAccount(account) {\n  const { connectedAccounts, ...state } = getState();\n  connectedAccounts.push(account);\n  setState({ ...state, connectedAccounts });\n}\nfunction removeConnectedAccount(address) {\n  const { connectedAccounts, ...state } = getState();\n  const index = connectedAccounts.findIndex((a) => a.address.equals(address));\n  if (index >= 0) {\n    connectedAccounts.splice(index, 1);\n  }\n  setState({ ...state, connectedAccounts });\n}\n\n// src/index.ts\nvar WebWalletTransport = class {\n  constructor(baseUrl) {\n    this.baseUrl = baseUrl;\n    this.baseUrl = baseUrl;\n  }\n  async sendPromptRequest(request) {\n    const url = new URL(`${this.baseUrl}/prompt/`);\n    url.searchParams.set(\"request\", (0,_aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.urlEncodeWalletRequest)(request));\n    const prompt = openPrompt(url);\n    return waitForPromptResponse(this.baseUrl, prompt);\n  }\n  async sendRequest(request) {\n    switch (request.name) {\n      case _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.IsConnectedRequest.name: {\n        const connectedAccounts = getConnectedAccounts();\n        return _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.IsConnectedResponse.serialize(connectedAccounts.length > 0);\n      }\n      case _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.GetConnectedAccountsRequest.name: {\n        const connectedAccounts = getConnectedAccounts();\n        return _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.GetConnectedAccountsResponse.serialize(connectedAccounts);\n      }\n      case _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.ConnectRequest.name: {\n        const serializedResponse = await this.sendPromptRequest(request);\n        const response = _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.ConnectResponse.deserialize(serializedResponse);\n        if (response.args.status === \"approved\") {\n          const { account, pairing } = response.args.args;\n          if (pairing === void 0) {\n            addConnectedAccount(account);\n          }\n        }\n        return serializedResponse;\n      }\n      case _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.DisconnectRequest.name: {\n        const [activeAccount] = getConnectedAccounts();\n        if (activeAccount) {\n          removeConnectedAccount(activeAccount.address);\n        }\n        return _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.DisconnectResponse.serialize({});\n      }\n      case _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.SignMessageRequest.name:\n      case _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.SignTransactionRequest.name:\n      case _aptos_connect_wallet_api__WEBPACK_IMPORTED_MODULE_0__.SignAndSubmitTransactionRequest.name: {\n        return this.sendPromptRequest(request);\n      }\n      default: {\n        throw new Error(\"Unexpected request\");\n      }\n    }\n  }\n};\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0BhcHRvcy1jb25uZWN0L3dlYi10cmFuc3BvcnQvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFjbUM7O0FBRW5DO0FBUW1DO0FBQ25DLDRCQUE0QjtBQUM1QjtBQUNBLGtDQUFrQyxzRUFBZSxhQUFhLHFCQUFxQjtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGdCQUFnQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNFQUFzRSxJQUFJLEdBQUcsc0JBQXNCLDZCQUE2QixJQUFJLElBQUksTUFBTTtBQUM5STtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx5RUFBYyxDQUFDLHFGQUE4QjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx5RUFBYyxDQUFDLHFGQUE4QjtBQUN6RCx1Q0FBdUMsc0ZBQStCO0FBQ3RFO0FBQ0E7QUFDQSxZQUFZLHlFQUFjLENBQUMsb0ZBQTZCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBTW1DO0FBQzJCO0FBQzlEO0FBQ0E7QUFDQSx5QkFBeUIsMERBQVU7QUFDbkM7QUFDQTtBQUNBLElBQUksK0VBQW9CO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDREQUFZO0FBQ3ZDO0FBQ0E7QUFDQSxrQkFBa0IsNkJBQTZCO0FBQy9DLDJCQUEyQixpRkFBc0I7QUFDakQ7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELHdFQUFhLG9CQUFvQjtBQUNuRjtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0VBQWE7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDhCQUE4QjtBQUN4QztBQUNBLGFBQWEsNkJBQTZCO0FBQzFDO0FBQ0E7QUFDQSxVQUFVLDhCQUE4QjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsNkJBQTZCO0FBQzFDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGFBQWE7QUFDeEMsb0NBQW9DLGlGQUFzQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx5RUFBa0I7QUFDN0I7QUFDQSxlQUFlLDBFQUFtQjtBQUNsQztBQUNBLFdBQVcsa0ZBQTJCO0FBQ3RDO0FBQ0EsZUFBZSxtRkFBNEI7QUFDM0M7QUFDQSxXQUFXLHFFQUFjO0FBQ3pCO0FBQ0EseUJBQXlCLHNFQUFnQjtBQUN6QztBQUNBLGtCQUFrQixtQkFBbUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx3RUFBaUI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHlFQUFrQixhQUFhO0FBQzlDO0FBQ0EsV0FBVyx5RUFBa0I7QUFDN0IsV0FBVyw2RUFBc0I7QUFDakMsV0FBVyxzRkFBK0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mcm9udGVuZC8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQGFwdG9zLWNvbm5lY3Qvd2ViLXRyYW5zcG9ydC9kaXN0L2luZGV4Lm1qcz9kY2E1Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9pbmRleC50c1xuaW1wb3J0IHtcbiAgQ29ubmVjdFJlcXVlc3QsXG4gIENvbm5lY3RSZXNwb25zZSBhcyBDb25uZWN0UmVzcG9uc2UyLFxuICBEaXNjb25uZWN0UmVxdWVzdCxcbiAgRGlzY29ubmVjdFJlc3BvbnNlLFxuICBHZXRDb25uZWN0ZWRBY2NvdW50c1JlcXVlc3QsXG4gIEdldENvbm5lY3RlZEFjY291bnRzUmVzcG9uc2UsXG4gIElzQ29ubmVjdGVkUmVxdWVzdCxcbiAgSXNDb25uZWN0ZWRSZXNwb25zZSxcbiAgU2lnbkFuZFN1Ym1pdFRyYW5zYWN0aW9uUmVxdWVzdCxcbiAgU2lnbk1lc3NhZ2VSZXF1ZXN0LFxuICBTaWduVHJhbnNhY3Rpb25SZXF1ZXN0LFxuICB1cmxFbmNvZGVXYWxsZXRSZXF1ZXN0XG59IGZyb20gXCJAYXB0b3MtY29ubmVjdC93YWxsZXQtYXBpXCI7XG5cbi8vIHNyYy9wcm9tcHQudHNcbmltcG9ydCB7XG4gIENvbm5lY3RSZXNwb25zZSxcbiAgaXNUeXBlZE1lc3NhZ2UsXG4gIFByb21wdEFwcHJvdmFsUmVzcG9uc2VNZXNzYWdlLFxuICBQcm9tcHRPcGVuZXJQaW5nUmVxdWVzdE1lc3NhZ2UsXG4gIFByb21wdE9wZW5lclBpbmdSZXNwb25zZU1lc3NhZ2UsXG4gIFByb21wdFVuYXV0aG9yaXplZEVycm9yTWVzc2FnZVxufSBmcm9tIFwiQGFwdG9zLWNvbm5lY3Qvd2FsbGV0LWFwaVwiO1xudmFyIERFRkFVTFRfUFJPTVBUX1NJWkUgPSB7IGhlaWdodDogNjk1LCB3aWR0aDogNDY1IH07XG52YXIgUFJPTVBUX1BPTExFUl9JTlRFUlZBTCA9IDUwMDtcbnZhciBkaXNtaXNzYWxTZXJpYWxpemVkUmVzcG9uc2UgPSBDb25uZWN0UmVzcG9uc2Uuc2VyaWFsaXplKHsgc3RhdHVzOiBcImRpc21pc3NlZFwiIH0pO1xudmFyIFByb21wdFVuYXV0aG9yaXplZEVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKFwiVW5hdXRob3JpemVkXCIpO1xuICB9XG59O1xuZnVuY3Rpb24gb3BlblByb21wdCh1cmwsIHNpemUgPSBERUZBVUxUX1BST01QVF9TSVpFKSB7XG4gIGNvbnN0IHsgaGVpZ2h0LCB3aWR0aCB9ID0gc2l6ZTtcbiAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICBoZWlnaHQsXG4gICAgbGVmdDogd2luZG93LnNjcmVlbkxlZnQgKyBNYXRoLnJvdW5kKCh3aW5kb3cub3V0ZXJXaWR0aCAtIHdpZHRoKSAvIDIpLFxuICAgIHBvcHVwOiB0cnVlLFxuICAgIHRvcDogd2luZG93LnNjcmVlblRvcCArIE1hdGgucm91bmQoKHdpbmRvdy5vdXRlckhlaWdodCAtIGhlaWdodCkgLyAyKSxcbiAgICB3aWR0aFxuICB9O1xuICBjb25zdCBzdHJPcHRpb25zID0gT2JqZWN0LmVudHJpZXMob3B0aW9ucykubWFwKChba2V5LCB2YWx1ZV0pID0+IGAke2tleX09JHtKU09OLnN0cmluZ2lmeSh2YWx1ZSl9YCkucmVkdWNlKChhY2MsIGVudHJ5KSA9PiBgJHthY2N9LCAke2VudHJ5fWApO1xuICBjb25zdCBocmVmID0gdXJsIGluc3RhbmNlb2YgVVJMID8gdXJsLmhyZWYgOiB1cmw7XG4gIGNvbnN0IHByb21wdFdpbmRvdyA9IHdpbmRvdy5vcGVuKGhyZWYsIHZvaWQgMCwgc3RyT3B0aW9ucyk7XG4gIGlmIChwcm9tcHRXaW5kb3cgPT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBvcGVuIHByb21wdFwiKTtcbiAgfVxuICByZXR1cm4gcHJvbXB0V2luZG93O1xufVxuYXN5bmMgZnVuY3Rpb24gd2FpdEZvclByb21wdFJlc3BvbnNlKGJhc2VVcmwsIHByb21wdFdpbmRvdykge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IGxpc3RlbmVycyA9IHtcbiAgICAgIG9uTWVzc2FnZTogKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgaWYgKG1lc3NhZ2Uuc291cmNlICE9PSBwcm9tcHRXaW5kb3cgfHwgbWVzc2FnZS5vcmlnaW4gIT09IGJhc2VVcmwpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzVHlwZWRNZXNzYWdlKFByb21wdFVuYXV0aG9yaXplZEVycm9yTWVzc2FnZSwgbWVzc2FnZS5kYXRhKSkge1xuICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBsaXN0ZW5lcnMub25NZXNzYWdlKTtcbiAgICAgICAgICBjbGVhclRpbWVvdXQobGlzdGVuZXJzLnByb21wdFBvbGxlcklkKTtcbiAgICAgICAgICByZWplY3QobmV3IFByb21wdFVuYXV0aG9yaXplZEVycm9yKCkpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNUeXBlZE1lc3NhZ2UoUHJvbXB0T3BlbmVyUGluZ1JlcXVlc3RNZXNzYWdlLCBtZXNzYWdlLmRhdGEpKSB7XG4gICAgICAgICAgcHJvbXB0V2luZG93LnBvc3RNZXNzYWdlKG5ldyBQcm9tcHRPcGVuZXJQaW5nUmVzcG9uc2VNZXNzYWdlKCksIGJhc2VVcmwpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNUeXBlZE1lc3NhZ2UoUHJvbXB0QXBwcm92YWxSZXNwb25zZU1lc3NhZ2UsIG1lc3NhZ2UuZGF0YSkpIHtcbiAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgbGlzdGVuZXJzLm9uTWVzc2FnZSk7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KGxpc3RlbmVycy5wcm9tcHRQb2xsZXJJZCk7XG4gICAgICAgICAgcmVzb2x2ZShtZXNzYWdlLmRhdGEuc2VyaWFsaXplZFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHByb21wdFBvbGxlcklkOiBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIGlmIChwcm9tcHRXaW5kb3cuY2xvc2VkKSB7XG4gICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGxpc3RlbmVycy5vbk1lc3NhZ2UpO1xuICAgICAgICAgIGNsZWFyVGltZW91dChsaXN0ZW5lcnMucHJvbXB0UG9sbGVySWQpO1xuICAgICAgICAgIHJlc29sdmUoZGlzbWlzc2FsU2VyaWFsaXplZFJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgICAgfSwgUFJPTVBUX1BPTExFUl9JTlRFUlZBTClcbiAgICB9O1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBsaXN0ZW5lcnMub25NZXNzYWdlKTtcbiAgfSk7XG59XG5cbi8vIHNyYy9zdGF0ZS50c1xuaW1wb3J0IHtcbiAgYmFzZTY0VG9CeXRlcyxcbiAgYnl0ZXNUb0Jhc2U2NCxcbiAgZGVzZXJpYWxpemVBY2NvdW50SW5mbyxcbiAgc2VyaWFsaXplQWNjb3VudEluZm9cbn0gZnJvbSBcIkBhcHRvcy1jb25uZWN0L3dhbGxldC1hcGlcIjtcbmltcG9ydCB7IERlc2VyaWFsaXplciwgU2VyaWFsaXplciB9IGZyb20gXCJAYXB0b3MtbGFicy90cy1zZGtcIjtcbnZhciBsb2NhbERhcHBTdGF0ZUtleSA9IFwiQGFwdG9zLWNvbm5lY3QvZGFwcC1sb2NhbC1zdGF0ZVwiO1xuZnVuY3Rpb24gc2VyaWFsaXplTG9jYWxEYXBwU3RhdGUoc3RhdGUpIHtcbiAgY29uc3Qgc2VyaWFsaXplciA9IG5ldyBTZXJpYWxpemVyKCk7XG4gIHNlcmlhbGl6ZXIuc2VyaWFsaXplVTMyQXNVbGViMTI4KHN0YXRlLmNvbm5lY3RlZEFjY291bnRzLmxlbmd0aCk7XG4gIGZvciAoY29uc3QgYWNjb3VudCBvZiBzdGF0ZS5jb25uZWN0ZWRBY2NvdW50cykge1xuICAgIHNlcmlhbGl6ZUFjY291bnRJbmZvKHNlcmlhbGl6ZXIsIGFjY291bnQpO1xuICB9XG4gIHJldHVybiBzZXJpYWxpemVyLnRvVWludDhBcnJheSgpO1xufVxuZnVuY3Rpb24gZGVzZXJpYWxpemVMb2NhbERhcHBTdGF0ZShzZXJpYWxpemVkVmFsdWUpIHtcbiAgY29uc3QgZGVzZXJpYWxpemVyID0gbmV3IERlc2VyaWFsaXplcihzZXJpYWxpemVkVmFsdWUpO1xuICBjb25zdCBjb25uZWN0ZWRBY2NvdW50c0xlbmd0aCA9IGRlc2VyaWFsaXplci5kZXNlcmlhbGl6ZVVsZWIxMjhBc1UzMigpO1xuICBjb25zdCBjb25uZWN0ZWRBY2NvdW50cyA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbm5lY3RlZEFjY291bnRzTGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25uZWN0ZWRBY2NvdW50cy5wdXNoKGRlc2VyaWFsaXplQWNjb3VudEluZm8oZGVzZXJpYWxpemVyKSk7XG4gIH1cbiAgcmV0dXJuIHsgY29ubmVjdGVkQWNjb3VudHMgfTtcbn1cbmZ1bmN0aW9uIGdldFN0YXRlKCkge1xuICBjb25zdCBlbmNvZGVkVmFsdWUgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0obG9jYWxEYXBwU3RhdGVLZXkpO1xuICByZXR1cm4gZW5jb2RlZFZhbHVlID8gZGVzZXJpYWxpemVMb2NhbERhcHBTdGF0ZShiYXNlNjRUb0J5dGVzKGVuY29kZWRWYWx1ZSkpIDogeyBjb25uZWN0ZWRBY2NvdW50czogW10gfTtcbn1cbmZ1bmN0aW9uIHNldFN0YXRlKHN0YXRlKSB7XG4gIGNvbnN0IHNlcmlhbGl6ZWRWYWx1ZSA9IHNlcmlhbGl6ZUxvY2FsRGFwcFN0YXRlKHN0YXRlKTtcbiAgY29uc3QgZW5jb2RlZFZhbHVlID0gYnl0ZXNUb0Jhc2U2NChzZXJpYWxpemVkVmFsdWUpO1xuICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0obG9jYWxEYXBwU3RhdGVLZXksIGVuY29kZWRWYWx1ZSk7XG59XG5mdW5jdGlvbiBnZXRDb25uZWN0ZWRBY2NvdW50cygpIHtcbiAgY29uc3Qgc3RhdGUgPSBnZXRTdGF0ZSgpO1xuICByZXR1cm4gc3RhdGUuY29ubmVjdGVkQWNjb3VudHM7XG59XG5mdW5jdGlvbiBhZGRDb25uZWN0ZWRBY2NvdW50KGFjY291bnQpIHtcbiAgY29uc3QgeyBjb25uZWN0ZWRBY2NvdW50cywgLi4uc3RhdGUgfSA9IGdldFN0YXRlKCk7XG4gIGNvbm5lY3RlZEFjY291bnRzLnB1c2goYWNjb3VudCk7XG4gIHNldFN0YXRlKHsgLi4uc3RhdGUsIGNvbm5lY3RlZEFjY291bnRzIH0pO1xufVxuZnVuY3Rpb24gcmVtb3ZlQ29ubmVjdGVkQWNjb3VudChhZGRyZXNzKSB7XG4gIGNvbnN0IHsgY29ubmVjdGVkQWNjb3VudHMsIC4uLnN0YXRlIH0gPSBnZXRTdGF0ZSgpO1xuICBjb25zdCBpbmRleCA9IGNvbm5lY3RlZEFjY291bnRzLmZpbmRJbmRleCgoYSkgPT4gYS5hZGRyZXNzLmVxdWFscyhhZGRyZXNzKSk7XG4gIGlmIChpbmRleCA+PSAwKSB7XG4gICAgY29ubmVjdGVkQWNjb3VudHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuICBzZXRTdGF0ZSh7IC4uLnN0YXRlLCBjb25uZWN0ZWRBY2NvdW50cyB9KTtcbn1cblxuLy8gc3JjL2luZGV4LnRzXG52YXIgV2ViV2FsbGV0VHJhbnNwb3J0ID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihiYXNlVXJsKSB7XG4gICAgdGhpcy5iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsO1xuICB9XG4gIGFzeW5jIHNlbmRQcm9tcHRSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGAke3RoaXMuYmFzZVVybH0vcHJvbXB0L2ApO1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwicmVxdWVzdFwiLCB1cmxFbmNvZGVXYWxsZXRSZXF1ZXN0KHJlcXVlc3QpKTtcbiAgICBjb25zdCBwcm9tcHQgPSBvcGVuUHJvbXB0KHVybCk7XG4gICAgcmV0dXJuIHdhaXRGb3JQcm9tcHRSZXNwb25zZSh0aGlzLmJhc2VVcmwsIHByb21wdCk7XG4gIH1cbiAgYXN5bmMgc2VuZFJlcXVlc3QocmVxdWVzdCkge1xuICAgIHN3aXRjaCAocmVxdWVzdC5uYW1lKSB7XG4gICAgICBjYXNlIElzQ29ubmVjdGVkUmVxdWVzdC5uYW1lOiB7XG4gICAgICAgIGNvbnN0IGNvbm5lY3RlZEFjY291bnRzID0gZ2V0Q29ubmVjdGVkQWNjb3VudHMoKTtcbiAgICAgICAgcmV0dXJuIElzQ29ubmVjdGVkUmVzcG9uc2Uuc2VyaWFsaXplKGNvbm5lY3RlZEFjY291bnRzLmxlbmd0aCA+IDApO1xuICAgICAgfVxuICAgICAgY2FzZSBHZXRDb25uZWN0ZWRBY2NvdW50c1JlcXVlc3QubmFtZToge1xuICAgICAgICBjb25zdCBjb25uZWN0ZWRBY2NvdW50cyA9IGdldENvbm5lY3RlZEFjY291bnRzKCk7XG4gICAgICAgIHJldHVybiBHZXRDb25uZWN0ZWRBY2NvdW50c1Jlc3BvbnNlLnNlcmlhbGl6ZShjb25uZWN0ZWRBY2NvdW50cyk7XG4gICAgICB9XG4gICAgICBjYXNlIENvbm5lY3RSZXF1ZXN0Lm5hbWU6IHtcbiAgICAgICAgY29uc3Qgc2VyaWFsaXplZFJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZW5kUHJvbXB0UmVxdWVzdChyZXF1ZXN0KTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBDb25uZWN0UmVzcG9uc2UyLmRlc2VyaWFsaXplKHNlcmlhbGl6ZWRSZXNwb25zZSk7XG4gICAgICAgIGlmIChyZXNwb25zZS5hcmdzLnN0YXR1cyA9PT0gXCJhcHByb3ZlZFwiKSB7XG4gICAgICAgICAgY29uc3QgeyBhY2NvdW50LCBwYWlyaW5nIH0gPSByZXNwb25zZS5hcmdzLmFyZ3M7XG4gICAgICAgICAgaWYgKHBhaXJpbmcgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgYWRkQ29ubmVjdGVkQWNjb3VudChhY2NvdW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlcmlhbGl6ZWRSZXNwb25zZTtcbiAgICAgIH1cbiAgICAgIGNhc2UgRGlzY29ubmVjdFJlcXVlc3QubmFtZToge1xuICAgICAgICBjb25zdCBbYWN0aXZlQWNjb3VudF0gPSBnZXRDb25uZWN0ZWRBY2NvdW50cygpO1xuICAgICAgICBpZiAoYWN0aXZlQWNjb3VudCkge1xuICAgICAgICAgIHJlbW92ZUNvbm5lY3RlZEFjY291bnQoYWN0aXZlQWNjb3VudC5hZGRyZXNzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRGlzY29ubmVjdFJlc3BvbnNlLnNlcmlhbGl6ZSh7fSk7XG4gICAgICB9XG4gICAgICBjYXNlIFNpZ25NZXNzYWdlUmVxdWVzdC5uYW1lOlxuICAgICAgY2FzZSBTaWduVHJhbnNhY3Rpb25SZXF1ZXN0Lm5hbWU6XG4gICAgICBjYXNlIFNpZ25BbmRTdWJtaXRUcmFuc2FjdGlvblJlcXVlc3QubmFtZToge1xuICAgICAgICByZXR1cm4gdGhpcy5zZW5kUHJvbXB0UmVxdWVzdChyZXF1ZXN0KTtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCByZXF1ZXN0XCIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcbmV4cG9ydCB7XG4gIFdlYldhbGxldFRyYW5zcG9ydFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/../../../../node_modules/@aptos-connect/web-transport/dist/index.mjs\n");

/***/ })

};
;